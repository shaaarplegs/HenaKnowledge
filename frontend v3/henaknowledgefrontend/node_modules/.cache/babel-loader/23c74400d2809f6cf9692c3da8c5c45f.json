{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _lib = require(\"../lib\");\n\nvar _schedular = require(\"../schedular\");\n\nvar _componentInterface = require(\"../component-interface\");\n\nvar _dependencyManager = require(\"../dependency-manager\");\n\nvar UNDEF;\n\nvar isIE8 = !_lib.hasSVG,\n    OBJECT = \"object\",\n    CHART = \"chart\",\n    GROUP = \"group\",\n    HTML = \"html\",\n    TEXT = \"text\",\n    PAPER = \"paper\",\n    DISAPPEARING = \"disappearing\",\n    APPEARING = \"appearing\",\n    STRING = \"string\",\n    UPDATING = \"updating\",\n    FUNCTION = \"function\",\n    LINEAR = \"linear\",\n    CHARTSPECIFIC = \"chartSpecific\",\n    GLOBAL = \"global\",\n    DEFAULT = \"default\",\n    HYPHEN_STR = \"-\",\n    STARSTRING = \"*\",\n    durationList = {\n  initial: 1,\n  update: 0,\n  realTimeUpdate: 0,\n  resize: 0,\n  dispose: 0,\n  legendInteraction: 0,\n  scroll: 0,\n  mouseOut: 0,\n  mouseOver: 0,\n  default: 0,\n  slicing: .25,\n  timenavSqueeze: 0,\n  selectedRange: 0,\n  timenavScroll: 0\n},\n    rulePriorityList = [DEFAULT, GLOBAL, CHARTSPECIFIC],\n    animMap = {\n  fadeIn: {\n    opacity: {\n      start: 0,\n      end: 1\n    }\n  },\n  fadeOut: {\n    opacity: {\n      start: 1,\n      end: 0\n    }\n  }\n},\n    callbackMap = {\n  fadeIn: function fadeIn() {\n    this && this.show();\n  },\n  fadeOut: function fadeOut() {\n    this && this.hide();\n  }\n},\n    isNull = function isNull(v) {\n  return v === null;\n},\n    getRegisteredThemes = function getRegisteredThemes(addedThemes) {\n  var themes = {},\n      theme;\n\n  for (var key in addedThemes) {\n    if (addedThemes.hasOwnProperty(key)) {\n      theme = addedThemes[key];\n      themes[theme.name] = theme;\n    }\n  }\n\n  return themes;\n},\n    fetchRulesFromTheme = function fetchRulesFromTheme(themes, themeList) {\n  if (themeList === void 0) {\n    themeList = \"\";\n  }\n\n  var themeArr = themeList.split(\",\"),\n      rules = [];\n  themeArr.forEach(function (v) {\n    if (themes[v] && themes[v].animation) {\n      rules.push(themes[v].animation);\n    }\n  });\n  return rules;\n},\n    shiftAnimTime = function shiftAnimTime(paramsConfig, duration, shiftTime) {\n  var config = Object.assign({}, paramsConfig),\n      shiftRatio = shiftTime / duration,\n      MAX_SHIFT = .2,\n      diff;\n\n  if (shiftRatio > MAX_SHIFT) {\n    shiftRatio = MAX_SHIFT;\n  }\n\n  diff = config.end - config.start;\n  config.start *= 1 - shiftRatio;\n  config.start += shiftRatio;\n  config.end = config.start + (1 - shiftRatio) * diff;\n  config.start = Math.round(config.start * 100) / 100;\n  config.end = Math.round(config.end * 100) / 100;\n  return config;\n},\n    _applyAnim = function _applyAnim(ob, type, applyCallback) {\n  var attrs = animMap[type],\n      key = _lib.BLANKSTRING,\n      origCallback,\n      origAttr = {};\n\n  if (!attrs || !ob || !ob.el || !ob.el[0]) {\n    return;\n  }\n\n  for (key in attrs) {\n    origAttr[key] = ob.el.attrs[key];\n\n    if (origAttr[key] === UNDEF) {\n      origAttr[key] = null;\n    }\n\n    ob.attrs[key] = attrs[key].end;\n    ob.el.attr(key, attrs[key].start);\n  }\n\n  origCallback = ob.callback;\n\n  ob.callback = function callback() {\n    applyCallback && callbackMap[type] && callbackMap[type].call(this);\n    origCallback && origCallback.call && origCallback.call(this);\n    this.attr(origAttr);\n  };\n},\n    applyType = function applyType(ob, _type) {\n  var i,\n      type = _type,\n      delimeter = HYPHEN_STR,\n      applyCallback = true;\n\n  if (!type) {\n    return;\n  }\n\n  ob.attrs = ob.attrs || {};\n  type = type.split(delimeter);\n\n  if (~type.indexOf(\"nc\")) {\n    applyCallback = false;\n  }\n\n  for (i = type.length; i--;) {\n    _applyAnim(ob, type[i], applyCallback);\n  }\n\n  return ob;\n},\n    animateEl = function animateEl(el, attrs, callback, animConfig, dummyObj, animObj, animationDuration, effect) {\n  el.animateWith(dummyObj, animObj, attrs, animationDuration, effect, callback, animConfig);\n},\n    execPreAnimFns = function execPreAnimFns(arr) {\n  var i = 0,\n      ii = arr.length;\n\n  for (i = 0; i < ii; ++i) {\n    arr[i].fn && arr[i].fn.call(arr[i].el);\n  }\n},\n    ruleReducer = function ruleReducer(animations) {\n  var ob = {};\n\n  for (var definition in animations) {\n    if (animations.hasOwnProperty(definition) && definition !== \"__esModule\") {\n      var animDef = animations[definition];\n      merge(ob, animDef);\n    }\n  }\n\n  return ob;\n},\n    merge = function merge(source, sink) {\n  for (var def in sink) {\n    if (sink.hasOwnProperty(def)) {\n      !source[def] && (source[def] = []);\n      source[def].push(sink[def]);\n    }\n  }\n},\n    isFunction = function isFunction(arg) {\n  return typeof arg === FUNCTION;\n};\n\nfunction hasAnimation(arr, animationName) {\n  var retBool = false,\n      objBool,\n      animObj,\n      i,\n      ii,\n      j,\n      jj;\n\n  if (!arr) {\n    return false;\n  }\n\n  for (i = 0, ii = arr.length; i < ii; i += 1) {\n    animObj = arr[i];\n\n    if (!Array.isArray(animObj)) {\n      objBool = false;\n\n      if (animationName.indexOf(animObj.name) !== -1) {\n        objBool = true;\n      } else if (animObj.child) {\n        objBool = animObj.hasAnimation = hasAnimation(animObj.child, animationName);\n      }\n\n      retBool = retBool || objBool;\n      animObj.hasAnimation = objBool;\n    } else {\n      for (j = 0, jj = arr[i].length; j < jj; j += 1) {\n        animObj = arr[i][j];\n        objBool = false;\n\n        if (animationName.indexOf(animObj.name) !== -1) {\n          objBool = true;\n        } else if (animObj.child) {\n          objBool = animObj.hasAnimation = hasAnimation(animObj.child, animationName);\n        }\n\n        retBool = retBool || objBool;\n        animObj.hasAnimation = objBool;\n      }\n    }\n  }\n\n  return retBool;\n}\n\nfunction buildDynamicRules(arr, start, end, workingRules) {\n  var animObj,\n      addTime,\n      addTimeCounter,\n      diff,\n      i,\n      ii = arr.length,\n      s = 0,\n      durationSum = 0,\n      e = start;\n  addTime = 0;\n  addTimeCounter = 0;\n\n  for (i = 0; i < ii; i += 1) {\n    animObj = arr[i];\n\n    if (!animObj.hasAnimation && animObj.collapsible !== false) {\n      addTime += animObj.duration;\n    } else {\n      addTimeCounter += 1;\n    }\n\n    durationSum += animObj.duration;\n  }\n\n  addTime /= addTimeCounter;\n\n  for (i = 0; i < ii; i += 1) {\n    animObj = arr[i];\n\n    if (!animObj.hasAnimation) {\n      continue;\n    }\n\n    s = e;\n    diff = end - start;\n    e = s + (animObj.duration / durationSum + addTime) * diff;\n    workingRules[animObj.name] = {\n      start: s,\n      end: e,\n      effect: animObj.effect,\n      transition: animObj.transition\n    };\n    animObj.child && buildWorkingRule(animObj.child, s, e, workingRules);\n  }\n}\n\nfunction buildStaticRules(obj, start, end, workingRules) {\n  var diff, s, e;\n  s = obj.start;\n  e = obj.end;\n  diff = end - start;\n  s = start + s * diff;\n  e = start + e * diff;\n  workingRules[obj.name] = {\n    start: s,\n    end: e,\n    effect: obj.effect,\n    transition: obj.transition\n  };\n  obj.child && buildWorkingRule(obj.child, s, e, workingRules);\n}\n\nfunction buildWorkingRule(arr, start, end, workingRules) {\n  var len = arr.length,\n      i,\n      arrItem;\n\n  for (i = 0; i < len; i++) {\n    arrItem = arr[i];\n    Array.isArray(arrItem) ? buildDynamicRules(arrItem, start, end, workingRules) : buildStaticRules(arrItem, start, end, workingRules);\n  }\n}\n\nanimMap.fadein = animMap.fadeIn;\nanimMap.fadeout = animMap.fadeOut;\n\nvar AnimationManager = function (_ComponentInterface) {\n  (0, _inheritsLoose2.default)(AnimationManager, _ComponentInterface);\n  var _proto = AnimationManager.prototype;\n\n  _proto.getType = function getType() {\n    return \"animationManager\";\n  };\n\n  function AnimationManager() {\n    var _this;\n\n    _this = _ComponentInterface.call(this) || this;\n    var animationManager = (0, _assertThisInitialized2.default)(_this);\n    animationManager._removedGraphics = [];\n\n    animationManager._animCallBack = function () {\n      if (!animationManager.getState(\"removed\") && !this.removed) {\n        var currAnimState = animationManager.getAnimationState();\n\n        animationManager._removeElems();\n\n        animationManager.reset();\n        animationManager.fireEvent(\"animationComplete\", {\n          currAnimState: currAnimState\n        });\n      }\n    };\n\n    animationManager.startAnimation = function () {\n      animationManager.kickStart();\n      animationManager.animate();\n    };\n\n    return _this;\n  }\n\n  _proto.getName = function getName() {\n    return \"animationManager\";\n  };\n\n  _proto.stopAnimation = function stopAnimation() {\n    if (!this.getState(\"chartAnimating\")) {\n      return;\n    }\n\n    var animationManager = this,\n        dummyObj,\n        config = animationManager.config,\n        animationObj = config.animationObj,\n        duration = animationObj && animationObj.duration;\n\n    if (duration) {\n      dummyObj = animationManager.getGraphicalElement().dummyObj;\n      dummyObj && dummyObj.stop(UNDEF, true, true);\n    } else if (duration === 0) {\n      animationManager.removeJob(\"anim-callBack\");\n\n      animationManager._animCallBack();\n    }\n  };\n\n  _proto.kickStart = function kickStart() {\n    var animationManager = this,\n        config = animationManager.config,\n        graphics = animationManager.getGraphicalElement(),\n        paper = animationManager.getFromEnv(PAPER),\n        animation = config.animationObj,\n        dummyObj,\n        animationDuration,\n        animObj,\n        animType = config.animationeffect;\n    animationDuration = animation.duration;\n    animation.animObj = animObj = (0, _dependencyManager.getDep)(\"redraphael\", \"plugin\").animation({\n      x: 0\n    }, animationDuration, animType, animationManager._animCallBack, true);\n    animation.animType = animType;\n\n    if (!(dummyObj = graphics.dummyObj)) {\n      dummyObj = paper.rect({\n        x: 100,\n        y: 0,\n        width: 10,\n        height: 30\n      });\n      animationManager.addGraphicalElement(\"dummyObj\", dummyObj);\n      dummyObj.hide();\n    } else {\n      dummyObj.attr({\n        x: 100\n      });\n    }\n\n    animation.dummyObj = graphics.dummyObj;\n    dummyObj.stop(UNDEF, true, true);\n    animationManager.fireEvent(\"animationStart\", {\n      duration: animationDuration\n    });\n    animationManager.setState(\"chartAnimating\", true);\n    dummyObj.animate(animObj);\n  };\n\n  _proto.setAnimationState = function setAnimationState(state) {\n    if (state === void 0) {\n      state = UNDEF;\n    }\n\n    if (state) {\n      this.stopAnimation();\n    }\n\n    this.config.__state = state;\n\n    this._setAnimDuration(state);\n  };\n\n  _proto.getAnimationState = function getAnimationState() {\n    return this.config && this.config.__state;\n  };\n\n  _proto._setAnimDuration = function _setAnimDuration(state) {\n    if (state === void 0) {\n      state = DEFAULT;\n    }\n\n    var animationManager = this,\n        config = animationManager.config,\n        animationObj = config.animationObj || (config.animationObj = {}),\n        animationDuration = config.animationDuration || (config.animationDuration = {}),\n        chartAttrs = animationManager.getFromEnv(CHART).getFromEnv(\"chart-attrib\") || {},\n        currStateAnimDurationAttr = state + \"AnimDuration\",\n        killSwitch = config.killSwitch,\n        currStateAnimDuration = killSwitch ? 0 : (animationDuration[currStateAnimDurationAttr] || chartAttrs[currStateAnimDurationAttr.toLowerCase()] || AnimationManager.getFallbackAnimDuration(state)) * 1e3;\n\n    if (animationObj) {\n      animationObj[currStateAnimDurationAttr] = currStateAnimDuration;\n      animationObj.duration = +currStateAnimDuration;\n    }\n  };\n\n  _proto.configureAttributes = function configureAttributes() {\n    var animationManager = this,\n        chart = animationManager.getFromEnv(CHART),\n        chartConfig = chart.config,\n        animationManagerConfig = animationManager.config,\n        chartAttrs = chart.getFromEnv(\"chart-attrib\") || {};\n    animationManagerConfig.killSwitch = !(0, _lib.pluckNumber)(chartAttrs.animation, chartConfig.animation, 1);\n    animationManagerConfig.animationeffect = chartConfig.animationeffect || \"linear\";\n    animationManager.invokeAnimationRules();\n    !animationManagerConfig.workingRules && (animationManagerConfig.workingRules = {});\n    !animationManagerConfig.animateArr && (animationManagerConfig.animateArr = []);\n    !animationManagerConfig.animationName && (animationManagerConfig.animationName = []);\n  };\n\n  _proto.invokeAnimationRules = function invokeAnimationRules() {\n    var animationManager = this,\n        chart = animationManager.getFromEnv(CHART),\n        chartAttrs = chart.getFromEnv(\"chart-attrib\") || {},\n        chartConfig = chart.config || {},\n        config = animationManager.config,\n        chartInstance = chart.getFromEnv(\"chartInstance\"),\n        chartAnimRule = chartInstance.args.animation,\n        globalTheme = chart.getFromEnv(\"core-options\").defaultTheme,\n        themes = getRegisteredThemes((0, _dependencyManager.getDepsByType)(\"theme\")),\n        global = (chart.getFromEnv(\"core-options\")._globalAnimationRule || []).concat(fetchRulesFromTheme(themes, globalTheme)),\n        chartSpecific = (chartAnimRule && [chartAnimRule] || []).concat(fetchRulesFromTheme(themes, chartConfig.theme)),\n        animationDuration;\n    config.animationRules = {\n      global: ruleReducer(global.map(function (v) {\n        return v && v.rule;\n      }).filter(function (v) {\n        return v;\n      })),\n      chartSpecific: ruleReducer(chartSpecific.map(function (v) {\n        return v && v.rule;\n      }).filter(function (v) {\n        return v;\n      })),\n      default: ruleReducer((0, _dependencyManager.getDepsByType)(\"animationRule\"))\n    };\n    config.animationDuration = animationDuration = {};\n    global.map(function (v) {\n      return Object.assign(animationDuration, v.duration);\n    });\n    chartSpecific.map(function (v) {\n      return Object.assign(animationDuration, v.duration);\n    });\n    animationDuration.initialAnimDuration = (0, _lib.pluckNumber)(animationDuration.initialAnimDuration, chartAttrs.initialanimduration, chartAttrs.animationduration);\n    animationManager.config.slots = AnimationManager.getFallbackAnimTimeSlots().concat([].concat.apply([], global.map(function (v) {\n      return v.slots;\n    })).filter(function (v) {\n      return v;\n    })).concat([].concat.apply([], chartSpecific.map(function (v) {\n      return v.slots;\n    })).filter(function (v) {\n      return v;\n    }));\n  };\n\n  _proto.reInitialize = function reInitialize() {\n    var animationManager = this,\n        config = animationManager.config,\n        animationObj = config.animationObj,\n        duration = animationObj.duration;\n    animationManager.setState(\"initialized\", true);\n\n    if (duration) {\n      animationManager.addJob(\"start-animation\", animationManager.startAnimation, _schedular.priorityList.animation);\n    } else {\n      animationManager.fireEvent(\"animationStart\", {\n        duration: duration\n      });\n      animationManager.setState(\"chartAnimating\", true);\n      animationManager.addJob(\"anim-callBack\", animationManager._animCallBack, _schedular.priorityList.animation);\n    }\n  };\n\n  _proto.reset = function reset() {\n    var animationManager = this;\n    animationManager.setState(\"initialized\", false);\n    animationManager.config && animationManager.config.animateArr && (animationManager.config.animateArr.length = 0);\n    animationManager.setState(\"chartAnimating\", false);\n    animationManager.setAnimationState();\n  };\n\n  _proto.registerAnimObj = function registerAnimObj(ob) {\n    var key;\n\n    for (key in ob) {\n      this.registerAnimation(ob[key], key);\n    }\n  };\n\n  _proto.getFinalSlots = function getFinalSlots() {\n    var animationManager = this,\n        animationManagerConfig = animationManager.config,\n        appliedRules = animationManagerConfig.slots,\n        workingRules = animationManagerConfig.workingRules = {},\n        animationName = animationManagerConfig.animationName;\n    hasAnimation(appliedRules, animationName);\n    buildWorkingRule(appliedRules, 0, 1, workingRules);\n    workingRules[\"default\"] = {\n      start: 0,\n      end: 1\n    };\n    return workingRules;\n  };\n\n  _proto.registerOne = function registerOne(ob, key) {\n    this.registerAnimation([{\n      data: [ob]\n    }], key);\n  };\n\n  _proto.registerAnimation = function registerAnimation(attrObj, component) {\n    if (attrObj === void 0) {\n      attrObj = [];\n    }\n\n    var i,\n        hasData = false,\n        attrObjItem,\n        ln;\n\n    for (i = 0, ln = attrObj.length; i < ln; i += 1) {\n      attrObjItem = attrObj[i];\n\n      if (attrObjItem.data && attrObjItem.data.length) {\n        this.config.animateArr.push((attrObjItem.component = component, attrObjItem));\n        hasData = true;\n      }\n    }\n\n    hasData && this.config.animationName.push(component);\n    !this.getState(\"initialized\") && this.reInitialize();\n  };\n\n  _proto.onAnimationComplete = function onAnimationComplete(callback) {\n    var animationManager = this;\n    animationManager.addEventListener(\"animationComplete\", function (e) {\n      callback();\n      e.detachHandler();\n    });\n  };\n\n  AnimationManager.removeOpacityFromGroup = function removeOpacityFromGroup(el, attr) {\n    if (attr && isIE8 && (el === GROUP || el.type === GROUP)) {\n      delete attr.opacity;\n    }\n  };\n\n  _proto.setAnimation = function setAnimation(inputJSON) {\n    if (inputJSON === void 0) {\n      inputJSON = {};\n    }\n\n    var animationManager = this,\n        config = animationManager.config,\n        animationObj = config.animationObj,\n        element = inputJSON.el,\n        componentFinalAttr = inputJSON.attr || {},\n        finalAttr,\n        actualFinalAttr = {},\n        actualInitialAttr = {},\n        initialAttr,\n        currAttr,\n        attr,\n        callBackFn = function callBackFn(_attr, isLastSlot, animatableAttrs, container) {\n      return function () {\n        animatableAttrs.callback && animatableAttrs.callback.call(this);\n        _attr && this.attr(_attr);\n        isLastSlot && inputJSON.callback && inputJSON.callback.call(this);\n        container && this.appendTo(container);\n      };\n    },\n        hookFn = function hookFn(_attr, animatableAttrs, container) {\n      return function () {\n        animatableAttrs.hookFn && animatableAttrs.hookFn.call(this);\n        _attr && this.attr(_attr);\n        container && this.appendTo(container);\n      };\n    },\n        data = [],\n        datum,\n        applyAnimation = animationObj.duration,\n        i,\n        changedAttr,\n        length,\n        allAnimatableAttrs,\n        createInitalAttr,\n        elemOwnAttr,\n        isLastSlot,\n        animatableAttrs,\n        slotGroupChange,\n        animating = animationManager.getState(\"chartAnimating\"),\n        groupChangeReq = typeof element === OBJECT && inputJSON.container && element.parent !== inputJSON.container;\n\n    animationManager.getState(\"chartAnimating\") && config.animationObj && config.animationObj.duration && animationManager.setAnimationState(\"default\");\n\n    if (!animating && applyAnimation && (allAnimatableAttrs = animationManager.getAnimAttributes(inputJSON))) {\n      length = allAnimatableAttrs.length;\n      slotGroupChange = false;\n      createInitalAttr = inputJSON.state === APPEARING || typeof element === STRING;\n      elemOwnAttr = !createInitalAttr && element.attrs;\n      changedAttr = {};\n\n      for (i = 0; i < length; i++) {\n        isLastSlot = i === length - 1;\n        datum = data[i] = {};\n        animatableAttrs = allAnimatableAttrs[i];\n        finalAttr = animatableAttrs.finalAttr;\n        initialAttr = animatableAttrs.initialAttr;\n        AnimationManager.removeOpacityFromGroup(inputJSON.el, initialAttr);\n        AnimationManager.removeOpacityFromGroup(inputJSON.el, finalAttr);\n\n        for (attr in initialAttr) {\n          changedAttr[attr] = initialAttr[attr];\n\n          if (actualInitialAttr[attr] === UNDEF) {\n            actualInitialAttr[attr] = initialAttr[attr];\n          }\n        }\n\n        for (attr in finalAttr) {\n          changedAttr[attr] = finalAttr[attr];\n\n          if (createInitalAttr && actualInitialAttr[attr] === UNDEF) {\n            actualInitialAttr[attr] = finalAttr[attr];\n          }\n        }\n\n        datum.attrs = finalAttr;\n        datum.transition = animatableAttrs.transition;\n        datum.effect = animatableAttrs.effect;\n        datum.animConfig = [animatableAttrs.startEnd];\n        animatableAttrs.callback && (datum.callback = animatableAttrs.callback);\n\n        if (slotGroupChange = groupChangeReq && animatableAttrs.changeGroup) {\n          groupChangeReq = false;\n        }\n\n        if (isLastSlot) {\n          if (createInitalAttr) {\n            for (attr in componentFinalAttr) {\n              if (actualInitialAttr[attr] === UNDEF) {\n                actualInitialAttr[attr] = componentFinalAttr[attr];\n              }\n            }\n          }\n\n          for (attr in componentFinalAttr) {\n            currAttr = componentFinalAttr[attr];\n\n            if ((changedAttr[attr] || !createInitalAttr) && changedAttr[attr] !== currAttr) {\n              if (finalAttr && finalAttr[attr] === UNDEF) {\n                finalAttr[attr] = currAttr;\n              } else {\n                actualFinalAttr[attr] = currAttr;\n              }\n            }\n          }\n\n          for (attr in changedAttr) {\n            if (actualFinalAttr[attr] === UNDEF) {\n              currAttr = (0, _lib.getFirstValue)(componentFinalAttr[attr], elemOwnAttr[attr]);\n\n              if (changedAttr[attr] !== currAttr) {\n                if (finalAttr && finalAttr[attr] === UNDEF && currAttr !== UNDEF) {\n                  finalAttr[attr] = currAttr;\n                } else {\n                  actualFinalAttr[attr] = currAttr;\n                }\n              }\n            }\n          }\n\n          if (!finalAttr) {\n            datum.attrs = actualFinalAttr;\n          }\n\n          datum.callback = callBackFn((finalAttr || initialAttr) && actualFinalAttr, isLastSlot, animatableAttrs, groupChangeReq && inputJSON.container);\n          element = animationManager.setAttributes(element, {\n            attr: actualInitialAttr,\n            inputJSON: inputJSON\n          });\n        }\n\n        if (initialAttr || animatableAttrs.hookFn || slotGroupChange) {\n          datum.animConfig[0].hookFn = hookFn((!createInitalAttr || i) && initialAttr, animatableAttrs, slotGroupChange && inputJSON.container);\n        }\n      }\n\n      for (i = 0; i < length; i++) {\n        data[i].el = element.el;\n        animationManager.registerAnimation([{\n          data: [data[i]]\n        }], allAnimatableAttrs[i].slot);\n      }\n    } else if (!animating) {\n      animationManager.registerAnimation();\n      element = animationManager.setAttributes(element, {\n        attr: componentFinalAttr,\n        inputJSON: inputJSON,\n        groupChangeReq: groupChangeReq,\n        immediate: true\n      });\n    } else {\n      element = animationManager.setAttributes(element, {\n        attr: componentFinalAttr,\n        inputJSON: inputJSON,\n        groupChangeReq: groupChangeReq,\n        immediate: true\n      });\n    }\n\n    return element.removed ? null : element.el;\n  };\n\n  _proto._removeElems = function _removeElems() {\n    if (!this.getFromEnv(PAPER) || this.getFromEnv(PAPER).removed) {\n      return;\n    }\n\n    var component = this;\n\n    component._removedGraphics.forEach(function (v) {\n      return v.remove && v.remove();\n    });\n\n    component._removedGraphics.length = 0;\n  };\n\n  _proto.removeElement = function removeElement(el, immediate) {\n    var animationManager = this;\n\n    if (immediate) {\n      el.remove();\n    } else {\n      animationManager._removedGraphics.push(el);\n    }\n\n    return null;\n  };\n\n  AnimationManager._ruleSelectorQueryBuilder = function _ruleSelectorQueryBuilder(info, isForState) {\n    if (isForState === void 0) {\n      isForState = true;\n    }\n\n    var label = info.label,\n        state = info.state,\n        component = info.component,\n        componentType = component.getType(),\n        componentName = component.getName();\n\n    if (isForState) {\n      var dummy = [\"*\", \"*.*\", \"*.*.*\"],\n          wildchar = [\"*.*.\" + componentName, \"*.\" + componentType + \".*\", \"*.\" + componentType + \".\" + componentName];\n\n      if (state === \"*\") {\n        return dummy.concat(wildchar);\n      }\n\n      return dummy.concat(wildchar, [state + \".*\", state + \".*.*\", state + \".*.\" + componentName, state + \".\" + componentType + \".*\", state + \".\" + componentType + \".\" + componentName]);\n    }\n\n    return [label + \".\" + state, label + \".*\", \"*.\" + state, \"*.*\", \"*\"];\n  };\n\n  _proto._getRulesByState = function _getRulesByState(info) {\n    var animationManager = this,\n        component = info.component,\n        selectedRule,\n        stateSpecRule,\n        rules,\n        animRulesForComp,\n        state = animationManager.getAnimationState() || STARSTRING,\n        ruleSelectors = AnimationManager._ruleSelectorQueryBuilder(Object.assign(info, {\n      state: state\n    }));\n\n    animRulesForComp = component.getState(\"animRules\") || {};\n\n    if (!(selectedRule = animRulesForComp[state])) {\n      stateSpecRule = animRulesForComp[state] = {};\n      rules = animationManager.config.animationRules;\n      rulePriorityList.forEach(function (ruleType) {\n        var rule = rules[ruleType];\n        rule && ruleSelectors.forEach(function (v) {\n          if (rule[v]) {\n            if (Array.isArray(rule[v])) {\n              rule[v].forEach(function (prop) {\n                stateSpecRule = animRulesForComp[state] = isNull(prop) ? null : Object.assign(stateSpecRule || {}, isFunction(prop) ? prop.call(component) : prop);\n              });\n            } else {\n              stateSpecRule = animRulesForComp[state] = isNull(rule[v]) ? null : Object.assign(stateSpecRule || {}, isFunction(rule[v]) ? rule[v].call(component) : rule[v]);\n            }\n          }\n        });\n      });\n      component.setState(\"animRules\", animRulesForComp);\n      !component.getState(\"ruleFlushAttached\") && component.addExtEventListener(\"predraw\", function () {\n        component.setState(\"animRules\", UNDEF);\n        component.setState(\"ruleFlushAttached\", true);\n      }, component.getFromEnv(CHART));\n      return stateSpecRule;\n    }\n\n    return selectedRule;\n  };\n\n  AnimationManager._getRulesByElement = function _getRulesByElement(rules, info) {\n    var selectedRule,\n        ruleSelectors = AnimationManager._ruleSelectorQueryBuilder(info, false);\n\n    ruleSelectors.forEach(function (v) {\n      if (selectedRule === UNDEF) {\n        selectedRule = rules[v];\n      }\n    });\n    return selectedRule;\n  };\n\n  _proto.getAnimAttributes = function getAnimAttributes(inputJSON) {\n    var animationManager = this,\n        component = inputJSON.component || animationManager.getFromEnv(CHART),\n        label = inputJSON.label || (typeof inputJSON.el === \"object\" ? inputJSON.el.type : inputJSON.el),\n        state = inputJSON.state,\n        componentRules = animationManager._getRulesByState({\n      label: label,\n      component: component\n    }),\n        rules,\n        currentRule,\n        returnObj = [],\n        currentReturnObj,\n        i,\n        len;\n\n    if (isNull(componentRules)) {\n      return;\n    }\n\n    !state && (state = typeof inputJSON.el === STRING ? APPEARING : inputJSON.attr ? UPDATING : DISAPPEARING);\n    rules = AnimationManager._getRulesByElement(componentRules, {\n      component: component,\n      state: state,\n      label: label\n    });\n\n    if (isNull(rules)) {\n      return;\n    }\n\n    if (!rules) {\n      return AnimationManager.getFallbackAnimRule(inputJSON);\n    }\n\n    if (isFunction(rules)) {\n      rules = rules.call(component, inputJSON);\n\n      if (isNull(rules)) {\n        return;\n      }\n    }\n\n    len = rules.length;\n\n    for (i = 0; i < len; i++) {\n      currentRule = rules[i];\n      currentReturnObj = {};\n      currentRule.initialAttr && (currentReturnObj.initialAttr = isFunction(currentRule.initialAttr) ? currentRule.initialAttr.call(component, inputJSON) : Object.assign({}, currentRule.initialAttr));\n      currentRule.finalAttr && (currentReturnObj.finalAttr = isFunction(currentRule.finalAttr) ? currentRule.finalAttr.call(component, inputJSON) : Object.assign({}, currentRule.finalAttr));\n      currentReturnObj.startEnd = isFunction(currentRule.startEnd) ? currentRule.startEnd.call(component, inputJSON) : currentRule.startEnd ? Object.assign({}, currentRule.startEnd) : {\n        start: 0,\n        end: 1\n      };\n      currentReturnObj.slot = currentRule.slot || \"default\";\n      currentReturnObj.callback = currentRule.callback;\n      currentReturnObj.hookFn = currentRule.hookFn;\n      currentReturnObj.transition = currentRule.transition;\n      currentReturnObj.effect = currentRule.effect || \"linear\";\n      currentRule.groupChange && (currentReturnObj.groupChange = true);\n      returnObj.push(currentReturnObj);\n    }\n\n    return returnObj;\n  };\n\n  AnimationManager.getFallbackAnimRule = function getFallbackAnimRule(inputJSON) {\n    if (inputJSON.state === APPEARING || typeof inputJSON.el === STRING) {\n      if (inputJSON.el !== GROUP) {\n        return [{\n          initialAttr: {\n            opacity: 0\n          },\n          finalAttr: {\n            opacity: (0, _lib.pluckNumber)(inputJSON.attr && inputJSON.attr.opacity, 1)\n          },\n          startEnd: {\n            start: 0,\n            end: 1\n          }\n        }];\n      }\n    } else {\n      if (inputJSON.state === UPDATING || inputJSON.attr) {\n        return [{\n          startEnd: {\n            start: 0,\n            end: 1\n          }\n        }];\n      }\n\n      if (inputJSON.el.type !== GROUP) {\n        return [{\n          initialAttr: {\n            opacity: 1\n          },\n          finalAttr: {\n            opacity: 0\n          },\n          startEnd: {\n            start: 0,\n            end: 1\n          }\n        }];\n      }\n    }\n  };\n\n  AnimationManager.getFallbackAnimDuration = function getFallbackAnimDuration(state) {\n    return durationList[state] || 0;\n  };\n\n  AnimationManager.getFallbackAnimTimeSlots = function getFallbackAnimTimeSlots() {\n    return [{\n      name: \"_default\",\n      start: 0,\n      end: 1,\n      child: [[{\n        name: \"initial\",\n        duration: .125\n      }, {\n        name: \"middle\",\n        duration: .75,\n        child: [[{\n          name: \"axis\",\n          duration: .25\n        }, {\n          name: \"plot\",\n          duration: .75\n        }]]\n      }, {\n        name: \"final\",\n        duration: .125\n      }]]\n    }];\n  };\n\n  _proto.createElement = function createElement(_element, attr, inputJSON) {\n    if (attr === void 0) {\n      attr = {};\n    }\n\n    var animationManager = this,\n        element = _element,\n        paper = animationManager.getFromEnv(PAPER);\n\n    if (!paper) {\n      paper = animationManager.getFromEnv(CHART).getFromEnv(PAPER);\n      animationManager.addToEnv(PAPER, paper);\n    }\n\n    if (element === GROUP) {\n      element = paper.group(inputJSON.attr && inputJSON.attr.name || \"\", inputJSON.container);\n      element.attr(attr);\n    } else if (element === HTML) {\n      element = paper.html(inputJSON.attr.type, attr, inputJSON.css, inputJSON.container);\n    } else {\n      if (element === TEXT && inputJSON.css) {\n        return paper[inputJSON.el](attr, inputJSON.css, inputJSON.container);\n      }\n\n      element = paper[inputJSON.el](attr, inputJSON.container);\n    }\n\n    return element;\n  };\n\n  _proto.setAttributes = function setAttributes(_element, props) {\n    var animationManager = this,\n        element = _element,\n        attr = props.attr,\n        inputJSON = props.inputJSON || {},\n        removeEl;\n\n    if (typeof element === \"string\") {\n      element = animationManager.createElement(element, attr, inputJSON);\n    } else if (Object.keys(attr).length !== 0) {\n      element.attr(attr);\n    } else if (!inputJSON.attr || inputJSON.state === DISAPPEARING) {\n      removeEl = !inputJSON.doNotRemove;\n    }\n\n    if (!removeEl) {\n      inputJSON.css && element.css(inputJSON.css);\n      props.groupChangeReq && element.appendTo(inputJSON.container);\n      props.immediate && inputJSON.callback && inputJSON.callback.call(element);\n    } else {\n      animationManager.removeElement(element, props.immediate);\n    }\n\n    return {\n      el: element,\n      removed: removeEl\n    };\n  };\n\n  _proto.prepareAnimateArr = function prepareAnimateArr(animateArr) {\n    var thisAnimateObj,\n        rules,\n        component,\n        i,\n        ln,\n        j,\n        jj,\n        transition,\n        animEl,\n        preAnimArr = this.config.preAnimArr = [];\n    rules = this.getFinalSlots();\n\n    function manageStartEnd(obj, _component) {\n      var refComponent,\n          diff,\n          retObj = {\n        start: 0,\n        end: 1\n      },\n          key;\n\n      for (key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          if (obj[key].syncWith && !rules[obj[key].syncWith]) {\n            continue;\n          }\n\n          refComponent = obj[key].syncWith;\n          retObj.start = obj[key].start === UNDEF ? 0 : obj[key].start;\n          retObj.end = obj[key].end === UNDEF ? 1 : obj[key].end;\n          retObj.hookFn = obj[key].hookFn || obj.hookFn;\n          retObj.smartMorph = obj[key].smartMorph || obj.smartMorph;\n          break;\n        }\n      }\n\n      refComponent = refComponent && rules[refComponent] ? refComponent : _component && rules[_component] ? _component : \"default\";\n      diff = rules[refComponent].end - rules[refComponent].start;\n      retObj.start = rules[refComponent].start + retObj.start * diff;\n      retObj.end = rules[refComponent].start + retObj.end * diff;\n      return retObj;\n    }\n\n    for (i = 0, ln = animateArr.length; i < ln; i += 1) {\n      thisAnimateObj = animateArr[i];\n      component = thisAnimateObj.component;\n\n      for (j = 0, jj = thisAnimateObj.data.length; j < jj; j += 1) {\n        animEl = thisAnimateObj.data[j];\n        transition = animEl.transition || rules[component] && rules[component].transition;\n\n        if (transition) {\n          applyType(animEl, transition);\n        }\n\n        if (animEl.preAnimFn) {\n          preAnimArr.push({\n            el: animEl.el,\n            fn: animEl.preAnimFn\n          });\n        }\n\n        animEl.animConfig && (animEl.animConfig = manageStartEnd(animEl.animConfig, component));\n      }\n\n      thisAnimateObj.effect || rules[component] && (thisAnimateObj.effect = rules[component].effect);\n      thisAnimateObj.animConfig || (thisAnimateObj.animConfig = [{}]);\n      thisAnimateObj.animConfig = manageStartEnd(thisAnimateObj.animConfig, component);\n    }\n  };\n\n  _proto.animate = function animate() {\n    var animationManager = this,\n        config = animationManager.config,\n        animateArr = animationManager.config.animateArr,\n        animationObj = config.animationObj,\n        animObj = animationObj.animObj,\n        dummyObj = animationObj.dummyObj,\n        animationDuration = animationObj.duration,\n        effect,\n        shiftTime = 180,\n        thisAnimateObj,\n        animConfig,\n        callback,\n        i,\n        ln,\n        j,\n        jj;\n    animationManager.prepareAnimateArr(animateArr);\n    execPreAnimFns(animationManager.config.preAnimArr);\n\n    for (i = 0, ln = animateArr.length; i < ln; i += 1) {\n      thisAnimateObj = animateArr[i];\n\n      for (j = 0, jj = thisAnimateObj.data.length - 1; j <= jj; j += 1) {\n        animConfig = thisAnimateObj.data[j].animConfig || thisAnimateObj.animConfig;\n        animConfig = shiftAnimTime(animConfig, animationDuration, shiftTime);\n        effect = thisAnimateObj.data[j].effect || thisAnimateObj.effect || LINEAR;\n        callback = i === ln ? thisAnimateObj.callback || thisAnimateObj.data[j].callback : thisAnimateObj.data[j].callback;\n        thisAnimateObj.data[j].preAttrs && thisAnimateObj.data[j].el.attr(thisAnimateObj.data[j].preAttrs);\n        thisAnimateObj.data[j].el && animateEl(thisAnimateObj.data[j].el, thisAnimateObj.data[j].attrs, callback || null, animConfig, dummyObj, animObj, animationDuration, effect);\n      }\n    }\n  };\n\n  _proto.remove = function remove(option) {\n    this.removeAllJobs();\n\n    if (option.instant) {\n      this.getGraphicalElement(\"dummyObj\") && this.getGraphicalElement(\"dummyObj\").remove();\n    }\n\n    _ComponentInterface.prototype.remove.call(this, option);\n  };\n\n  return AnimationManager;\n}(_componentInterface.ComponentInterface);\n\nvar _default = AnimationManager;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/core/src/animation-manager/index.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_assertThisInitialized2","_inheritsLoose2","_lib","_schedular","_componentInterface","_dependencyManager","UNDEF","isIE8","hasSVG","OBJECT","CHART","GROUP","HTML","TEXT","PAPER","DISAPPEARING","APPEARING","STRING","UPDATING","FUNCTION","LINEAR","CHARTSPECIFIC","GLOBAL","DEFAULT","HYPHEN_STR","STARSTRING","durationList","initial","update","realTimeUpdate","resize","dispose","legendInteraction","scroll","mouseOut","mouseOver","slicing","timenavSqueeze","selectedRange","timenavScroll","rulePriorityList","animMap","fadeIn","opacity","start","end","fadeOut","callbackMap","show","hide","isNull","v","getRegisteredThemes","addedThemes","themes","theme","key","hasOwnProperty","name","fetchRulesFromTheme","themeList","themeArr","split","rules","forEach","animation","push","shiftAnimTime","paramsConfig","duration","shiftTime","config","Object","assign","shiftRatio","MAX_SHIFT","diff","Math","round","_applyAnim","ob","type","applyCallback","attrs","BLANKSTRING","origCallback","origAttr","el","attr","callback","call","applyType","_type","i","delimeter","indexOf","length","animateEl","animConfig","dummyObj","animObj","animationDuration","effect","animateWith","execPreAnimFns","arr","ii","fn","ruleReducer","animations","definition","animDef","merge","source","sink","def","isFunction","arg","hasAnimation","animationName","retBool","objBool","j","jj","Array","isArray","child","buildDynamicRules","workingRules","addTime","addTimeCounter","s","durationSum","e","collapsible","transition","buildWorkingRule","buildStaticRules","obj","len","arrItem","fadein","fadeout","AnimationManager","_ComponentInterface","_proto","prototype","getType","_this","animationManager","_removedGraphics","_animCallBack","getState","removed","currAnimState","getAnimationState","_removeElems","reset","fireEvent","startAnimation","kickStart","animate","getName","stopAnimation","animationObj","getGraphicalElement","stop","removeJob","graphics","paper","getFromEnv","animType","animationeffect","getDep","x","rect","y","width","height","addGraphicalElement","setState","setAnimationState","state","__state","_setAnimDuration","chartAttrs","currStateAnimDurationAttr","killSwitch","currStateAnimDuration","toLowerCase","getFallbackAnimDuration","configureAttributes","chart","chartConfig","animationManagerConfig","pluckNumber","invokeAnimationRules","animateArr","chartInstance","chartAnimRule","args","globalTheme","defaultTheme","getDepsByType","global","_globalAnimationRule","concat","chartSpecific","animationRules","map","rule","filter","initialAnimDuration","initialanimduration","animationduration","slots","getFallbackAnimTimeSlots","apply","reInitialize","addJob","priorityList","registerAnimObj","registerAnimation","getFinalSlots","appliedRules","registerOne","data","attrObj","component","hasData","attrObjItem","ln","onAnimationComplete","addEventListener","detachHandler","removeOpacityFromGroup","setAnimation","inputJSON","element","componentFinalAttr","finalAttr","actualFinalAttr","actualInitialAttr","initialAttr","currAttr","callBackFn","_attr","isLastSlot","animatableAttrs","container","appendTo","hookFn","datum","applyAnimation","changedAttr","allAnimatableAttrs","createInitalAttr","elemOwnAttr","slotGroupChange","animating","groupChangeReq","parent","getAnimAttributes","startEnd","changeGroup","getFirstValue","setAttributes","slot","immediate","remove","removeElement","_ruleSelectorQueryBuilder","info","isForState","label","componentType","componentName","dummy","wildchar","_getRulesByState","selectedRule","stateSpecRule","animRulesForComp","ruleSelectors","ruleType","prop","addExtEventListener","_getRulesByElement","componentRules","currentRule","returnObj","currentReturnObj","getFallbackAnimRule","groupChange","createElement","_element","addToEnv","group","html","css","props","removeEl","keys","doNotRemove","prepareAnimateArr","thisAnimateObj","animEl","preAnimArr","manageStartEnd","_component","refComponent","retObj","syncWith","smartMorph","preAnimFn","preAttrs","option","removeAllJobs","instant","ComponentInterface","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _lib=require(\"../lib\");var _schedular=require(\"../schedular\");var _componentInterface=require(\"../component-interface\");var _dependencyManager=require(\"../dependency-manager\");var UNDEF;var isIE8=!_lib.hasSVG,OBJECT=\"object\",CHART=\"chart\",GROUP=\"group\",HTML=\"html\",TEXT=\"text\",PAPER=\"paper\",DISAPPEARING=\"disappearing\",APPEARING=\"appearing\",STRING=\"string\",UPDATING=\"updating\",FUNCTION=\"function\",LINEAR=\"linear\",CHARTSPECIFIC=\"chartSpecific\",GLOBAL=\"global\",DEFAULT=\"default\",HYPHEN_STR=\"-\",STARSTRING=\"*\",durationList={initial:1,update:0,realTimeUpdate:0,resize:0,dispose:0,legendInteraction:0,scroll:0,mouseOut:0,mouseOver:0,default:0,slicing:.25,timenavSqueeze:0,selectedRange:0,timenavScroll:0},rulePriorityList=[DEFAULT,GLOBAL,CHARTSPECIFIC],animMap={fadeIn:{opacity:{start:0,end:1}},fadeOut:{opacity:{start:1,end:0}}},callbackMap={fadeIn:function fadeIn(){this&&this.show()},fadeOut:function fadeOut(){this&&this.hide()}},isNull=function isNull(v){return v===null},getRegisteredThemes=function getRegisteredThemes(addedThemes){var themes={},theme;for(var key in addedThemes){if(addedThemes.hasOwnProperty(key)){theme=addedThemes[key];themes[theme.name]=theme}}return themes},fetchRulesFromTheme=function fetchRulesFromTheme(themes,themeList){if(themeList===void 0){themeList=\"\"}var themeArr=themeList.split(\",\"),rules=[];themeArr.forEach((function(v){if(themes[v]&&themes[v].animation){rules.push(themes[v].animation)}}));return rules},shiftAnimTime=function shiftAnimTime(paramsConfig,duration,shiftTime){var config=Object.assign({},paramsConfig),shiftRatio=shiftTime/duration,MAX_SHIFT=.2,diff;if(shiftRatio>MAX_SHIFT){shiftRatio=MAX_SHIFT}diff=config.end-config.start;config.start*=1-shiftRatio;config.start+=shiftRatio;config.end=config.start+(1-shiftRatio)*diff;config.start=Math.round(config.start*100)/100;config.end=Math.round(config.end*100)/100;return config},_applyAnim=function _applyAnim(ob,type,applyCallback){var attrs=animMap[type],key=_lib.BLANKSTRING,origCallback,origAttr={};if(!attrs||!ob||!ob.el||!ob.el[0]){return}for(key in attrs){origAttr[key]=ob.el.attrs[key];if(origAttr[key]===UNDEF){origAttr[key]=null}ob.attrs[key]=attrs[key].end;ob.el.attr(key,attrs[key].start)}origCallback=ob.callback;ob.callback=function callback(){applyCallback&&callbackMap[type]&&callbackMap[type].call(this);origCallback&&origCallback.call&&origCallback.call(this);this.attr(origAttr)}},applyType=function applyType(ob,_type){var i,type=_type,delimeter=HYPHEN_STR,applyCallback=true;if(!type){return}ob.attrs=ob.attrs||{};type=type.split(delimeter);if(~type.indexOf(\"nc\")){applyCallback=false}for(i=type.length;i--;){_applyAnim(ob,type[i],applyCallback)}return ob},animateEl=function animateEl(el,attrs,callback,animConfig,dummyObj,animObj,animationDuration,effect){el.animateWith(dummyObj,animObj,attrs,animationDuration,effect,callback,animConfig)},execPreAnimFns=function execPreAnimFns(arr){var i=0,ii=arr.length;for(i=0;i<ii;++i){arr[i].fn&&arr[i].fn.call(arr[i].el)}},ruleReducer=function ruleReducer(animations){var ob={};for(var definition in animations){if(animations.hasOwnProperty(definition)&&definition!==\"__esModule\"){var animDef=animations[definition];merge(ob,animDef)}}return ob},merge=function merge(source,sink){for(var def in sink){if(sink.hasOwnProperty(def)){!source[def]&&(source[def]=[]);source[def].push(sink[def])}}},isFunction=function isFunction(arg){return typeof arg===FUNCTION};function hasAnimation(arr,animationName){var retBool=false,objBool,animObj,i,ii,j,jj;if(!arr){return false}for(i=0,ii=arr.length;i<ii;i+=1){animObj=arr[i];if(!Array.isArray(animObj)){objBool=false;if(animationName.indexOf(animObj.name)!==-1){objBool=true}else if(animObj.child){objBool=animObj.hasAnimation=hasAnimation(animObj.child,animationName)}retBool=retBool||objBool;animObj.hasAnimation=objBool}else{for(j=0,jj=arr[i].length;j<jj;j+=1){animObj=arr[i][j];objBool=false;if(animationName.indexOf(animObj.name)!==-1){objBool=true}else if(animObj.child){objBool=animObj.hasAnimation=hasAnimation(animObj.child,animationName)}retBool=retBool||objBool;animObj.hasAnimation=objBool}}}return retBool}function buildDynamicRules(arr,start,end,workingRules){var animObj,addTime,addTimeCounter,diff,i,ii=arr.length,s=0,durationSum=0,e=start;addTime=0;addTimeCounter=0;for(i=0;i<ii;i+=1){animObj=arr[i];if(!animObj.hasAnimation&&animObj.collapsible!==false){addTime+=animObj.duration}else{addTimeCounter+=1}durationSum+=animObj.duration}addTime/=addTimeCounter;for(i=0;i<ii;i+=1){animObj=arr[i];if(!animObj.hasAnimation){continue}s=e;diff=end-start;e=s+(animObj.duration/durationSum+addTime)*diff;workingRules[animObj.name]={start:s,end:e,effect:animObj.effect,transition:animObj.transition};animObj.child&&buildWorkingRule(animObj.child,s,e,workingRules)}}function buildStaticRules(obj,start,end,workingRules){var diff,s,e;s=obj.start;e=obj.end;diff=end-start;s=start+s*diff;e=start+e*diff;workingRules[obj.name]={start:s,end:e,effect:obj.effect,transition:obj.transition};obj.child&&buildWorkingRule(obj.child,s,e,workingRules)}function buildWorkingRule(arr,start,end,workingRules){var len=arr.length,i,arrItem;for(i=0;i<len;i++){arrItem=arr[i];Array.isArray(arrItem)?buildDynamicRules(arrItem,start,end,workingRules):buildStaticRules(arrItem,start,end,workingRules)}}animMap.fadein=animMap.fadeIn;animMap.fadeout=animMap.fadeOut;var AnimationManager=function(_ComponentInterface){(0,_inheritsLoose2.default)(AnimationManager,_ComponentInterface);var _proto=AnimationManager.prototype;_proto.getType=function getType(){return\"animationManager\"};function AnimationManager(){var _this;_this=_ComponentInterface.call(this)||this;var animationManager=(0,_assertThisInitialized2.default)(_this);animationManager._removedGraphics=[];animationManager._animCallBack=function(){if(!animationManager.getState(\"removed\")&&!this.removed){var currAnimState=animationManager.getAnimationState();animationManager._removeElems();animationManager.reset();animationManager.fireEvent(\"animationComplete\",{currAnimState:currAnimState})}};animationManager.startAnimation=function(){animationManager.kickStart();animationManager.animate()};return _this}_proto.getName=function getName(){return\"animationManager\"};_proto.stopAnimation=function stopAnimation(){if(!this.getState(\"chartAnimating\")){return}var animationManager=this,dummyObj,config=animationManager.config,animationObj=config.animationObj,duration=animationObj&&animationObj.duration;if(duration){dummyObj=animationManager.getGraphicalElement().dummyObj;dummyObj&&dummyObj.stop(UNDEF,true,true)}else if(duration===0){animationManager.removeJob(\"anim-callBack\");animationManager._animCallBack()}};_proto.kickStart=function kickStart(){var animationManager=this,config=animationManager.config,graphics=animationManager.getGraphicalElement(),paper=animationManager.getFromEnv(PAPER),animation=config.animationObj,dummyObj,animationDuration,animObj,animType=config.animationeffect;animationDuration=animation.duration;animation.animObj=animObj=(0,_dependencyManager.getDep)(\"redraphael\",\"plugin\").animation({x:0},animationDuration,animType,animationManager._animCallBack,true);animation.animType=animType;if(!(dummyObj=graphics.dummyObj)){dummyObj=paper.rect({x:100,y:0,width:10,height:30});animationManager.addGraphicalElement(\"dummyObj\",dummyObj);dummyObj.hide()}else{dummyObj.attr({x:100})}animation.dummyObj=graphics.dummyObj;dummyObj.stop(UNDEF,true,true);animationManager.fireEvent(\"animationStart\",{duration:animationDuration});animationManager.setState(\"chartAnimating\",true);dummyObj.animate(animObj)};_proto.setAnimationState=function setAnimationState(state){if(state===void 0){state=UNDEF}if(state){this.stopAnimation()}this.config.__state=state;this._setAnimDuration(state)};_proto.getAnimationState=function getAnimationState(){return this.config&&this.config.__state};_proto._setAnimDuration=function _setAnimDuration(state){if(state===void 0){state=DEFAULT}var animationManager=this,config=animationManager.config,animationObj=config.animationObj||(config.animationObj={}),animationDuration=config.animationDuration||(config.animationDuration={}),chartAttrs=animationManager.getFromEnv(CHART).getFromEnv(\"chart-attrib\")||{},currStateAnimDurationAttr=state+\"AnimDuration\",killSwitch=config.killSwitch,currStateAnimDuration=killSwitch?0:(animationDuration[currStateAnimDurationAttr]||chartAttrs[currStateAnimDurationAttr.toLowerCase()]||AnimationManager.getFallbackAnimDuration(state))*1e3;if(animationObj){animationObj[currStateAnimDurationAttr]=currStateAnimDuration;animationObj.duration=+currStateAnimDuration}};_proto.configureAttributes=function configureAttributes(){var animationManager=this,chart=animationManager.getFromEnv(CHART),chartConfig=chart.config,animationManagerConfig=animationManager.config,chartAttrs=chart.getFromEnv(\"chart-attrib\")||{};animationManagerConfig.killSwitch=!(0,_lib.pluckNumber)(chartAttrs.animation,chartConfig.animation,1);animationManagerConfig.animationeffect=chartConfig.animationeffect||\"linear\";animationManager.invokeAnimationRules();!animationManagerConfig.workingRules&&(animationManagerConfig.workingRules={});!animationManagerConfig.animateArr&&(animationManagerConfig.animateArr=[]);!animationManagerConfig.animationName&&(animationManagerConfig.animationName=[])};_proto.invokeAnimationRules=function invokeAnimationRules(){var animationManager=this,chart=animationManager.getFromEnv(CHART),chartAttrs=chart.getFromEnv(\"chart-attrib\")||{},chartConfig=chart.config||{},config=animationManager.config,chartInstance=chart.getFromEnv(\"chartInstance\"),chartAnimRule=chartInstance.args.animation,globalTheme=chart.getFromEnv(\"core-options\").defaultTheme,themes=getRegisteredThemes((0,_dependencyManager.getDepsByType)(\"theme\")),global=(chart.getFromEnv(\"core-options\")._globalAnimationRule||[]).concat(fetchRulesFromTheme(themes,globalTheme)),chartSpecific=(chartAnimRule&&[chartAnimRule]||[]).concat(fetchRulesFromTheme(themes,chartConfig.theme)),animationDuration;config.animationRules={global:ruleReducer(global.map((function(v){return v&&v.rule})).filter((function(v){return v}))),chartSpecific:ruleReducer(chartSpecific.map((function(v){return v&&v.rule})).filter((function(v){return v}))),default:ruleReducer((0,_dependencyManager.getDepsByType)(\"animationRule\"))};config.animationDuration=animationDuration={};global.map((function(v){return Object.assign(animationDuration,v.duration)}));chartSpecific.map((function(v){return Object.assign(animationDuration,v.duration)}));animationDuration.initialAnimDuration=(0,_lib.pluckNumber)(animationDuration.initialAnimDuration,chartAttrs.initialanimduration,chartAttrs.animationduration);animationManager.config.slots=AnimationManager.getFallbackAnimTimeSlots().concat([].concat.apply([],global.map((function(v){return v.slots}))).filter((function(v){return v}))).concat([].concat.apply([],chartSpecific.map((function(v){return v.slots}))).filter((function(v){return v})))};_proto.reInitialize=function reInitialize(){var animationManager=this,config=animationManager.config,animationObj=config.animationObj,duration=animationObj.duration;animationManager.setState(\"initialized\",true);if(duration){animationManager.addJob(\"start-animation\",animationManager.startAnimation,_schedular.priorityList.animation)}else{animationManager.fireEvent(\"animationStart\",{duration:duration});animationManager.setState(\"chartAnimating\",true);animationManager.addJob(\"anim-callBack\",animationManager._animCallBack,_schedular.priorityList.animation)}};_proto.reset=function reset(){var animationManager=this;animationManager.setState(\"initialized\",false);animationManager.config&&animationManager.config.animateArr&&(animationManager.config.animateArr.length=0);animationManager.setState(\"chartAnimating\",false);animationManager.setAnimationState()};_proto.registerAnimObj=function registerAnimObj(ob){var key;for(key in ob){this.registerAnimation(ob[key],key)}};_proto.getFinalSlots=function getFinalSlots(){var animationManager=this,animationManagerConfig=animationManager.config,appliedRules=animationManagerConfig.slots,workingRules=animationManagerConfig.workingRules={},animationName=animationManagerConfig.animationName;hasAnimation(appliedRules,animationName);buildWorkingRule(appliedRules,0,1,workingRules);workingRules[\"default\"]={start:0,end:1};return workingRules};_proto.registerOne=function registerOne(ob,key){this.registerAnimation([{data:[ob]}],key)};_proto.registerAnimation=function registerAnimation(attrObj,component){if(attrObj===void 0){attrObj=[]}var i,hasData=false,attrObjItem,ln;for(i=0,ln=attrObj.length;i<ln;i+=1){attrObjItem=attrObj[i];if(attrObjItem.data&&attrObjItem.data.length){this.config.animateArr.push((attrObjItem.component=component,attrObjItem));hasData=true}}hasData&&this.config.animationName.push(component);!this.getState(\"initialized\")&&this.reInitialize()};_proto.onAnimationComplete=function onAnimationComplete(callback){var animationManager=this;animationManager.addEventListener(\"animationComplete\",(function(e){callback();e.detachHandler()}))};AnimationManager.removeOpacityFromGroup=function removeOpacityFromGroup(el,attr){if(attr&&isIE8&&(el===GROUP||el.type===GROUP)){delete attr.opacity}};_proto.setAnimation=function setAnimation(inputJSON){if(inputJSON===void 0){inputJSON={}}var animationManager=this,config=animationManager.config,animationObj=config.animationObj,element=inputJSON.el,componentFinalAttr=inputJSON.attr||{},finalAttr,actualFinalAttr={},actualInitialAttr={},initialAttr,currAttr,attr,callBackFn=function callBackFn(_attr,isLastSlot,animatableAttrs,container){return function(){animatableAttrs.callback&&animatableAttrs.callback.call(this);_attr&&this.attr(_attr);isLastSlot&&inputJSON.callback&&inputJSON.callback.call(this);container&&this.appendTo(container)}},hookFn=function hookFn(_attr,animatableAttrs,container){return function(){animatableAttrs.hookFn&&animatableAttrs.hookFn.call(this);_attr&&this.attr(_attr);container&&this.appendTo(container)}},data=[],datum,applyAnimation=animationObj.duration,i,changedAttr,length,allAnimatableAttrs,createInitalAttr,elemOwnAttr,isLastSlot,animatableAttrs,slotGroupChange,animating=animationManager.getState(\"chartAnimating\"),groupChangeReq=typeof element===OBJECT&&inputJSON.container&&element.parent!==inputJSON.container;animationManager.getState(\"chartAnimating\")&&config.animationObj&&config.animationObj.duration&&animationManager.setAnimationState(\"default\");if(!animating&&applyAnimation&&(allAnimatableAttrs=animationManager.getAnimAttributes(inputJSON))){length=allAnimatableAttrs.length;slotGroupChange=false;createInitalAttr=inputJSON.state===APPEARING||typeof element===STRING;elemOwnAttr=!createInitalAttr&&element.attrs;changedAttr={};for(i=0;i<length;i++){isLastSlot=i===length-1;datum=data[i]={};animatableAttrs=allAnimatableAttrs[i];finalAttr=animatableAttrs.finalAttr;initialAttr=animatableAttrs.initialAttr;AnimationManager.removeOpacityFromGroup(inputJSON.el,initialAttr);AnimationManager.removeOpacityFromGroup(inputJSON.el,finalAttr);for(attr in initialAttr){changedAttr[attr]=initialAttr[attr];if(actualInitialAttr[attr]===UNDEF){actualInitialAttr[attr]=initialAttr[attr]}}for(attr in finalAttr){changedAttr[attr]=finalAttr[attr];if(createInitalAttr&&actualInitialAttr[attr]===UNDEF){actualInitialAttr[attr]=finalAttr[attr]}}datum.attrs=finalAttr;datum.transition=animatableAttrs.transition;datum.effect=animatableAttrs.effect;datum.animConfig=[animatableAttrs.startEnd];animatableAttrs.callback&&(datum.callback=animatableAttrs.callback);if(slotGroupChange=groupChangeReq&&animatableAttrs.changeGroup){groupChangeReq=false}if(isLastSlot){if(createInitalAttr){for(attr in componentFinalAttr){if(actualInitialAttr[attr]===UNDEF){actualInitialAttr[attr]=componentFinalAttr[attr]}}}for(attr in componentFinalAttr){currAttr=componentFinalAttr[attr];if((changedAttr[attr]||!createInitalAttr)&&changedAttr[attr]!==currAttr){if(finalAttr&&finalAttr[attr]===UNDEF){finalAttr[attr]=currAttr}else{actualFinalAttr[attr]=currAttr}}}for(attr in changedAttr){if(actualFinalAttr[attr]===UNDEF){currAttr=(0,_lib.getFirstValue)(componentFinalAttr[attr],elemOwnAttr[attr]);if(changedAttr[attr]!==currAttr){if(finalAttr&&finalAttr[attr]===UNDEF&&currAttr!==UNDEF){finalAttr[attr]=currAttr}else{actualFinalAttr[attr]=currAttr}}}}if(!finalAttr){datum.attrs=actualFinalAttr}datum.callback=callBackFn((finalAttr||initialAttr)&&actualFinalAttr,isLastSlot,animatableAttrs,groupChangeReq&&inputJSON.container);element=animationManager.setAttributes(element,{attr:actualInitialAttr,inputJSON:inputJSON})}if(initialAttr||animatableAttrs.hookFn||slotGroupChange){datum.animConfig[0].hookFn=hookFn((!createInitalAttr||i)&&initialAttr,animatableAttrs,slotGroupChange&&inputJSON.container)}}for(i=0;i<length;i++){data[i].el=element.el;animationManager.registerAnimation([{data:[data[i]]}],allAnimatableAttrs[i].slot)}}else if(!animating){animationManager.registerAnimation();element=animationManager.setAttributes(element,{attr:componentFinalAttr,inputJSON:inputJSON,groupChangeReq:groupChangeReq,immediate:true})}else{element=animationManager.setAttributes(element,{attr:componentFinalAttr,inputJSON:inputJSON,groupChangeReq:groupChangeReq,immediate:true})}return element.removed?null:element.el};_proto._removeElems=function _removeElems(){if(!this.getFromEnv(PAPER)||this.getFromEnv(PAPER).removed){return}var component=this;component._removedGraphics.forEach((function(v){return v.remove&&v.remove()}));component._removedGraphics.length=0};_proto.removeElement=function removeElement(el,immediate){var animationManager=this;if(immediate){el.remove()}else{animationManager._removedGraphics.push(el)}return null};AnimationManager._ruleSelectorQueryBuilder=function _ruleSelectorQueryBuilder(info,isForState){if(isForState===void 0){isForState=true}var label=info.label,state=info.state,component=info.component,componentType=component.getType(),componentName=component.getName();if(isForState){var dummy=[\"*\",\"*.*\",\"*.*.*\"],wildchar=[\"*.*.\"+componentName,\"*.\"+componentType+\".*\",\"*.\"+componentType+\".\"+componentName];if(state===\"*\"){return dummy.concat(wildchar)}return dummy.concat(wildchar,[state+\".*\",state+\".*.*\",state+\".*.\"+componentName,state+\".\"+componentType+\".*\",state+\".\"+componentType+\".\"+componentName])}return[label+\".\"+state,label+\".*\",\"*.\"+state,\"*.*\",\"*\"]};_proto._getRulesByState=function _getRulesByState(info){var animationManager=this,component=info.component,selectedRule,stateSpecRule,rules,animRulesForComp,state=animationManager.getAnimationState()||STARSTRING,ruleSelectors=AnimationManager._ruleSelectorQueryBuilder(Object.assign(info,{state:state}));animRulesForComp=component.getState(\"animRules\")||{};if(!(selectedRule=animRulesForComp[state])){stateSpecRule=animRulesForComp[state]={};rules=animationManager.config.animationRules;rulePriorityList.forEach((function(ruleType){var rule=rules[ruleType];rule&&ruleSelectors.forEach((function(v){if(rule[v]){if(Array.isArray(rule[v])){rule[v].forEach((function(prop){stateSpecRule=animRulesForComp[state]=isNull(prop)?null:Object.assign(stateSpecRule||{},isFunction(prop)?prop.call(component):prop)}))}else{stateSpecRule=animRulesForComp[state]=isNull(rule[v])?null:Object.assign(stateSpecRule||{},isFunction(rule[v])?rule[v].call(component):rule[v])}}}))}));component.setState(\"animRules\",animRulesForComp);!component.getState(\"ruleFlushAttached\")&&component.addExtEventListener(\"predraw\",(function(){component.setState(\"animRules\",UNDEF);component.setState(\"ruleFlushAttached\",true)}),component.getFromEnv(CHART));return stateSpecRule}return selectedRule};AnimationManager._getRulesByElement=function _getRulesByElement(rules,info){var selectedRule,ruleSelectors=AnimationManager._ruleSelectorQueryBuilder(info,false);ruleSelectors.forEach((function(v){if(selectedRule===UNDEF){selectedRule=rules[v]}}));return selectedRule};_proto.getAnimAttributes=function getAnimAttributes(inputJSON){var animationManager=this,component=inputJSON.component||animationManager.getFromEnv(CHART),label=inputJSON.label||(typeof inputJSON.el===\"object\"?inputJSON.el.type:inputJSON.el),state=inputJSON.state,componentRules=animationManager._getRulesByState({label:label,component:component}),rules,currentRule,returnObj=[],currentReturnObj,i,len;if(isNull(componentRules)){return}!state&&(state=typeof inputJSON.el===STRING?APPEARING:inputJSON.attr?UPDATING:DISAPPEARING);rules=AnimationManager._getRulesByElement(componentRules,{component:component,state:state,label:label});if(isNull(rules)){return}if(!rules){return AnimationManager.getFallbackAnimRule(inputJSON)}if(isFunction(rules)){rules=rules.call(component,inputJSON);if(isNull(rules)){return}}len=rules.length;for(i=0;i<len;i++){currentRule=rules[i];currentReturnObj={};currentRule.initialAttr&&(currentReturnObj.initialAttr=isFunction(currentRule.initialAttr)?currentRule.initialAttr.call(component,inputJSON):Object.assign({},currentRule.initialAttr));currentRule.finalAttr&&(currentReturnObj.finalAttr=isFunction(currentRule.finalAttr)?currentRule.finalAttr.call(component,inputJSON):Object.assign({},currentRule.finalAttr));currentReturnObj.startEnd=isFunction(currentRule.startEnd)?currentRule.startEnd.call(component,inputJSON):currentRule.startEnd?Object.assign({},currentRule.startEnd):{start:0,end:1};currentReturnObj.slot=currentRule.slot||\"default\";currentReturnObj.callback=currentRule.callback;currentReturnObj.hookFn=currentRule.hookFn;currentReturnObj.transition=currentRule.transition;currentReturnObj.effect=currentRule.effect||\"linear\";currentRule.groupChange&&(currentReturnObj.groupChange=true);returnObj.push(currentReturnObj)}return returnObj};AnimationManager.getFallbackAnimRule=function getFallbackAnimRule(inputJSON){if(inputJSON.state===APPEARING||typeof inputJSON.el===STRING){if(inputJSON.el!==GROUP){return[{initialAttr:{opacity:0},finalAttr:{opacity:(0,_lib.pluckNumber)(inputJSON.attr&&inputJSON.attr.opacity,1)},startEnd:{start:0,end:1}}]}}else{if(inputJSON.state===UPDATING||inputJSON.attr){return[{startEnd:{start:0,end:1}}]}if(inputJSON.el.type!==GROUP){return[{initialAttr:{opacity:1},finalAttr:{opacity:0},startEnd:{start:0,end:1}}]}}};AnimationManager.getFallbackAnimDuration=function getFallbackAnimDuration(state){return durationList[state]||0};AnimationManager.getFallbackAnimTimeSlots=function getFallbackAnimTimeSlots(){return[{name:\"_default\",start:0,end:1,child:[[{name:\"initial\",duration:.125},{name:\"middle\",duration:.75,child:[[{name:\"axis\",duration:.25},{name:\"plot\",duration:.75}]]},{name:\"final\",duration:.125}]]}]};_proto.createElement=function createElement(_element,attr,inputJSON){if(attr===void 0){attr={}}var animationManager=this,element=_element,paper=animationManager.getFromEnv(PAPER);if(!paper){paper=animationManager.getFromEnv(CHART).getFromEnv(PAPER);animationManager.addToEnv(PAPER,paper)}if(element===GROUP){element=paper.group(inputJSON.attr&&inputJSON.attr.name||\"\",inputJSON.container);element.attr(attr)}else if(element===HTML){element=paper.html(inputJSON.attr.type,attr,inputJSON.css,inputJSON.container)}else{if(element===TEXT&&inputJSON.css){return paper[inputJSON.el](attr,inputJSON.css,inputJSON.container)}element=paper[inputJSON.el](attr,inputJSON.container)}return element};_proto.setAttributes=function setAttributes(_element,props){var animationManager=this,element=_element,attr=props.attr,inputJSON=props.inputJSON||{},removeEl;if(typeof element===\"string\"){element=animationManager.createElement(element,attr,inputJSON)}else if(Object.keys(attr).length!==0){element.attr(attr)}else if(!inputJSON.attr||inputJSON.state===DISAPPEARING){removeEl=!inputJSON.doNotRemove}if(!removeEl){inputJSON.css&&element.css(inputJSON.css);props.groupChangeReq&&element.appendTo(inputJSON.container);props.immediate&&inputJSON.callback&&inputJSON.callback.call(element)}else{animationManager.removeElement(element,props.immediate)}return{el:element,removed:removeEl}};_proto.prepareAnimateArr=function prepareAnimateArr(animateArr){var thisAnimateObj,rules,component,i,ln,j,jj,transition,animEl,preAnimArr=this.config.preAnimArr=[];rules=this.getFinalSlots();function manageStartEnd(obj,_component){var refComponent,diff,retObj={start:0,end:1},key;for(key in obj){if(obj.hasOwnProperty(key)){if(obj[key].syncWith&&!rules[obj[key].syncWith]){continue}refComponent=obj[key].syncWith;retObj.start=obj[key].start===UNDEF?0:obj[key].start;retObj.end=obj[key].end===UNDEF?1:obj[key].end;retObj.hookFn=obj[key].hookFn||obj.hookFn;retObj.smartMorph=obj[key].smartMorph||obj.smartMorph;break}}refComponent=refComponent&&rules[refComponent]?refComponent:_component&&rules[_component]?_component:\"default\";diff=rules[refComponent].end-rules[refComponent].start;retObj.start=rules[refComponent].start+retObj.start*diff;retObj.end=rules[refComponent].start+retObj.end*diff;return retObj}for(i=0,ln=animateArr.length;i<ln;i+=1){thisAnimateObj=animateArr[i];component=thisAnimateObj.component;for(j=0,jj=thisAnimateObj.data.length;j<jj;j+=1){animEl=thisAnimateObj.data[j];transition=animEl.transition||rules[component]&&rules[component].transition;if(transition){applyType(animEl,transition)}if(animEl.preAnimFn){preAnimArr.push({el:animEl.el,fn:animEl.preAnimFn})}animEl.animConfig&&(animEl.animConfig=manageStartEnd(animEl.animConfig,component))}thisAnimateObj.effect||rules[component]&&(thisAnimateObj.effect=rules[component].effect);thisAnimateObj.animConfig||(thisAnimateObj.animConfig=[{}]);thisAnimateObj.animConfig=manageStartEnd(thisAnimateObj.animConfig,component)}};_proto.animate=function animate(){var animationManager=this,config=animationManager.config,animateArr=animationManager.config.animateArr,animationObj=config.animationObj,animObj=animationObj.animObj,dummyObj=animationObj.dummyObj,animationDuration=animationObj.duration,effect,shiftTime=180,thisAnimateObj,animConfig,callback,i,ln,j,jj;animationManager.prepareAnimateArr(animateArr);execPreAnimFns(animationManager.config.preAnimArr);for(i=0,ln=animateArr.length;i<ln;i+=1){thisAnimateObj=animateArr[i];for(j=0,jj=thisAnimateObj.data.length-1;j<=jj;j+=1){animConfig=thisAnimateObj.data[j].animConfig||thisAnimateObj.animConfig;animConfig=shiftAnimTime(animConfig,animationDuration,shiftTime);effect=thisAnimateObj.data[j].effect||thisAnimateObj.effect||LINEAR;callback=i===ln?thisAnimateObj.callback||thisAnimateObj.data[j].callback:thisAnimateObj.data[j].callback;thisAnimateObj.data[j].preAttrs&&thisAnimateObj.data[j].el.attr(thisAnimateObj.data[j].preAttrs);thisAnimateObj.data[j].el&&animateEl(thisAnimateObj.data[j].el,thisAnimateObj.data[j].attrs,callback||null,animConfig,dummyObj,animObj,animationDuration,effect)}}};_proto.remove=function remove(option){this.removeAllJobs();if(option.instant){this.getGraphicalElement(\"dummyObj\")&&this.getGraphicalElement(\"dummyObj\").remove()}_ComponentInterface.prototype.remove.call(this,option)};return AnimationManager}(_componentInterface.ComponentInterface);var _default=AnimationManager;exports.default=_default;"]},"metadata":{},"sourceType":"script"}