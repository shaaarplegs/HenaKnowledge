{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar getMultiplierOfFr = function getMultiplierOfFr(size) {\n  return +size.replace(/fr/, \"\");\n},\n    _frSpaceDistributorHelper = function _frSpaceDistributorHelper(tracks, totalSpaceUsed, containerSize) {\n  var freeSpace,\n      spacePerFrTrack,\n      eligibleTracks,\n      totalFrTrackRatio = 0;\n\n  if (!tracks.length) {\n    return;\n  }\n\n  tracks.forEach(function (track) {\n    return totalFrTrackRatio += track.multiplier;\n  });\n  freeSpace = containerSize - totalSpaceUsed;\n  spacePerFrTrack = freeSpace / totalFrTrackRatio;\n  eligibleTracks = tracks.filter(function (track) {\n    return track.baseSize <= track.multiplier * spacePerFrTrack;\n  });\n\n  if (eligibleTracks.length < tracks.length) {\n    tracks.filter(function (track) {\n      return track.baseSize > track.multiplier * spacePerFrTrack;\n    }).forEach(function (track) {\n      return totalSpaceUsed += track.baseSize;\n    });\n    return _frSpaceDistributorHelper(eligibleTracks, totalSpaceUsed, containerSize);\n  } else {\n    eligibleTracks.forEach(function (track) {\n      return track.baseSize = track.multiplier * spacePerFrTrack;\n    });\n  }\n},\n    _intrinsicSpaceDistributorHelper = function _intrinsicSpaceDistributorHelper(tracks, totalSpaceUsed, containerSize) {\n  var freeSpace,\n      spacePerIntrinsicTrack,\n      i,\n      len,\n      frozenTrack = 0,\n      minMaxTracks,\n      growthLimit,\n      baseSize;\n\n  if (!tracks.length) {\n    return;\n  }\n\n  minMaxTracks = tracks.filter(function (track) {\n    return track.type === \"minmax\" && track.growthLimit !== Infinity;\n  });\n  freeSpace = containerSize - totalSpaceUsed;\n  minMaxTracks.sort(function (a, b) {\n    var gap1 = a.growthLimit - a.baseSize,\n        gap2 = b.growthLimit - b.baseSize;\n    return gap1 - gap2;\n  });\n  len = minMaxTracks.length;\n\n  while (frozenTrack < len && freeSpace) {\n    spacePerIntrinsicTrack = freeSpace / (minMaxTracks.length - frozenTrack || 1);\n\n    for (i = 0, len = minMaxTracks.length; i < len; i++) {\n      growthLimit = minMaxTracks[i].growthLimit;\n      baseSize = Math.min(spacePerIntrinsicTrack + minMaxTracks[i].baseSize, growthLimit);\n      freeSpace -= baseSize - minMaxTracks[i].baseSize;\n      minMaxTracks[i].baseSize = baseSize;\n\n      if (growthLimit === baseSize && !minMaxTracks[i].frozen) {\n        minMaxTracks[i].frozen = true;\n        frozenTrack++;\n      }\n    }\n  }\n\n  tracks = tracks.filter(function (track) {\n    return track.type === \"minmax\" && track.growthLimit === Infinity || track.type !== \"minmax\";\n  });\n  spacePerIntrinsicTrack = freeSpace / tracks.length;\n  tracks.forEach(function (track) {\n    return track.baseSize += spacePerIntrinsicTrack;\n  });\n};\n\nvar TrackResolver = function () {\n  function TrackResolver(tracks, items, containerSize) {\n    if (tracks === void 0) {\n      tracks = [];\n    }\n\n    if (items === void 0) {\n      items = [];\n    }\n\n    if (containerSize === void 0) {\n      containerSize = 600;\n    }\n\n    this.clear();\n    this.set(\"tracks\", tracks);\n    this.set(\"items\", items);\n    this.set(\"containerSize\", containerSize);\n    return this;\n  }\n\n  var _proto = TrackResolver.prototype;\n\n  _proto.set = function set(key, info) {\n    this.props[key] = info;\n\n    switch (key) {\n      case \"tracks\":\n        this._initTrackSize();\n\n        break;\n\n      case \"items\":\n        this._initItems();\n\n        break;\n\n      case \"containerSize\":\n        this.props[key] = isNaN(+info) ? 0 : +info;\n    }\n\n    return this;\n  };\n\n  _proto.get = function get(key) {\n    return this.props[key];\n  };\n\n  _proto._initTrackSize = function _initTrackSize(_tracks) {\n    var tracks = _tracks || this.props.tracks || [],\n        config = this._config,\n        trackAr = [{}],\n        i,\n        len,\n        size,\n        type,\n        multiplier,\n        baseSize,\n        growthLimit;\n    config.frTracks = [];\n    config.intrinsicTracks = [];\n\n    for (i = 1, len = tracks.length; i < len; i++) {\n      size = tracks[i].size;\n      multiplier = 1;\n\n      if (Array.isArray(size)) {\n        baseSize = +size[0] || 0;\n\n        if (size[1].indexOf(\"fr\") > 0 || size[0].indexOf(\"fr\") > 0) {\n          growthLimit = Infinity;\n          config.frTracks.push(i);\n          type = \"minmax\";\n        } else if (size[1] === \"auto\" || size[0] === \"auto\") {\n          growthLimit = Infinity;\n          config.intrinsicTracks.push(i);\n          type = \"minmax\";\n        } else if (!isNaN(+size[0]) && !isNaN(+size[1])) {\n          growthLimit = Math.max(+size[0], +size[1]);\n          baseSize = Math.min(+size[0], +size[1]);\n          config.intrinsicTracks.push(i);\n          type = \"minmax\";\n        }\n      } else if (!isNaN(+size)) {\n        baseSize = growthLimit = +size;\n        type = \"fixed\";\n      } else if (size.indexOf(\"fr\") > 0) {\n        baseSize = 0;\n        growthLimit = Infinity;\n        config.frTracks.push(i);\n        type = \"flex\";\n        multiplier = getMultiplierOfFr(size);\n      } else {\n        baseSize = 0;\n        growthLimit = Infinity;\n        type = \"intrinsic\";\n        config.intrinsicTracks.push(i);\n      }\n\n      trackAr.push(_objectSpread(_objectSpread({}, tracks[i]), {}, {\n        type: type,\n        multiplier: multiplier,\n        baseSize: baseSize,\n        growthLimit: growthLimit\n      }));\n    }\n\n    return config.sanitizedTracks = trackAr;\n  };\n\n  _proto._initItems = function _initItems(_items) {\n    var items = _items || this.props.items || [],\n        config = this._config,\n        sanitizedItems = [],\n        nonSpanningItemStartIndex,\n        item,\n        validItems = 0,\n        i,\n        len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n      if (isNaN(items[i].start) || isNaN(items[i].end)) {\n        config.autoFlow.push(items[i]);\n        continue;\n      }\n\n      sanitizedItems.push(_objectSpread({}, items[i]));\n      item = sanitizedItems[validItems];\n      validItems++;\n      item.size = isNaN(item.size) ? this._getParentSize(item) : +item.size;\n    }\n\n    sanitizedItems.sort(function (a, b) {\n      var gap1 = a.end - a.start,\n          gap2 = b.end - b.start;\n\n      if (gap1 === gap2) {\n        return a.start - b.start;\n      } else {\n        return gap1 - gap2;\n      }\n    });\n\n    for (i = 0, nonSpanningItemStartIndex = len = sanitizedItems.length; i < len; i++) {\n      if (sanitizedItems[i].end - sanitizedItems[i].start > 1) {\n        nonSpanningItemStartIndex = i;\n        break;\n      }\n    }\n\n    this._config.nonSpanningItemStartIndex = nonSpanningItemStartIndex;\n    return this._config.sanitizedItems = sanitizedItems;\n  };\n\n  _proto._getParentSize = function _getParentSize(item) {\n    var sanitizedTracks = this._config.sanitizedTracks,\n        parentTracks,\n        widthOfParentTracks = 0;\n    parentTracks = sanitizedTracks.filter(function (track) {\n      return track.start >= item.start && track.end <= item.end;\n    });\n    parentTracks.forEach(function (track) {\n      return widthOfParentTracks += track.baseSize;\n    });\n    return widthOfParentTracks || 0;\n  };\n\n  _proto.resolveTracks = function resolveTracks() {\n    this._placeNonSpanningItems()._placeSpanningItems()._distributeFreeSpace();\n\n    return this._config.sanitizedTracks;\n  };\n\n  _proto._placeNonSpanningItems = function _placeNonSpanningItems() {\n    var _this$_config = this._config,\n        sanitizedItems = _this$_config.sanitizedItems,\n        sanitizedTracks = _this$_config.sanitizedTracks,\n        nonSpanningItemStartIndex = _this$_config.nonSpanningItemStartIndex,\n        nonSpanningItems = sanitizedItems.slice(0, nonSpanningItemStartIndex),\n        track,\n        trackIndex;\n    nonSpanningItems.forEach(function (item) {\n      trackIndex = item.start;\n      track = sanitizedTracks[trackIndex];\n\n      if (track.type !== \"fixed\") {\n        track.baseSize = Math.max(track.baseSize, item.size);\n        track.growthLimit = Math.max(track.growthLimit, track.baseSize);\n      }\n    });\n    return this;\n  };\n\n  _proto._placeSpanningItems = function _placeSpanningItems() {\n    var _this$_config2 = this._config,\n        sanitizedItems = _this$_config2.sanitizedItems,\n        sanitizedTracks = _this$_config2.sanitizedTracks,\n        nonSpanningItemStartIndex = _this$_config2.nonSpanningItemStartIndex,\n        frTracks = _this$_config2.frTracks,\n        spanningItems = sanitizedItems.slice(nonSpanningItemStartIndex),\n        trackSizedp = [0],\n        sizeConsumed,\n        sizeLeft,\n        sizePerTrack,\n        availableTracks,\n        hasFrTrack,\n        i,\n        len;\n    if (!spanningItems.length) return this;\n\n    for (i = 1, len = sanitizedTracks.length; i < len; i++) {\n      trackSizedp[i] = trackSizedp[i - 1] + (sanitizedTracks[i].baseSize || 0);\n    }\n\n    spanningItems.forEach(function (item) {\n      sizeConsumed = trackSizedp[item.end - 1] - trackSizedp[item.start - 1];\n      sizeLeft = Math.max(0, item.size - sizeConsumed);\n      if (!sizeLeft) return;\n\n      for (i = item.start, hasFrTrack = false, availableTracks = 0; i < item.end; i++) {\n        if (frTracks.indexOf(i) >= 0) {\n          hasFrTrack = true;\n        }\n\n        if (sanitizedTracks[i].type !== \"fixed\") {\n          availableTracks++;\n        }\n      }\n\n      if (!availableTracks || hasFrTrack) return;\n      sizePerTrack = sizeLeft / availableTracks;\n\n      for (i = item.start; i < item.end; i++) {\n        if (sanitizedTracks[i].type !== \"fixed\") {\n          sanitizedTracks[i].baseSize += sizePerTrack;\n        }\n      }\n    });\n    return this;\n  };\n\n  _proto._distributeFreeSpace = function _distributeFreeSpace() {\n    var _this$_config3 = this._config,\n        frTracks = _this$_config3.frTracks,\n        intrinsicTracks = _this$_config3.intrinsicTracks,\n        sanitizedTracks = _this$_config3.sanitizedTracks,\n        containerSize = this.props.containerSize,\n        totalSpaceUsed = 0;\n    sanitizedTracks.forEach(function (track) {\n      return totalSpaceUsed += track.baseSize || 0;\n    });\n\n    if (totalSpaceUsed < containerSize) {\n      if (frTracks.length) {\n        frTracks.forEach(function (trackId, index) {\n          frTracks[index] = sanitizedTracks[trackId];\n        });\n        frTracks.forEach(function (track) {\n          return totalSpaceUsed -= track.baseSize;\n        });\n\n        _frSpaceDistributorHelper(frTracks, totalSpaceUsed, containerSize);\n      } else if (intrinsicTracks.length) {\n        intrinsicTracks.forEach(function (trackId, index) {\n          intrinsicTracks[index] = sanitizedTracks[trackId];\n        });\n\n        _intrinsicSpaceDistributorHelper(intrinsicTracks, totalSpaceUsed, containerSize);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.clear = function clear() {\n    this.props = {};\n    this._config = {\n      frTracks: [],\n      intrinsicTracks: [],\n      autoFlow: []\n    };\n    return this;\n  };\n\n  return TrackResolver;\n}();\n\nvar _default = TrackResolver;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/core/src/_internal/vendors/faberjs/src/grid/track-sizing.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_defineProperty2","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","getMultiplierOfFr","size","replace","_frSpaceDistributorHelper","tracks","totalSpaceUsed","containerSize","freeSpace","spacePerFrTrack","eligibleTracks","totalFrTrackRatio","track","multiplier","baseSize","_intrinsicSpaceDistributorHelper","spacePerIntrinsicTrack","len","frozenTrack","minMaxTracks","growthLimit","type","Infinity","sort","a","b","gap1","gap2","Math","min","frozen","TrackResolver","items","clear","set","_proto","prototype","info","props","_initTrackSize","_initItems","isNaN","get","_tracks","config","_config","trackAr","frTracks","intrinsicTracks","Array","isArray","indexOf","max","sanitizedTracks","_items","sanitizedItems","nonSpanningItemStartIndex","item","validItems","start","end","autoFlow","_getParentSize","parentTracks","widthOfParentTracks","resolveTracks","_placeNonSpanningItems","_placeSpanningItems","_distributeFreeSpace","_this$_config","nonSpanningItems","slice","trackIndex","_this$_config2","spanningItems","trackSizedp","sizeConsumed","sizeLeft","sizePerTrack","availableTracks","hasFrTrack","_this$_config3","trackId","index","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _defineProperty2=_interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}var getMultiplierOfFr=function getMultiplierOfFr(size){return+size.replace(/fr/,\"\")},_frSpaceDistributorHelper=function _frSpaceDistributorHelper(tracks,totalSpaceUsed,containerSize){var freeSpace,spacePerFrTrack,eligibleTracks,totalFrTrackRatio=0;if(!tracks.length){return}tracks.forEach((function(track){return totalFrTrackRatio+=track.multiplier}));freeSpace=containerSize-totalSpaceUsed;spacePerFrTrack=freeSpace/totalFrTrackRatio;eligibleTracks=tracks.filter((function(track){return track.baseSize<=track.multiplier*spacePerFrTrack}));if(eligibleTracks.length<tracks.length){tracks.filter((function(track){return track.baseSize>track.multiplier*spacePerFrTrack})).forEach((function(track){return totalSpaceUsed+=track.baseSize}));return _frSpaceDistributorHelper(eligibleTracks,totalSpaceUsed,containerSize)}else{eligibleTracks.forEach((function(track){return track.baseSize=track.multiplier*spacePerFrTrack}))}},_intrinsicSpaceDistributorHelper=function _intrinsicSpaceDistributorHelper(tracks,totalSpaceUsed,containerSize){var freeSpace,spacePerIntrinsicTrack,i,len,frozenTrack=0,minMaxTracks,growthLimit,baseSize;if(!tracks.length){return}minMaxTracks=tracks.filter((function(track){return track.type===\"minmax\"&&track.growthLimit!==Infinity}));freeSpace=containerSize-totalSpaceUsed;minMaxTracks.sort((function(a,b){var gap1=a.growthLimit-a.baseSize,gap2=b.growthLimit-b.baseSize;return gap1-gap2}));len=minMaxTracks.length;while(frozenTrack<len&&freeSpace){spacePerIntrinsicTrack=freeSpace/(minMaxTracks.length-frozenTrack||1);for(i=0,len=minMaxTracks.length;i<len;i++){growthLimit=minMaxTracks[i].growthLimit;baseSize=Math.min(spacePerIntrinsicTrack+minMaxTracks[i].baseSize,growthLimit);freeSpace-=baseSize-minMaxTracks[i].baseSize;minMaxTracks[i].baseSize=baseSize;if(growthLimit===baseSize&&!minMaxTracks[i].frozen){minMaxTracks[i].frozen=true;frozenTrack++}}}tracks=tracks.filter((function(track){return track.type===\"minmax\"&&track.growthLimit===Infinity||track.type!==\"minmax\"}));spacePerIntrinsicTrack=freeSpace/tracks.length;tracks.forEach((function(track){return track.baseSize+=spacePerIntrinsicTrack}))};var TrackResolver=function(){function TrackResolver(tracks,items,containerSize){if(tracks===void 0){tracks=[]}if(items===void 0){items=[]}if(containerSize===void 0){containerSize=600}this.clear();this.set(\"tracks\",tracks);this.set(\"items\",items);this.set(\"containerSize\",containerSize);return this}var _proto=TrackResolver.prototype;_proto.set=function set(key,info){this.props[key]=info;switch(key){case\"tracks\":this._initTrackSize();break;case\"items\":this._initItems();break;case\"containerSize\":this.props[key]=isNaN(+info)?0:+info}return this};_proto.get=function get(key){return this.props[key]};_proto._initTrackSize=function _initTrackSize(_tracks){var tracks=_tracks||this.props.tracks||[],config=this._config,trackAr=[{}],i,len,size,type,multiplier,baseSize,growthLimit;config.frTracks=[];config.intrinsicTracks=[];for(i=1,len=tracks.length;i<len;i++){size=tracks[i].size;multiplier=1;if(Array.isArray(size)){baseSize=+size[0]||0;if(size[1].indexOf(\"fr\")>0||size[0].indexOf(\"fr\")>0){growthLimit=Infinity;config.frTracks.push(i);type=\"minmax\"}else if(size[1]===\"auto\"||size[0]===\"auto\"){growthLimit=Infinity;config.intrinsicTracks.push(i);type=\"minmax\"}else if(!isNaN(+size[0])&&!isNaN(+size[1])){growthLimit=Math.max(+size[0],+size[1]);baseSize=Math.min(+size[0],+size[1]);config.intrinsicTracks.push(i);type=\"minmax\"}}else if(!isNaN(+size)){baseSize=growthLimit=+size;type=\"fixed\"}else if(size.indexOf(\"fr\")>0){baseSize=0;growthLimit=Infinity;config.frTracks.push(i);type=\"flex\";multiplier=getMultiplierOfFr(size)}else{baseSize=0;growthLimit=Infinity;type=\"intrinsic\";config.intrinsicTracks.push(i)}trackAr.push(_objectSpread(_objectSpread({},tracks[i]),{},{type:type,multiplier:multiplier,baseSize:baseSize,growthLimit:growthLimit}))}return config.sanitizedTracks=trackAr};_proto._initItems=function _initItems(_items){var items=_items||this.props.items||[],config=this._config,sanitizedItems=[],nonSpanningItemStartIndex,item,validItems=0,i,len;for(i=0,len=items.length;i<len;i++){if(isNaN(items[i].start)||isNaN(items[i].end)){config.autoFlow.push(items[i]);continue}sanitizedItems.push(_objectSpread({},items[i]));item=sanitizedItems[validItems];validItems++;item.size=isNaN(item.size)?this._getParentSize(item):+item.size}sanitizedItems.sort((function(a,b){var gap1=a.end-a.start,gap2=b.end-b.start;if(gap1===gap2){return a.start-b.start}else{return gap1-gap2}}));for(i=0,nonSpanningItemStartIndex=len=sanitizedItems.length;i<len;i++){if(sanitizedItems[i].end-sanitizedItems[i].start>1){nonSpanningItemStartIndex=i;break}}this._config.nonSpanningItemStartIndex=nonSpanningItemStartIndex;return this._config.sanitizedItems=sanitizedItems};_proto._getParentSize=function _getParentSize(item){var sanitizedTracks=this._config.sanitizedTracks,parentTracks,widthOfParentTracks=0;parentTracks=sanitizedTracks.filter((function(track){return track.start>=item.start&&track.end<=item.end}));parentTracks.forEach((function(track){return widthOfParentTracks+=track.baseSize}));return widthOfParentTracks||0};_proto.resolveTracks=function resolveTracks(){this._placeNonSpanningItems()._placeSpanningItems()._distributeFreeSpace();return this._config.sanitizedTracks};_proto._placeNonSpanningItems=function _placeNonSpanningItems(){var _this$_config=this._config,sanitizedItems=_this$_config.sanitizedItems,sanitizedTracks=_this$_config.sanitizedTracks,nonSpanningItemStartIndex=_this$_config.nonSpanningItemStartIndex,nonSpanningItems=sanitizedItems.slice(0,nonSpanningItemStartIndex),track,trackIndex;nonSpanningItems.forEach((function(item){trackIndex=item.start;track=sanitizedTracks[trackIndex];if(track.type!==\"fixed\"){track.baseSize=Math.max(track.baseSize,item.size);track.growthLimit=Math.max(track.growthLimit,track.baseSize)}}));return this};_proto._placeSpanningItems=function _placeSpanningItems(){var _this$_config2=this._config,sanitizedItems=_this$_config2.sanitizedItems,sanitizedTracks=_this$_config2.sanitizedTracks,nonSpanningItemStartIndex=_this$_config2.nonSpanningItemStartIndex,frTracks=_this$_config2.frTracks,spanningItems=sanitizedItems.slice(nonSpanningItemStartIndex),trackSizedp=[0],sizeConsumed,sizeLeft,sizePerTrack,availableTracks,hasFrTrack,i,len;if(!spanningItems.length)return this;for(i=1,len=sanitizedTracks.length;i<len;i++){trackSizedp[i]=trackSizedp[i-1]+(sanitizedTracks[i].baseSize||0)}spanningItems.forEach((function(item){sizeConsumed=trackSizedp[item.end-1]-trackSizedp[item.start-1];sizeLeft=Math.max(0,item.size-sizeConsumed);if(!sizeLeft)return;for(i=item.start,hasFrTrack=false,availableTracks=0;i<item.end;i++){if(frTracks.indexOf(i)>=0){hasFrTrack=true}if(sanitizedTracks[i].type!==\"fixed\"){availableTracks++}}if(!availableTracks||hasFrTrack)return;sizePerTrack=sizeLeft/availableTracks;for(i=item.start;i<item.end;i++){if(sanitizedTracks[i].type!==\"fixed\"){sanitizedTracks[i].baseSize+=sizePerTrack}}}));return this};_proto._distributeFreeSpace=function _distributeFreeSpace(){var _this$_config3=this._config,frTracks=_this$_config3.frTracks,intrinsicTracks=_this$_config3.intrinsicTracks,sanitizedTracks=_this$_config3.sanitizedTracks,containerSize=this.props.containerSize,totalSpaceUsed=0;sanitizedTracks.forEach((function(track){return totalSpaceUsed+=track.baseSize||0}));if(totalSpaceUsed<containerSize){if(frTracks.length){frTracks.forEach((function(trackId,index){frTracks[index]=sanitizedTracks[trackId]}));frTracks.forEach((function(track){return totalSpaceUsed-=track.baseSize}));_frSpaceDistributorHelper(frTracks,totalSpaceUsed,containerSize)}else if(intrinsicTracks.length){intrinsicTracks.forEach((function(trackId,index){intrinsicTracks[index]=sanitizedTracks[trackId]}));_intrinsicSpaceDistributorHelper(intrinsicTracks,totalSpaceUsed,containerSize)}}return this};_proto.clear=function clear(){this.props={};this._config={frTracks:[],intrinsicTracks:[],autoFlow:[]};return this};return TrackResolver}();var _default=TrackResolver;exports.default=_default;"]},"metadata":{},"sourceType":"script"}