{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _componentInterface = require(\"../component-interface\");\n\nvar _lib = require(\"../lib\");\n\nvar BACKGROUNDLOADERROR = \"backgroundloaderror\",\n    BACKGROUNDLOADED = \"backgroundloaded\",\n    UNDEF,\n    IMAGE_STR = \"image\",\n    TEXT_STR = \"text\",\n    POINTER = \"pointer\",\n    NONE = _lib.preDefStr.noneStr,\n    attachLink = function attachLink(element, link) {\n  element.on(\"fc-click\", function () {\n    try {\n      open(link);\n    } catch (err) {\n      (top || window).location.href = link;\n    }\n  });\n  element.css({\n    cursor: POINTER,\n    _cursor: POINTER\n  });\n};\n\nvar ChartMessage = function (_ComponentInterface) {\n  (0, _inheritsLoose2.default)(ChartMessage, _ComponentInterface);\n\n  function ChartMessage() {\n    return _ComponentInterface.apply(this, arguments) || this;\n  }\n\n  var _proto = ChartMessage.prototype;\n\n  _proto.getName = function getName() {\n    return \"chartMessage\";\n  };\n\n  _proto.configureAttributes = function configureAttributes(obj) {\n    _ComponentInterface.prototype.configureAttributes.call(this, obj);\n\n    var config = this.config;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        config[key] = obj[key];\n      }\n    }\n  };\n\n  _proto._drawBackground = function _drawBackground(imageString, imageAttr) {\n    if (imageAttr === void 0) {\n      imageAttr = {};\n    }\n\n    var chartMessage = this,\n        config = chartMessage.config,\n        paper = chartMessage.getFromEnv(\"paper\"),\n        chart = chartMessage.getFromEnv(\"chart\"),\n        visible = config.visible,\n        backgroundElement = chartMessage.getGraphicalElement(\"backgroundElement\"),\n        backgroundImage,\n        attrObj,\n        chartConfig,\n        bgImageAttr,\n        prevBackGroundImg = chartMessage.getGraphicalElement(\"backgroundImage\"),\n        chartWidth = chartMessage.getFromEnv(\"chartWidth\"),\n        chartHeight = chartMessage.getFromEnv(\"chartHeight\"),\n        backgroundGroup = chartMessage.getLinkedParent().getChildContainer(\"messageGroup\").show(),\n        bgSWFAlpha = (0, _lib.pluckNumber)(imageAttr.imageAlpha, 100),\n        imgClipRect = 0 + _lib.COMMA + 0 + _lib.COMMA + chartWidth + _lib.COMMA + chartHeight,\n        bgImageVAlign = (0, _lib.getValidValue)(imageAttr.imageVAlign, _lib.BLANKSTRING).toLowerCase(),\n        bgImageHAlign = (0, _lib.pluck)(imageAttr.imageHAlign, _lib.BLANKSTRING).toLowerCase(),\n        bgImageScale = (0, _lib.pluckNumber)(imageAttr.imageScale, 100),\n        chartInstance = chartMessage.getFromEnv(\"chartInstance\"),\n        link = config.messageURL,\n        containerBackgroundColor = (0, _lib.getContainerBackgroundColor)(chartInstance);\n    paper.canvas.style.backgroundColor = containerBackgroundColor;\n\n    if (bgImageVAlign !== _lib.POSITION_TOP && bgImageVAlign !== _lib.POSITION_MIDDLE && bgImageVAlign !== _lib.POSITION_BOTTOM) {\n      bgImageVAlign = _lib.POSITION_TOP;\n    }\n\n    if (bgImageHAlign !== _lib.POSITION_LEFT && bgImageHAlign !== _lib.POSITION_MIDDLE && bgImageHAlign !== _lib.POSITION_RIGHT) {\n      bgImageHAlign = _lib.POSITION_LEFT;\n    }\n\n    attrObj = {\n      x: 0,\n      y: 0,\n      width: chartWidth,\n      height: chartHeight,\n      stroke: NONE\n    };\n\n    if (!backgroundElement) {\n      backgroundElement = paper.rect(backgroundGroup);\n      chartMessage.addGraphicalElement(\"backgroundElement\", backgroundElement);\n    }\n\n    backgroundElement.attr(attrObj);\n\n    if (backgroundElement && link) {\n      attachLink(backgroundElement, link);\n    }\n\n    config.bgImageVAlign = bgImageVAlign;\n    config.bgImageHAlign = bgImageHAlign;\n    config.bgImageScale = bgImageScale;\n    config.bgSWFAlpha = bgSWFAlpha;\n    config.imgClipRect = imgClipRect;\n\n    if (imageString) {\n      if (!(backgroundImage = prevBackGroundImg)) {\n        backgroundImage = chartMessage.getFromEnv(\"paper\").image(backgroundGroup);\n        chartMessage.addGraphicalElement(\"backgroundImage\", backgroundImage);\n        backgroundImage.attr({\n          src: imageString\n        });\n        backgroundImage.on(\"load\", function () {\n          if (!backgroundImage || backgroundImage && backgroundImage.removed) {\n            return;\n          }\n\n          var referenceImage = backgroundImage._.RefImg;\n          chartConfig = chartMessage.getFromEnv(\"chartConfig\");\n\n          if (!config.isImage || chartConfig !== UNDEF && !chartConfig.hasChartMessage) {\n            return;\n          }\n\n          bgImageAttr = (0, _lib.setImageDisplayMode)(NONE, config.bgImageVAlign, config.bgImageHAlign, config.bgImageScale, 0, chartMessage.getFromEnv(\"chartWidth\"), chartMessage.getFromEnv(\"chartHeight\"), referenceImage);\n          (0, _lib.extend2)(bgImageAttr, {\n            opacity: config.bgSWFAlpha * .01,\n            visibility: \"visible\",\n            \"clip-rect\": config.imgClipRect\n          });\n          backgroundImage.attr(bgImageAttr);\n          visible ? backgroundImage.show() : backgroundImage.hide();\n\n          if (backgroundImage && link) {\n            attachLink(backgroundImage, link);\n          }\n\n          chart.fireChartInstanceEvent(BACKGROUNDLOADED, {\n            url: imageString,\n            bgImageAlpha: config.bgSWFAlpha * 100,\n            bgImageDisplayMode: NONE,\n            bgImageVAlign: config.bgImageVAlign,\n            bgImageHAlign: config.bgImageHAlign,\n            bgImageScale: config.bgImageScale,\n            imageWidth: referenceImage.width,\n            imageHeight: referenceImage.height\n          });\n        });\n        backgroundImage.on(\"error\", function (e) {\n          if (backgroundImage.removed) {\n            return;\n          }\n\n          chart.fireChartInstanceEvent(BACKGROUNDLOADERROR, {\n            url: imageString,\n            bgImageAlpha: config.bgSWFAlpha * 100,\n            error: e,\n            bgImageDisplayMode: NONE,\n            bgImageVAlign: config.bgImageVAlign,\n            bgImageHAlign: config.bgImageHAlign,\n            bgImageScale: config.bgImageScale\n          }, chartInstance);\n        });\n      } else {\n        backgroundImage.attr({\n          src: imageString\n        });\n      }\n    }\n  };\n\n  _proto.configure = function configure(obj) {\n    _ComponentInterface.prototype.configure.call(this, obj);\n\n    var chartMessage = this,\n        chartInstance = chartMessage.getFromEnv(\"chartInstance\"),\n        options = chartInstance.options,\n        args = chartInstance.args,\n        config = chartMessage.config,\n        message = config.message,\n        chartObj = config.chartObj,\n        style,\n        strObj = config.strObj = (0, _lib.getImageURL)(typeof message !== \"undefined\" ? message : options.dataEmptyMessage);\n\n    if (strObj.image) {\n      if (!chartObj) {\n        style = {\n          imageHAlign: (0, _lib.pluck)(args.dataEmptyMessageImageHAlign, options.baseChartMessageImageHAlign).toLowerCase(),\n          imageVAlign: (0, _lib.pluck)(args.dataEmptyMessageImageVAlign, options.baseChartMessageImageVAlign).toLowerCase(),\n          imageAlpha: (0, _lib.pluckNumber)(args.dataEmptyMessageImageAlpha, options.baseChartMessageImageAlpha),\n          imageScale: (0, _lib.pluckNumber)(args.dataEmptyMessageImageScale, options.baseChartMessageImageScale)\n        };\n      } else {\n        style = {\n          imageHAlign: (0, _lib.pluck)(chartObj._chartMessageImageStyle.imageHAlign, options.baseChartMessageImageHAlign).toLowerCase(),\n          imageVAlign: (0, _lib.pluck)(chartObj._chartMessageImageStyle.imageVAlign, options.baseChartMessageImageVAlign).toLowerCase(),\n          imageAlpha: (0, _lib.pluckNumber)(chartObj._chartMessageImageStyle.imageAlpha, options.baseChartMessageImageAlpha),\n          imageScale: (0, _lib.pluckNumber)(chartObj._chartMessageImageStyle.imageScale, options.baseChartMessageImageScale)\n        };\n      }\n\n      config.chartMessageType = IMAGE_STR;\n    } else {\n      if (!chartObj) {\n        style = {\n          \"font-family\": args.dataEmptyMessageFont || options.baseChartMessageFont,\n          \"font-size\": args.dataEmptyMessageFontSize || options.baseChartMessageFontSize,\n          fill: args.dataEmptyMessageColor || options.baseChartMessageColor\n        };\n      } else {\n        style = {\n          \"font-family\": chartObj._chartMessageStyle.fontFamily || options.baseChartMessageFont,\n          \"font-size\": chartObj._chartMessageStyle.fontSize || options.baseChartMessageFontSize,\n          fill: chartObj._chartMessageStyle.color || options.baseChartMessageColor\n        };\n      }\n\n      config.chartMessageType = TEXT_STR;\n    }\n\n    config.messageURL = options.messageURL;\n    config.chartMessageStyle = style;\n  };\n\n  _proto.manageSpace = function manageSpace() {\n    var chartMessage = this,\n        config = chartMessage.config,\n        height,\n        width,\n        attr,\n        smartText,\n        style = config.chartMessageStyle,\n        smartLabel = chartMessage.getFromEnv(\"smartLabel\"),\n        strObj = config.strObj,\n        chartWidth = chartMessage.getFromEnv(\"chartWidth\"),\n        chartHeight = chartMessage.getFromEnv(\"chartHeight\");\n    width = config.width = Number(chartWidth);\n    height = config.height = Number(chartHeight);\n\n    if (strObj.image) {\n      attr = strObj.string;\n    } else {\n      smartLabel.setStyle(style);\n      smartText = smartLabel.getSmartText((0, _lib.parseUnsafeString)(strObj.string), width, height);\n      attr = {\n        text: smartText.text,\n        x: width / 2,\n        y: height / 2\n      };\n    }\n\n    config.chartMessageAttr = attr;\n  };\n\n  _proto.draw = function draw() {\n    var chartMessage = this,\n        config = chartMessage.config,\n        paper = chartMessage.getFromEnv(\"paper\"),\n        message,\n        visible = config.visible,\n        messageGroup,\n        graphics,\n        isImage = config.isImage = config.chartMessageType === \"image\",\n        link = config.messageURL,\n        attr = isImage ? config.chartMessageAttr : (0, _lib.extend2)(config.chartMessageAttr, config.chartMessageStyle);\n    message = chartMessage.getGraphicalElement(\"messageText\");\n    graphics = chartMessage._graphics;\n    messageGroup = chartMessage.getLinkedParent().getChildContainer(\"messageGroup\").show();\n\n    if (isImage) {\n      chartMessage._drawBackground(config.chartMessageAttr, config.chartMessageStyle);\n    } else if (!message && config.chartMessageType === \"text\") {\n      message = chartMessage.addGraphicalElement(\"messageText\", paper.text(attr, messageGroup));\n    } else {\n      graphics.message = message.attr(attr);\n      visible ? message.show() : message.hide();\n    }\n\n    if ((message || graphics.message) && link) {\n      attachLink(message || graphics.message, link);\n    }\n\n    chartMessage._hideOtherMessage(isImage);\n  };\n\n  _proto._hideOtherMessage = function _hideOtherMessage(isImage) {\n    var chartMessage = this,\n        backgroundImage,\n        message,\n        backgroundElement;\n\n    if (isImage) {\n      message = chartMessage.getGraphicalElement(\"messageText\");\n      message && message.hide();\n    } else {\n      backgroundImage = chartMessage.getGraphicalElement(\"backgroundImage\");\n      backgroundElement = chartMessage.getGraphicalElement(\"backgroundElement\");\n      backgroundImage && backgroundImage.hide();\n      backgroundElement && backgroundElement.hide();\n    }\n  };\n\n  _proto.getType = function getType() {\n    return \"chartMessage\";\n  };\n\n  return ChartMessage;\n}(_componentInterface.ComponentInterface);\n\nvar _default = ChartMessage;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/core/src/chart-message/index.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_inheritsLoose2","_componentInterface","_lib","BACKGROUNDLOADERROR","BACKGROUNDLOADED","UNDEF","IMAGE_STR","TEXT_STR","POINTER","NONE","preDefStr","noneStr","attachLink","element","link","on","open","err","top","window","location","href","css","cursor","_cursor","ChartMessage","_ComponentInterface","apply","arguments","_proto","prototype","getName","configureAttributes","obj","call","config","key","hasOwnProperty","_drawBackground","imageString","imageAttr","chartMessage","paper","getFromEnv","chart","visible","backgroundElement","getGraphicalElement","backgroundImage","attrObj","chartConfig","bgImageAttr","prevBackGroundImg","chartWidth","chartHeight","backgroundGroup","getLinkedParent","getChildContainer","show","bgSWFAlpha","pluckNumber","imageAlpha","imgClipRect","COMMA","bgImageVAlign","getValidValue","imageVAlign","BLANKSTRING","toLowerCase","bgImageHAlign","pluck","imageHAlign","bgImageScale","imageScale","chartInstance","messageURL","containerBackgroundColor","getContainerBackgroundColor","canvas","style","backgroundColor","POSITION_TOP","POSITION_MIDDLE","POSITION_BOTTOM","POSITION_LEFT","POSITION_RIGHT","x","y","width","height","stroke","rect","addGraphicalElement","attr","image","src","removed","referenceImage","_","RefImg","isImage","hasChartMessage","setImageDisplayMode","extend2","opacity","visibility","hide","fireChartInstanceEvent","url","bgImageAlpha","bgImageDisplayMode","imageWidth","imageHeight","e","error","configure","options","args","message","chartObj","strObj","getImageURL","dataEmptyMessage","dataEmptyMessageImageHAlign","baseChartMessageImageHAlign","dataEmptyMessageImageVAlign","baseChartMessageImageVAlign","dataEmptyMessageImageAlpha","baseChartMessageImageAlpha","dataEmptyMessageImageScale","baseChartMessageImageScale","_chartMessageImageStyle","chartMessageType","dataEmptyMessageFont","baseChartMessageFont","dataEmptyMessageFontSize","baseChartMessageFontSize","fill","dataEmptyMessageColor","baseChartMessageColor","_chartMessageStyle","fontFamily","fontSize","color","chartMessageStyle","manageSpace","smartText","smartLabel","Number","string","setStyle","getSmartText","parseUnsafeString","text","chartMessageAttr","draw","messageGroup","graphics","_graphics","_hideOtherMessage","getType","ComponentInterface","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _componentInterface=require(\"../component-interface\");var _lib=require(\"../lib\");var BACKGROUNDLOADERROR=\"backgroundloaderror\",BACKGROUNDLOADED=\"backgroundloaded\",UNDEF,IMAGE_STR=\"image\",TEXT_STR=\"text\",POINTER=\"pointer\",NONE=_lib.preDefStr.noneStr,attachLink=function attachLink(element,link){element.on(\"fc-click\",(function(){try{open(link)}catch(err){(top||window).location.href=link}}));element.css({cursor:POINTER,_cursor:POINTER})};var ChartMessage=function(_ComponentInterface){(0,_inheritsLoose2.default)(ChartMessage,_ComponentInterface);function ChartMessage(){return _ComponentInterface.apply(this,arguments)||this}var _proto=ChartMessage.prototype;_proto.getName=function getName(){return\"chartMessage\"};_proto.configureAttributes=function configureAttributes(obj){_ComponentInterface.prototype.configureAttributes.call(this,obj);var config=this.config;for(var key in obj){if(obj.hasOwnProperty(key)){config[key]=obj[key]}}};_proto._drawBackground=function _drawBackground(imageString,imageAttr){if(imageAttr===void 0){imageAttr={}}var chartMessage=this,config=chartMessage.config,paper=chartMessage.getFromEnv(\"paper\"),chart=chartMessage.getFromEnv(\"chart\"),visible=config.visible,backgroundElement=chartMessage.getGraphicalElement(\"backgroundElement\"),backgroundImage,attrObj,chartConfig,bgImageAttr,prevBackGroundImg=chartMessage.getGraphicalElement(\"backgroundImage\"),chartWidth=chartMessage.getFromEnv(\"chartWidth\"),chartHeight=chartMessage.getFromEnv(\"chartHeight\"),backgroundGroup=chartMessage.getLinkedParent().getChildContainer(\"messageGroup\").show(),bgSWFAlpha=(0,_lib.pluckNumber)(imageAttr.imageAlpha,100),imgClipRect=0+_lib.COMMA+0+_lib.COMMA+chartWidth+_lib.COMMA+chartHeight,bgImageVAlign=(0,_lib.getValidValue)(imageAttr.imageVAlign,_lib.BLANKSTRING).toLowerCase(),bgImageHAlign=(0,_lib.pluck)(imageAttr.imageHAlign,_lib.BLANKSTRING).toLowerCase(),bgImageScale=(0,_lib.pluckNumber)(imageAttr.imageScale,100),chartInstance=chartMessage.getFromEnv(\"chartInstance\"),link=config.messageURL,containerBackgroundColor=(0,_lib.getContainerBackgroundColor)(chartInstance);paper.canvas.style.backgroundColor=containerBackgroundColor;if(bgImageVAlign!==_lib.POSITION_TOP&&bgImageVAlign!==_lib.POSITION_MIDDLE&&bgImageVAlign!==_lib.POSITION_BOTTOM){bgImageVAlign=_lib.POSITION_TOP}if(bgImageHAlign!==_lib.POSITION_LEFT&&bgImageHAlign!==_lib.POSITION_MIDDLE&&bgImageHAlign!==_lib.POSITION_RIGHT){bgImageHAlign=_lib.POSITION_LEFT}attrObj={x:0,y:0,width:chartWidth,height:chartHeight,stroke:NONE};if(!backgroundElement){backgroundElement=paper.rect(backgroundGroup);chartMessage.addGraphicalElement(\"backgroundElement\",backgroundElement)}backgroundElement.attr(attrObj);if(backgroundElement&&link){attachLink(backgroundElement,link)}config.bgImageVAlign=bgImageVAlign;config.bgImageHAlign=bgImageHAlign;config.bgImageScale=bgImageScale;config.bgSWFAlpha=bgSWFAlpha;config.imgClipRect=imgClipRect;if(imageString){if(!(backgroundImage=prevBackGroundImg)){backgroundImage=chartMessage.getFromEnv(\"paper\").image(backgroundGroup);chartMessage.addGraphicalElement(\"backgroundImage\",backgroundImage);backgroundImage.attr({src:imageString});backgroundImage.on(\"load\",(function(){if(!backgroundImage||backgroundImage&&backgroundImage.removed){return}var referenceImage=backgroundImage._.RefImg;chartConfig=chartMessage.getFromEnv(\"chartConfig\");if(!config.isImage||chartConfig!==UNDEF&&!chartConfig.hasChartMessage){return}bgImageAttr=(0,_lib.setImageDisplayMode)(NONE,config.bgImageVAlign,config.bgImageHAlign,config.bgImageScale,0,chartMessage.getFromEnv(\"chartWidth\"),chartMessage.getFromEnv(\"chartHeight\"),referenceImage);(0,_lib.extend2)(bgImageAttr,{opacity:config.bgSWFAlpha*.01,visibility:\"visible\",\"clip-rect\":config.imgClipRect});backgroundImage.attr(bgImageAttr);visible?backgroundImage.show():backgroundImage.hide();if(backgroundImage&&link){attachLink(backgroundImage,link)}chart.fireChartInstanceEvent(BACKGROUNDLOADED,{url:imageString,bgImageAlpha:config.bgSWFAlpha*100,bgImageDisplayMode:NONE,bgImageVAlign:config.bgImageVAlign,bgImageHAlign:config.bgImageHAlign,bgImageScale:config.bgImageScale,imageWidth:referenceImage.width,imageHeight:referenceImage.height})}));backgroundImage.on(\"error\",(function(e){if(backgroundImage.removed){return}chart.fireChartInstanceEvent(BACKGROUNDLOADERROR,{url:imageString,bgImageAlpha:config.bgSWFAlpha*100,error:e,bgImageDisplayMode:NONE,bgImageVAlign:config.bgImageVAlign,bgImageHAlign:config.bgImageHAlign,bgImageScale:config.bgImageScale},chartInstance)}))}else{backgroundImage.attr({src:imageString})}}};_proto.configure=function configure(obj){_ComponentInterface.prototype.configure.call(this,obj);var chartMessage=this,chartInstance=chartMessage.getFromEnv(\"chartInstance\"),options=chartInstance.options,args=chartInstance.args,config=chartMessage.config,message=config.message,chartObj=config.chartObj,style,strObj=config.strObj=(0,_lib.getImageURL)(typeof message!==\"undefined\"?message:options.dataEmptyMessage);if(strObj.image){if(!chartObj){style={imageHAlign:(0,_lib.pluck)(args.dataEmptyMessageImageHAlign,options.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:(0,_lib.pluck)(args.dataEmptyMessageImageVAlign,options.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:(0,_lib.pluckNumber)(args.dataEmptyMessageImageAlpha,options.baseChartMessageImageAlpha),imageScale:(0,_lib.pluckNumber)(args.dataEmptyMessageImageScale,options.baseChartMessageImageScale)}}else{style={imageHAlign:(0,_lib.pluck)(chartObj._chartMessageImageStyle.imageHAlign,options.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:(0,_lib.pluck)(chartObj._chartMessageImageStyle.imageVAlign,options.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:(0,_lib.pluckNumber)(chartObj._chartMessageImageStyle.imageAlpha,options.baseChartMessageImageAlpha),imageScale:(0,_lib.pluckNumber)(chartObj._chartMessageImageStyle.imageScale,options.baseChartMessageImageScale)}}config.chartMessageType=IMAGE_STR}else{if(!chartObj){style={\"font-family\":args.dataEmptyMessageFont||options.baseChartMessageFont,\"font-size\":args.dataEmptyMessageFontSize||options.baseChartMessageFontSize,fill:args.dataEmptyMessageColor||options.baseChartMessageColor}}else{style={\"font-family\":chartObj._chartMessageStyle.fontFamily||options.baseChartMessageFont,\"font-size\":chartObj._chartMessageStyle.fontSize||options.baseChartMessageFontSize,fill:chartObj._chartMessageStyle.color||options.baseChartMessageColor}}config.chartMessageType=TEXT_STR}config.messageURL=options.messageURL;config.chartMessageStyle=style};_proto.manageSpace=function manageSpace(){var chartMessage=this,config=chartMessage.config,height,width,attr,smartText,style=config.chartMessageStyle,smartLabel=chartMessage.getFromEnv(\"smartLabel\"),strObj=config.strObj,chartWidth=chartMessage.getFromEnv(\"chartWidth\"),chartHeight=chartMessage.getFromEnv(\"chartHeight\");width=config.width=Number(chartWidth);height=config.height=Number(chartHeight);if(strObj.image){attr=strObj.string}else{smartLabel.setStyle(style);smartText=smartLabel.getSmartText((0,_lib.parseUnsafeString)(strObj.string),width,height);attr={text:smartText.text,x:width/2,y:height/2}}config.chartMessageAttr=attr};_proto.draw=function draw(){var chartMessage=this,config=chartMessage.config,paper=chartMessage.getFromEnv(\"paper\"),message,visible=config.visible,messageGroup,graphics,isImage=config.isImage=config.chartMessageType===\"image\",link=config.messageURL,attr=isImage?config.chartMessageAttr:(0,_lib.extend2)(config.chartMessageAttr,config.chartMessageStyle);message=chartMessage.getGraphicalElement(\"messageText\");graphics=chartMessage._graphics;messageGroup=chartMessage.getLinkedParent().getChildContainer(\"messageGroup\").show();if(isImage){chartMessage._drawBackground(config.chartMessageAttr,config.chartMessageStyle)}else if(!message&&config.chartMessageType===\"text\"){message=chartMessage.addGraphicalElement(\"messageText\",paper.text(attr,messageGroup))}else{graphics.message=message.attr(attr);visible?message.show():message.hide()}if((message||graphics.message)&&link){attachLink(message||graphics.message,link)}chartMessage._hideOtherMessage(isImage)};_proto._hideOtherMessage=function _hideOtherMessage(isImage){var chartMessage=this,backgroundImage,message,backgroundElement;if(isImage){message=chartMessage.getGraphicalElement(\"messageText\");message&&message.hide()}else{backgroundImage=chartMessage.getGraphicalElement(\"backgroundImage\");backgroundElement=chartMessage.getGraphicalElement(\"backgroundElement\");backgroundImage&&backgroundImage.hide();backgroundElement&&backgroundElement.hide()}};_proto.getType=function getType(){return\"chartMessage\"};return ChartMessage}(_componentInterface.ComponentInterface);var _default=ChartMessage;exports.default=_default;"]},"metadata":{},"sourceType":"script"}