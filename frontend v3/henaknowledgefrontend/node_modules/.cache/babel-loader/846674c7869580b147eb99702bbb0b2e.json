{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _annotationShape = _interopRequireDefault(require(\"./annotation-shape\"));\n\nvar _lib = require(\"@fusioncharts/core/src/lib\");\n\nvar POSITION_BOTTOM = \"bottom\",\n    POSITION_TOP = \"top\",\n    POSITION_MIDDLE = \"middle\",\n    BOLD = \"bold\",\n    DEFAULT_RADIUS = 0,\n    DEFAULT_BORDER_PADDING = 2,\n    DEFAULT_BORDER_THICKNESS = 1,\n    DEFAULT_COLOR = \"#FF0000\",\n    DEFAULT_ALPHA = 100,\n    FULL_ANGLE_DEGREES = 360,\n    RADIAL = \"radial\",\n    DEFAULT_FILL_ANGLE = 0,\n    DEFAULT_FONT_SIZE = 10,\n    ITALIC = \"italic\",\n    NORMAL = \"normal\",\n    TEXT_ALIGN_OPTIONS = {\n  left: \"start\",\n  right: \"end\",\n  center: \"middle\"\n},\n    TEXT_V_ALIGN_OPTIONS = {\n  top: POSITION_BOTTOM,\n  middle: POSITION_MIDDLE,\n  bottom: POSITION_TOP\n},\n    TEXT_ROTATION_OPTIONS = {\n  0: \"0\",\n  1: \"270\",\n  right: \"90\",\n  cw: \"90\",\n  left: \"270\",\n  ccw: \"270\"\n},\n    GRADIENT_UNIT_OBJECT_BBOX = \"objectBoundingBox\",\n    ELEMENT_TYPE_TEXT = \"text\",\n    applyTextBound = function applyTextBound(color, alpha) {\n  if (!color || color === \"none\") {\n    return false;\n  } else if (alpha === 0) {\n    return false;\n  }\n\n  return true;\n};\n\nfunction isValidColor(colorStr) {\n  return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(colorStr) ? colorStr : /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(colorStr) && \"#\" + colorStr;\n}\n\nvar AnnotaionText = function (_AnnotationShape) {\n  (0, _inheritsLoose2.default)(AnnotaionText, _AnnotationShape);\n\n  function AnnotaionText() {\n    return _AnnotationShape.apply(this, arguments) || this;\n  }\n\n  var _proto = AnnotaionText.prototype;\n\n  _proto.getName = function getName() {\n    return ELEMENT_TYPE_TEXT;\n  };\n\n  _proto.configureAttributes = function configureAttributes(rawConfig) {\n    if (rawConfig === void 0) {\n      rawConfig = {};\n    }\n\n    _AnnotationShape.prototype.configureAttributes.call(this, rawConfig);\n\n    var text = this,\n        shapeConfig = text.rawConfig,\n        groupConfig = text.groupConfig;\n    text.config.text = (0, _lib.parseUnsafeString)((0, _lib.pluck)(shapeConfig.text, shapeConfig.label, \"\"));\n    text.config.font = (0, _lib.pluck)(shapeConfig.font, groupConfig.font, \"Verdana, sans\");\n    text.config.fontSize = (0, _lib.pluckFontSize)(shapeConfig.fontSize, groupConfig.fontSize, DEFAULT_FONT_SIZE);\n    text.config.align = (0, _lib.pluck)(TEXT_ALIGN_OPTIONS[shapeConfig.align && shapeConfig.align.toLowerCase()], TEXT_ALIGN_OPTIONS[groupConfig.textAlign && groupConfig.textAlign.toLowerCase()], \"middle\");\n    text.config.vAlign = (0, _lib.pluck)(TEXT_V_ALIGN_OPTIONS[shapeConfig.vAlign && shapeConfig.vAlign.toLowerCase()], TEXT_V_ALIGN_OPTIONS[groupConfig.textVAlign && groupConfig.textVAlign.toLowerCase()], \"middle\");\n    text.config.radius = (0, _lib.pluckNumber)(parseFloat(shapeConfig.radius), DEFAULT_RADIUS);\n    text.config.fontWeight = (0, _lib.pluckNumber)(shapeConfig.bold, 0) ? BOLD : NORMAL;\n    text.config.outlineText = (0, _lib.pluckNumber)(rawConfig.outlineText, 0);\n    text.config.fontStyle = (0, _lib.pluckNumber)(shapeConfig.italic, 0) ? ITALIC : NORMAL;\n    text.config.bgColor = isValidColor(shapeConfig.bgColor) ? shapeConfig.bgColor : \"none\";\n    text.config.borderThickness = (0, _lib.pluckNumber)(parseFloat(text.rawConfig.borderThickness), parseFloat(text.rawConfig.thickness), DEFAULT_BORDER_THICKNESS);\n    text.config.rotateText = (0, _lib.pluck)(shapeConfig.rotateText, groupConfig.rotateText, \"0\");\n    text.config.rotateAngle = TEXT_ROTATION_OPTIONS[text.config.rotateText && text.config.rotateText.toLowerCase()];\n    text.config.wrap = (0, _lib.pluckNumber)(shapeConfig.wrap, groupConfig.wrapText, shapeConfig.wrapHeight, shapeConfig.wrapWidth, 1);\n\n    if (text.config.wrap) {\n      text.config.wrapWidth = (0, _lib.pluckNumber)(shapeConfig.wrapWidth);\n      text.config.wrapHeight = (0, _lib.pluckNumber)(shapeConfig.wrapHeight);\n    }\n\n    text.config.leftMargin = (0, _lib.pluckNumber)(shapeConfig.leftMargin, 0);\n    text.config.elementType = ELEMENT_TYPE_TEXT;\n  };\n\n  _proto.getText = function getText() {\n    var shape = this,\n        conf = shape.config,\n        smartLabel = shape.getFromEnv(\"smartLabel\"),\n        textStr,\n        group = shape.getLinkedParent(),\n        isScaleText = group && group._getConfig(\"scaleText\"),\n        wrapWidth = isScaleText ? shape.getScaledVal(conf.wrapWidth, true) : conf.wrapWidth,\n        wrapHeight = isScaleText ? shape.getScaledVal(conf.wrapHeight, false) : conf.wrapHeight,\n        css = {\n      fontStyle: conf.fontStyle,\n      fontFamily: conf.font,\n      fontWeight: conf.fontWeight,\n      fontSize: conf.fontSize + \"px\",\n      \"text-anchor\": conf.align,\n      \"vertical-align\": conf.vAlign\n    };\n\n    (0, _lib.setLineHeight)(css);\n    smartLabel && smartLabel.setStyle(css);\n    textStr = smartLabel && conf.wrap ? smartLabel.getSmartText(conf.text, wrapWidth, wrapHeight, 0).text : conf.text;\n    return textStr;\n  };\n\n  _proto._getFillColor = function _getFillColor(rawConfig, groupConfig) {\n    var shape = this,\n        shapeType = shape.config.type,\n        colorObj = {\n      color: \"\",\n      alpha: \"\",\n      angle: \"\",\n      ratio: \"\",\n      radialGradient: shapeType === \"circle\" || shapeType === \"arc\"\n    };\n    colorObj.color = rawConfig.fontColor || rawConfig.fillColor || rawConfig.color || groupConfig.color || DEFAULT_COLOR;\n    colorObj.alpha = (0, _lib.pluck)(rawConfig.fillAlpha, parseFloat(rawConfig.alpha), groupConfig.alpha, DEFAULT_ALPHA);\n    colorObj.angle = FULL_ANGLE_DEGREES - (0, _lib.pluckNumber)(rawConfig.fillAngle, DEFAULT_FILL_ANGLE);\n    colorObj.ratio = (0, _lib.pluck)(rawConfig.fillRatio);\n\n    if (rawConfig.fillPattern) {\n      colorObj.radialGradient = rawConfig.fillPattern === RADIAL || (0, _lib.pluckNumber)(rawConfig.fillPattern);\n    }\n\n    if (colorObj.radialGradient) {\n      colorObj.gradientUnits = GRADIENT_UNIT_OBJECT_BBOX;\n      colorObj.cx = .5;\n      colorObj.cy = .5;\n      colorObj.fx = .5;\n      colorObj.fy = .5;\n    }\n\n    shape.config.rawColor = colorObj.color;\n    shape.config.rawAlpha = colorObj.alpha;\n    shape.config.rawAngle = colorObj.angle;\n    shape.config.rawFillPattern = colorObj.radialGradient ? \"radial\" : \"linear\";\n    shape.config.rawRatio = colorObj.ratio;\n    return (0, _lib.toRaphaelColor)(colorObj);\n  };\n\n  _proto.updateAttr = function updateAttr() {\n    var text = this,\n        config = text.config,\n        attr = config.calculatedAttrs,\n        x = (0, _lib.pluckNumber)(attr.x, text.getScaledVal(config.x, true)),\n        y = (0, _lib.pluckNumber)(attr.y, text.getScaledVal(config.y, true)),\n        transform;\n\n    if (config.rotateText !== \"0\") {\n      transform = (0, _lib.getSuggestiveRotation)(parseFloat(config.rotateAngle), x, y);\n    }\n\n    text._setConfig(\"attr\", {\n      x: x,\n      y: y,\n      transform: transform\n    });\n  };\n\n  _proto._getAnnotationAttrs = function _getAnnotationAttrs() {\n    var text = this,\n        config = text.config,\n        attr = text._getConfig(\"attr\") || {},\n        x = text.getScaledVal(config.x, true),\n        y = text.getScaledVal(config.y, false);\n    attr.x = (typeof attr.x === \"undefined\" ? x : attr.x) + config.leftMargin / 2;\n    attr.y = typeof attr.y === \"undefined\" ? y : attr.y;\n    attr.text = text.getText();\n    attr.fill = config.color;\n    attr.outlineText = config.outlineText;\n\n    if (attr.text && (applyTextBound(text.rawConfig.borderColor, text.rawConfig.borderAlpha) || text.rawConfig.bgColor)) {\n      attr[\"text-bound\"] = [(0, _lib.toRaphaelColor)(config.bgColor), config.borderColor, config.borderThickness, DEFAULT_BORDER_PADDING, config.radius, config.dashArrayStr];\n    } else {\n      attr[\"text-bound\"] = [];\n    }\n\n    attr[\"font-style\"] = config.fontStyle;\n    attr[\"font-weight\"] = config.fontWeight;\n    attr[\"font-family\"] = config.font;\n    attr[\"font-size\"] = text.getScaledFont(config.fontSize);\n    attr[\"text-anchor\"] = config.align;\n    attr[\"vertical-align\"] = config.vAlign;\n\n    if (config.rotateText !== \"0\") {\n      attr.transform = attr.transform || (0, _lib.getSuggestiveRotation)(parseFloat(config.rotateAngle), x, y);\n    }\n\n    return attr;\n  };\n\n  return AnnotaionText;\n}(_annotationShape.default);\n\nvar _default = AnnotaionText;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/features/src/annotation/shapes/annotation-text.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_inheritsLoose2","_annotationShape","_lib","POSITION_BOTTOM","POSITION_TOP","POSITION_MIDDLE","BOLD","DEFAULT_RADIUS","DEFAULT_BORDER_PADDING","DEFAULT_BORDER_THICKNESS","DEFAULT_COLOR","DEFAULT_ALPHA","FULL_ANGLE_DEGREES","RADIAL","DEFAULT_FILL_ANGLE","DEFAULT_FONT_SIZE","ITALIC","NORMAL","TEXT_ALIGN_OPTIONS","left","right","center","TEXT_V_ALIGN_OPTIONS","top","middle","bottom","TEXT_ROTATION_OPTIONS","cw","ccw","GRADIENT_UNIT_OBJECT_BBOX","ELEMENT_TYPE_TEXT","applyTextBound","color","alpha","isValidColor","colorStr","test","AnnotaionText","_AnnotationShape","apply","arguments","_proto","prototype","getName","configureAttributes","rawConfig","call","text","shapeConfig","groupConfig","config","parseUnsafeString","pluck","label","font","fontSize","pluckFontSize","align","toLowerCase","textAlign","vAlign","textVAlign","radius","pluckNumber","parseFloat","fontWeight","bold","outlineText","fontStyle","italic","bgColor","borderThickness","thickness","rotateText","rotateAngle","wrap","wrapText","wrapHeight","wrapWidth","leftMargin","elementType","getText","shape","conf","smartLabel","getFromEnv","textStr","group","getLinkedParent","isScaleText","_getConfig","getScaledVal","css","fontFamily","setLineHeight","setStyle","getSmartText","_getFillColor","shapeType","type","colorObj","angle","ratio","radialGradient","fontColor","fillColor","fillAlpha","fillAngle","fillRatio","fillPattern","gradientUnits","cx","cy","fx","fy","rawColor","rawAlpha","rawAngle","rawFillPattern","rawRatio","toRaphaelColor","updateAttr","attr","calculatedAttrs","x","y","transform","getSuggestiveRotation","_setConfig","_getAnnotationAttrs","fill","borderColor","borderAlpha","dashArrayStr","getScaledFont","_default"],"mappings":"AAAA;;AAAa,IAAIA,sBAAsB,GAACC,OAAO,CAAC,8CAAD,CAAlC;;AAAmFC,OAAO,CAACC,UAAR,GAAmB,IAAnB;AAAwBD,OAAO,CAACE,OAAR,GAAgB,KAAK,CAArB;;AAAuB,IAAIC,eAAe,GAACL,sBAAsB,CAACC,OAAO,CAAC,sCAAD,CAAR,CAA1C;;AAA4F,IAAIK,gBAAgB,GAACN,sBAAsB,CAACC,OAAO,CAAC,oBAAD,CAAR,CAA3C;;AAA2E,IAAIM,IAAI,GAACN,OAAO,CAAC,4BAAD,CAAhB;;AAA+C,IAAIO,eAAe,GAAC,QAApB;AAAA,IAA6BC,YAAY,GAAC,KAA1C;AAAA,IAAgDC,eAAe,GAAC,QAAhE;AAAA,IAAyEC,IAAI,GAAC,MAA9E;AAAA,IAAqFC,cAAc,GAAC,CAApG;AAAA,IAAsGC,sBAAsB,GAAC,CAA7H;AAAA,IAA+HC,wBAAwB,GAAC,CAAxJ;AAAA,IAA0JC,aAAa,GAAC,SAAxK;AAAA,IAAkLC,aAAa,GAAC,GAAhM;AAAA,IAAoMC,kBAAkB,GAAC,GAAvN;AAAA,IAA2NC,MAAM,GAAC,QAAlO;AAAA,IAA2OC,kBAAkB,GAAC,CAA9P;AAAA,IAAgQC,iBAAiB,GAAC,EAAlR;AAAA,IAAqRC,MAAM,GAAC,QAA5R;AAAA,IAAqSC,MAAM,GAAC,QAA5S;AAAA,IAAqTC,kBAAkB,GAAC;AAACC,EAAAA,IAAI,EAAC,OAAN;AAAcC,EAAAA,KAAK,EAAC,KAApB;AAA0BC,EAAAA,MAAM,EAAC;AAAjC,CAAxU;AAAA,IAAmXC,oBAAoB,GAAC;AAACC,EAAAA,GAAG,EAACpB,eAAL;AAAqBqB,EAAAA,MAAM,EAACnB,eAA5B;AAA4CoB,EAAAA,MAAM,EAACrB;AAAnD,CAAxY;AAAA,IAAycsB,qBAAqB,GAAC;AAAC,KAAE,GAAH;AAAO,KAAE,KAAT;AAAeN,EAAAA,KAAK,EAAC,IAArB;AAA0BO,EAAAA,EAAE,EAAC,IAA7B;AAAkCR,EAAAA,IAAI,EAAC,KAAvC;AAA6CS,EAAAA,GAAG,EAAC;AAAjD,CAA/d;AAAA,IAAuhBC,yBAAyB,GAAC,mBAAjjB;AAAA,IAAqkBC,iBAAiB,GAAC,MAAvlB;AAAA,IAA8lBC,cAAc,GAAC,SAASA,cAAT,CAAwBC,KAAxB,EAA8BC,KAA9B,EAAoC;AAAC,MAAG,CAACD,KAAD,IAAQA,KAAK,KAAG,MAAnB,EAA0B;AAAC,WAAO,KAAP;AAAa,GAAxC,MAA6C,IAAGC,KAAK,KAAG,CAAX,EAAa;AAAC,WAAO,KAAP;AAAa;;AAAA,SAAO,IAAP;AAAY,CAAtuB;;AAAuuB,SAASC,YAAT,CAAsBC,QAAtB,EAA+B;AAAC,SAAM,qCAAqCC,IAArC,CAA0CD,QAA1C,IAAoDA,QAApD,GAA6D,mCAAmCC,IAAnC,CAAwCD,QAAxC,KAAmD,MAAIA,QAA1H;AAAmI;;AAAA,IAAIE,aAAa,GAAC,UAASC,gBAAT,EAA0B;AAAC,GAAC,GAAEtC,eAAe,CAACD,OAAnB,EAA4BsC,aAA5B,EAA0CC,gBAA1C;;AAA4D,WAASD,aAAT,GAAwB;AAAC,WAAOC,gBAAgB,CAACC,KAAjB,CAAuB,IAAvB,EAA4BC,SAA5B,KAAwC,IAA/C;AAAoD;;AAAA,MAAIC,MAAM,GAACJ,aAAa,CAACK,SAAzB;;AAAmCD,EAAAA,MAAM,CAACE,OAAP,GAAe,SAASA,OAAT,GAAkB;AAAC,WAAOb,iBAAP;AAAyB,GAA3D;;AAA4DW,EAAAA,MAAM,CAACG,mBAAP,GAA2B,SAASA,mBAAT,CAA6BC,SAA7B,EAAuC;AAAC,QAAGA,SAAS,KAAG,KAAK,CAApB,EAAsB;AAACA,MAAAA,SAAS,GAAC,EAAV;AAAa;;AAAAP,IAAAA,gBAAgB,CAACI,SAAjB,CAA2BE,mBAA3B,CAA+CE,IAA/C,CAAoD,IAApD,EAAyDD,SAAzD;;AAAoE,QAAIE,IAAI,GAAC,IAAT;AAAA,QAAcC,WAAW,GAACD,IAAI,CAACF,SAA/B;AAAA,QAAyCI,WAAW,GAACF,IAAI,CAACE,WAA1D;AAAsEF,IAAAA,IAAI,CAACG,MAAL,CAAYH,IAAZ,GAAiB,CAAC,GAAE7C,IAAI,CAACiD,iBAAR,EAA2B,CAAC,GAAEjD,IAAI,CAACkD,KAAR,EAAeJ,WAAW,CAACD,IAA3B,EAAgCC,WAAW,CAACK,KAA5C,EAAkD,EAAlD,CAA3B,CAAjB;AAAmGN,IAAAA,IAAI,CAACG,MAAL,CAAYI,IAAZ,GAAiB,CAAC,GAAEpD,IAAI,CAACkD,KAAR,EAAeJ,WAAW,CAACM,IAA3B,EAAgCL,WAAW,CAACK,IAA5C,EAAiD,eAAjD,CAAjB;AAAmFP,IAAAA,IAAI,CAACG,MAAL,CAAYK,QAAZ,GAAqB,CAAC,GAAErD,IAAI,CAACsD,aAAR,EAAuBR,WAAW,CAACO,QAAnC,EAA4CN,WAAW,CAACM,QAAxD,EAAiExC,iBAAjE,CAArB;AAAyGgC,IAAAA,IAAI,CAACG,MAAL,CAAYO,KAAZ,GAAkB,CAAC,GAAEvD,IAAI,CAACkD,KAAR,EAAelC,kBAAkB,CAAC8B,WAAW,CAACS,KAAZ,IAAmBT,WAAW,CAACS,KAAZ,CAAkBC,WAAlB,EAApB,CAAjC,EAAsFxC,kBAAkB,CAAC+B,WAAW,CAACU,SAAZ,IAAuBV,WAAW,CAACU,SAAZ,CAAsBD,WAAtB,EAAxB,CAAxG,EAAqK,QAArK,CAAlB;AAAiMX,IAAAA,IAAI,CAACG,MAAL,CAAYU,MAAZ,GAAmB,CAAC,GAAE1D,IAAI,CAACkD,KAAR,EAAe9B,oBAAoB,CAAC0B,WAAW,CAACY,MAAZ,IAAoBZ,WAAW,CAACY,MAAZ,CAAmBF,WAAnB,EAArB,CAAnC,EAA0FpC,oBAAoB,CAAC2B,WAAW,CAACY,UAAZ,IAAwBZ,WAAW,CAACY,UAAZ,CAAuBH,WAAvB,EAAzB,CAA9G,EAA6K,QAA7K,CAAnB;AAA0MX,IAAAA,IAAI,CAACG,MAAL,CAAYY,MAAZ,GAAmB,CAAC,GAAE5D,IAAI,CAAC6D,WAAR,EAAqBC,UAAU,CAAChB,WAAW,CAACc,MAAb,CAA/B,EAAoDvD,cAApD,CAAnB;AAAuFwC,IAAAA,IAAI,CAACG,MAAL,CAAYe,UAAZ,GAAuB,CAAC,GAAE/D,IAAI,CAAC6D,WAAR,EAAqBf,WAAW,CAACkB,IAAjC,EAAsC,CAAtC,IAAyC5D,IAAzC,GAA8CW,MAArE;AAA4E8B,IAAAA,IAAI,CAACG,MAAL,CAAYiB,WAAZ,GAAwB,CAAC,GAAEjE,IAAI,CAAC6D,WAAR,EAAqBlB,SAAS,CAACsB,WAA/B,EAA2C,CAA3C,CAAxB;AAAsEpB,IAAAA,IAAI,CAACG,MAAL,CAAYkB,SAAZ,GAAsB,CAAC,GAAElE,IAAI,CAAC6D,WAAR,EAAqBf,WAAW,CAACqB,MAAjC,EAAwC,CAAxC,IAA2CrD,MAA3C,GAAkDC,MAAxE;AAA+E8B,IAAAA,IAAI,CAACG,MAAL,CAAYoB,OAAZ,GAAoBpC,YAAY,CAACc,WAAW,CAACsB,OAAb,CAAZ,GAAkCtB,WAAW,CAACsB,OAA9C,GAAsD,MAA1E;AAAiFvB,IAAAA,IAAI,CAACG,MAAL,CAAYqB,eAAZ,GAA4B,CAAC,GAAErE,IAAI,CAAC6D,WAAR,EAAqBC,UAAU,CAACjB,IAAI,CAACF,SAAL,CAAe0B,eAAhB,CAA/B,EAAgEP,UAAU,CAACjB,IAAI,CAACF,SAAL,CAAe2B,SAAhB,CAA1E,EAAqG/D,wBAArG,CAA5B;AAA2JsC,IAAAA,IAAI,CAACG,MAAL,CAAYuB,UAAZ,GAAuB,CAAC,GAAEvE,IAAI,CAACkD,KAAR,EAAeJ,WAAW,CAACyB,UAA3B,EAAsCxB,WAAW,CAACwB,UAAlD,EAA6D,GAA7D,CAAvB;AAAyF1B,IAAAA,IAAI,CAACG,MAAL,CAAYwB,WAAZ,GAAwBhD,qBAAqB,CAACqB,IAAI,CAACG,MAAL,CAAYuB,UAAZ,IAAwB1B,IAAI,CAACG,MAAL,CAAYuB,UAAZ,CAAuBf,WAAvB,EAAzB,CAA7C;AAA4GX,IAAAA,IAAI,CAACG,MAAL,CAAYyB,IAAZ,GAAiB,CAAC,GAAEzE,IAAI,CAAC6D,WAAR,EAAqBf,WAAW,CAAC2B,IAAjC,EAAsC1B,WAAW,CAAC2B,QAAlD,EAA2D5B,WAAW,CAAC6B,UAAvE,EAAkF7B,WAAW,CAAC8B,SAA9F,EAAwG,CAAxG,CAAjB;;AAA4H,QAAG/B,IAAI,CAACG,MAAL,CAAYyB,IAAf,EAAoB;AAAC5B,MAAAA,IAAI,CAACG,MAAL,CAAY4B,SAAZ,GAAsB,CAAC,GAAE5E,IAAI,CAAC6D,WAAR,EAAqBf,WAAW,CAAC8B,SAAjC,CAAtB;AAAkE/B,MAAAA,IAAI,CAACG,MAAL,CAAY2B,UAAZ,GAAuB,CAAC,GAAE3E,IAAI,CAAC6D,WAAR,EAAqBf,WAAW,CAAC6B,UAAjC,CAAvB;AAAoE;;AAAA9B,IAAAA,IAAI,CAACG,MAAL,CAAY6B,UAAZ,GAAuB,CAAC,GAAE7E,IAAI,CAAC6D,WAAR,EAAqBf,WAAW,CAAC+B,UAAjC,EAA4C,CAA5C,CAAvB;AAAsEhC,IAAAA,IAAI,CAACG,MAAL,CAAY8B,WAAZ,GAAwBlD,iBAAxB;AAA0C,GAA3gE;;AAA4gEW,EAAAA,MAAM,CAACwC,OAAP,GAAe,SAASA,OAAT,GAAkB;AAAC,QAAIC,KAAK,GAAC,IAAV;AAAA,QAAeC,IAAI,GAACD,KAAK,CAAChC,MAA1B;AAAA,QAAiCkC,UAAU,GAACF,KAAK,CAACG,UAAN,CAAiB,YAAjB,CAA5C;AAAA,QAA2EC,OAA3E;AAAA,QAAmFC,KAAK,GAACL,KAAK,CAACM,eAAN,EAAzF;AAAA,QAAiHC,WAAW,GAACF,KAAK,IAAEA,KAAK,CAACG,UAAN,CAAiB,WAAjB,CAApI;AAAA,QAAkKZ,SAAS,GAACW,WAAW,GAACP,KAAK,CAACS,YAAN,CAAmBR,IAAI,CAACL,SAAxB,EAAkC,IAAlC,CAAD,GAAyCK,IAAI,CAACL,SAArO;AAAA,QAA+OD,UAAU,GAACY,WAAW,GAACP,KAAK,CAACS,YAAN,CAAmBR,IAAI,CAACN,UAAxB,EAAmC,KAAnC,CAAD,GAA2CM,IAAI,CAACN,UAArT;AAAA,QAAgUe,GAAG,GAAC;AAACxB,MAAAA,SAAS,EAACe,IAAI,CAACf,SAAhB;AAA0ByB,MAAAA,UAAU,EAACV,IAAI,CAAC7B,IAA1C;AAA+CW,MAAAA,UAAU,EAACkB,IAAI,CAAClB,UAA/D;AAA0EV,MAAAA,QAAQ,EAAC4B,IAAI,CAAC5B,QAAL,GAAc,IAAjG;AAAsG,qBAAc4B,IAAI,CAAC1B,KAAzH;AAA+H,wBAAiB0B,IAAI,CAACvB;AAArJ,KAApU;;AAAie,KAAC,GAAE1D,IAAI,CAAC4F,aAAR,EAAuBF,GAAvB;AAA4BR,IAAAA,UAAU,IAAEA,UAAU,CAACW,QAAX,CAAoBH,GAApB,CAAZ;AAAqCN,IAAAA,OAAO,GAACF,UAAU,IAAED,IAAI,CAACR,IAAjB,GAAsBS,UAAU,CAACY,YAAX,CAAwBb,IAAI,CAACpC,IAA7B,EAAkC+B,SAAlC,EAA4CD,UAA5C,EAAuD,CAAvD,EAA0D9B,IAAhF,GAAqFoC,IAAI,CAACpC,IAAlG;AAAuG,WAAOuC,OAAP;AAAe,GAA1rB;;AAA2rB7C,EAAAA,MAAM,CAACwD,aAAP,GAAqB,SAASA,aAAT,CAAuBpD,SAAvB,EAAiCI,WAAjC,EAA6C;AAAC,QAAIiC,KAAK,GAAC,IAAV;AAAA,QAAegB,SAAS,GAAChB,KAAK,CAAChC,MAAN,CAAaiD,IAAtC;AAAA,QAA2CC,QAAQ,GAAC;AAACpE,MAAAA,KAAK,EAAC,EAAP;AAAUC,MAAAA,KAAK,EAAC,EAAhB;AAAmBoE,MAAAA,KAAK,EAAC,EAAzB;AAA4BC,MAAAA,KAAK,EAAC,EAAlC;AAAqCC,MAAAA,cAAc,EAACL,SAAS,KAAG,QAAZ,IAAsBA,SAAS,KAAG;AAAtF,KAApD;AAAiJE,IAAAA,QAAQ,CAACpE,KAAT,GAAea,SAAS,CAAC2D,SAAV,IAAqB3D,SAAS,CAAC4D,SAA/B,IAA0C5D,SAAS,CAACb,KAApD,IAA2DiB,WAAW,CAACjB,KAAvE,IAA8EtB,aAA7F;AAA2G0F,IAAAA,QAAQ,CAACnE,KAAT,GAAe,CAAC,GAAE/B,IAAI,CAACkD,KAAR,EAAeP,SAAS,CAAC6D,SAAzB,EAAmC1C,UAAU,CAACnB,SAAS,CAACZ,KAAX,CAA7C,EAA+DgB,WAAW,CAAChB,KAA3E,EAAiFtB,aAAjF,CAAf;AAA+GyF,IAAAA,QAAQ,CAACC,KAAT,GAAezF,kBAAkB,GAAC,CAAC,GAAEV,IAAI,CAAC6D,WAAR,EAAqBlB,SAAS,CAAC8D,SAA/B,EAAyC7F,kBAAzC,CAAlC;AAA+FsF,IAAAA,QAAQ,CAACE,KAAT,GAAe,CAAC,GAAEpG,IAAI,CAACkD,KAAR,EAAeP,SAAS,CAAC+D,SAAzB,CAAf;;AAAmD,QAAG/D,SAAS,CAACgE,WAAb,EAAyB;AAACT,MAAAA,QAAQ,CAACG,cAAT,GAAwB1D,SAAS,CAACgE,WAAV,KAAwBhG,MAAxB,IAAgC,CAAC,GAAEX,IAAI,CAAC6D,WAAR,EAAqBlB,SAAS,CAACgE,WAA/B,CAAxD;AAAoG;;AAAA,QAAGT,QAAQ,CAACG,cAAZ,EAA2B;AAACH,MAAAA,QAAQ,CAACU,aAAT,GAAuBjF,yBAAvB;AAAiDuE,MAAAA,QAAQ,CAACW,EAAT,GAAY,EAAZ;AAAeX,MAAAA,QAAQ,CAACY,EAAT,GAAY,EAAZ;AAAeZ,MAAAA,QAAQ,CAACa,EAAT,GAAY,EAAZ;AAAeb,MAAAA,QAAQ,CAACc,EAAT,GAAY,EAAZ;AAAe;;AAAAhC,IAAAA,KAAK,CAAChC,MAAN,CAAaiE,QAAb,GAAsBf,QAAQ,CAACpE,KAA/B;AAAqCkD,IAAAA,KAAK,CAAChC,MAAN,CAAakE,QAAb,GAAsBhB,QAAQ,CAACnE,KAA/B;AAAqCiD,IAAAA,KAAK,CAAChC,MAAN,CAAamE,QAAb,GAAsBjB,QAAQ,CAACC,KAA/B;AAAqCnB,IAAAA,KAAK,CAAChC,MAAN,CAAaoE,cAAb,GAA4BlB,QAAQ,CAACG,cAAT,GAAwB,QAAxB,GAAiC,QAA7D;AAAsErB,IAAAA,KAAK,CAAChC,MAAN,CAAaqE,QAAb,GAAsBnB,QAAQ,CAACE,KAA/B;AAAqC,WAAM,CAAC,GAAEpG,IAAI,CAACsH,cAAR,EAAwBpB,QAAxB,CAAN;AAAwC,GAAzkC;;AAA0kC3D,EAAAA,MAAM,CAACgF,UAAP,GAAkB,SAASA,UAAT,GAAqB;AAAC,QAAI1E,IAAI,GAAC,IAAT;AAAA,QAAcG,MAAM,GAACH,IAAI,CAACG,MAA1B;AAAA,QAAiCwE,IAAI,GAACxE,MAAM,CAACyE,eAA7C;AAAA,QAA6DC,CAAC,GAAC,CAAC,GAAE1H,IAAI,CAAC6D,WAAR,EAAqB2D,IAAI,CAACE,CAA1B,EAA4B7E,IAAI,CAAC4C,YAAL,CAAkBzC,MAAM,CAAC0E,CAAzB,EAA2B,IAA3B,CAA5B,CAA/D;AAAA,QAA6HC,CAAC,GAAC,CAAC,GAAE3H,IAAI,CAAC6D,WAAR,EAAqB2D,IAAI,CAACG,CAA1B,EAA4B9E,IAAI,CAAC4C,YAAL,CAAkBzC,MAAM,CAAC2E,CAAzB,EAA2B,IAA3B,CAA5B,CAA/H;AAAA,QAA6LC,SAA7L;;AAAuM,QAAG5E,MAAM,CAACuB,UAAP,KAAoB,GAAvB,EAA2B;AAACqD,MAAAA,SAAS,GAAC,CAAC,GAAE5H,IAAI,CAAC6H,qBAAR,EAA+B/D,UAAU,CAACd,MAAM,CAACwB,WAAR,CAAzC,EAA8DkD,CAA9D,EAAgEC,CAAhE,CAAV;AAA6E;;AAAA9E,IAAAA,IAAI,CAACiF,UAAL,CAAgB,MAAhB,EAAuB;AAACJ,MAAAA,CAAC,EAACA,CAAH;AAAKC,MAAAA,CAAC,EAACA,CAAP;AAASC,MAAAA,SAAS,EAACA;AAAnB,KAAvB;AAAsD,GAA9Y;;AAA+YrF,EAAAA,MAAM,CAACwF,mBAAP,GAA2B,SAASA,mBAAT,GAA8B;AAAC,QAAIlF,IAAI,GAAC,IAAT;AAAA,QAAcG,MAAM,GAACH,IAAI,CAACG,MAA1B;AAAA,QAAiCwE,IAAI,GAAC3E,IAAI,CAAC2C,UAAL,CAAgB,MAAhB,KAAyB,EAA/D;AAAA,QAAkEkC,CAAC,GAAC7E,IAAI,CAAC4C,YAAL,CAAkBzC,MAAM,CAAC0E,CAAzB,EAA2B,IAA3B,CAApE;AAAA,QAAqGC,CAAC,GAAC9E,IAAI,CAAC4C,YAAL,CAAkBzC,MAAM,CAAC2E,CAAzB,EAA2B,KAA3B,CAAvG;AAAyIH,IAAAA,IAAI,CAACE,CAAL,GAAO,CAAC,OAAOF,IAAI,CAACE,CAAZ,KAAgB,WAAhB,GAA4BA,CAA5B,GAA8BF,IAAI,CAACE,CAApC,IAAuC1E,MAAM,CAAC6B,UAAP,GAAkB,CAAhE;AAAkE2C,IAAAA,IAAI,CAACG,CAAL,GAAO,OAAOH,IAAI,CAACG,CAAZ,KAAgB,WAAhB,GAA4BA,CAA5B,GAA8BH,IAAI,CAACG,CAA1C;AAA4CH,IAAAA,IAAI,CAAC3E,IAAL,GAAUA,IAAI,CAACkC,OAAL,EAAV;AAAyByC,IAAAA,IAAI,CAACQ,IAAL,GAAUhF,MAAM,CAAClB,KAAjB;AAAuB0F,IAAAA,IAAI,CAACvD,WAAL,GAAiBjB,MAAM,CAACiB,WAAxB;;AAAoC,QAAGuD,IAAI,CAAC3E,IAAL,KAAYhB,cAAc,CAACgB,IAAI,CAACF,SAAL,CAAesF,WAAhB,EAA4BpF,IAAI,CAACF,SAAL,CAAeuF,WAA3C,CAAd,IAAuErF,IAAI,CAACF,SAAL,CAAeyB,OAAlG,CAAH,EAA8G;AAACoD,MAAAA,IAAI,CAAC,YAAD,CAAJ,GAAmB,CAAC,CAAC,GAAExH,IAAI,CAACsH,cAAR,EAAwBtE,MAAM,CAACoB,OAA/B,CAAD,EAAyCpB,MAAM,CAACiF,WAAhD,EAA4DjF,MAAM,CAACqB,eAAnE,EAAmF/D,sBAAnF,EAA0G0C,MAAM,CAACY,MAAjH,EAAwHZ,MAAM,CAACmF,YAA/H,CAAnB;AAAgK,KAA/Q,MAAmR;AAACX,MAAAA,IAAI,CAAC,YAAD,CAAJ,GAAmB,EAAnB;AAAsB;;AAAAA,IAAAA,IAAI,CAAC,YAAD,CAAJ,GAAmBxE,MAAM,CAACkB,SAA1B;AAAoCsD,IAAAA,IAAI,CAAC,aAAD,CAAJ,GAAoBxE,MAAM,CAACe,UAA3B;AAAsCyD,IAAAA,IAAI,CAAC,aAAD,CAAJ,GAAoBxE,MAAM,CAACI,IAA3B;AAAgCoE,IAAAA,IAAI,CAAC,WAAD,CAAJ,GAAkB3E,IAAI,CAACuF,aAAL,CAAmBpF,MAAM,CAACK,QAA1B,CAAlB;AAAsDmE,IAAAA,IAAI,CAAC,aAAD,CAAJ,GAAoBxE,MAAM,CAACO,KAA3B;AAAiCiE,IAAAA,IAAI,CAAC,gBAAD,CAAJ,GAAuBxE,MAAM,CAACU,MAA9B;;AAAqC,QAAGV,MAAM,CAACuB,UAAP,KAAoB,GAAvB,EAA2B;AAACiD,MAAAA,IAAI,CAACI,SAAL,GAAeJ,IAAI,CAACI,SAAL,IAAgB,CAAC,GAAE5H,IAAI,CAAC6H,qBAAR,EAA+B/D,UAAU,CAACd,MAAM,CAACwB,WAAR,CAAzC,EAA8DkD,CAA9D,EAAgEC,CAAhE,CAA/B;AAAkG;;AAAA,WAAOH,IAAP;AAAY,GAA/hC;;AAAgiC,SAAOrF,aAAP;AAAqB,CAAx9K,CAAy9KpC,gBAAgB,CAACF,OAA1+K,CAAlB;;AAAqgL,IAAIwI,QAAQ,GAAClG,aAAb;AAA2BxC,OAAO,CAACE,OAAR,GAAgBwI,QAAhB","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _annotationShape=_interopRequireDefault(require(\"./annotation-shape\"));var _lib=require(\"@fusioncharts/core/src/lib\");var POSITION_BOTTOM=\"bottom\",POSITION_TOP=\"top\",POSITION_MIDDLE=\"middle\",BOLD=\"bold\",DEFAULT_RADIUS=0,DEFAULT_BORDER_PADDING=2,DEFAULT_BORDER_THICKNESS=1,DEFAULT_COLOR=\"#FF0000\",DEFAULT_ALPHA=100,FULL_ANGLE_DEGREES=360,RADIAL=\"radial\",DEFAULT_FILL_ANGLE=0,DEFAULT_FONT_SIZE=10,ITALIC=\"italic\",NORMAL=\"normal\",TEXT_ALIGN_OPTIONS={left:\"start\",right:\"end\",center:\"middle\"},TEXT_V_ALIGN_OPTIONS={top:POSITION_BOTTOM,middle:POSITION_MIDDLE,bottom:POSITION_TOP},TEXT_ROTATION_OPTIONS={0:\"0\",1:\"270\",right:\"90\",cw:\"90\",left:\"270\",ccw:\"270\"},GRADIENT_UNIT_OBJECT_BBOX=\"objectBoundingBox\",ELEMENT_TYPE_TEXT=\"text\",applyTextBound=function applyTextBound(color,alpha){if(!color||color===\"none\"){return false}else if(alpha===0){return false}return true};function isValidColor(colorStr){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(colorStr)?colorStr:/(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(colorStr)&&\"#\"+colorStr}var AnnotaionText=function(_AnnotationShape){(0,_inheritsLoose2.default)(AnnotaionText,_AnnotationShape);function AnnotaionText(){return _AnnotationShape.apply(this,arguments)||this}var _proto=AnnotaionText.prototype;_proto.getName=function getName(){return ELEMENT_TYPE_TEXT};_proto.configureAttributes=function configureAttributes(rawConfig){if(rawConfig===void 0){rawConfig={}}_AnnotationShape.prototype.configureAttributes.call(this,rawConfig);var text=this,shapeConfig=text.rawConfig,groupConfig=text.groupConfig;text.config.text=(0,_lib.parseUnsafeString)((0,_lib.pluck)(shapeConfig.text,shapeConfig.label,\"\"));text.config.font=(0,_lib.pluck)(shapeConfig.font,groupConfig.font,\"Verdana, sans\");text.config.fontSize=(0,_lib.pluckFontSize)(shapeConfig.fontSize,groupConfig.fontSize,DEFAULT_FONT_SIZE);text.config.align=(0,_lib.pluck)(TEXT_ALIGN_OPTIONS[shapeConfig.align&&shapeConfig.align.toLowerCase()],TEXT_ALIGN_OPTIONS[groupConfig.textAlign&&groupConfig.textAlign.toLowerCase()],\"middle\");text.config.vAlign=(0,_lib.pluck)(TEXT_V_ALIGN_OPTIONS[shapeConfig.vAlign&&shapeConfig.vAlign.toLowerCase()],TEXT_V_ALIGN_OPTIONS[groupConfig.textVAlign&&groupConfig.textVAlign.toLowerCase()],\"middle\");text.config.radius=(0,_lib.pluckNumber)(parseFloat(shapeConfig.radius),DEFAULT_RADIUS);text.config.fontWeight=(0,_lib.pluckNumber)(shapeConfig.bold,0)?BOLD:NORMAL;text.config.outlineText=(0,_lib.pluckNumber)(rawConfig.outlineText,0);text.config.fontStyle=(0,_lib.pluckNumber)(shapeConfig.italic,0)?ITALIC:NORMAL;text.config.bgColor=isValidColor(shapeConfig.bgColor)?shapeConfig.bgColor:\"none\";text.config.borderThickness=(0,_lib.pluckNumber)(parseFloat(text.rawConfig.borderThickness),parseFloat(text.rawConfig.thickness),DEFAULT_BORDER_THICKNESS);text.config.rotateText=(0,_lib.pluck)(shapeConfig.rotateText,groupConfig.rotateText,\"0\");text.config.rotateAngle=TEXT_ROTATION_OPTIONS[text.config.rotateText&&text.config.rotateText.toLowerCase()];text.config.wrap=(0,_lib.pluckNumber)(shapeConfig.wrap,groupConfig.wrapText,shapeConfig.wrapHeight,shapeConfig.wrapWidth,1);if(text.config.wrap){text.config.wrapWidth=(0,_lib.pluckNumber)(shapeConfig.wrapWidth);text.config.wrapHeight=(0,_lib.pluckNumber)(shapeConfig.wrapHeight)}text.config.leftMargin=(0,_lib.pluckNumber)(shapeConfig.leftMargin,0);text.config.elementType=ELEMENT_TYPE_TEXT};_proto.getText=function getText(){var shape=this,conf=shape.config,smartLabel=shape.getFromEnv(\"smartLabel\"),textStr,group=shape.getLinkedParent(),isScaleText=group&&group._getConfig(\"scaleText\"),wrapWidth=isScaleText?shape.getScaledVal(conf.wrapWidth,true):conf.wrapWidth,wrapHeight=isScaleText?shape.getScaledVal(conf.wrapHeight,false):conf.wrapHeight,css={fontStyle:conf.fontStyle,fontFamily:conf.font,fontWeight:conf.fontWeight,fontSize:conf.fontSize+\"px\",\"text-anchor\":conf.align,\"vertical-align\":conf.vAlign};(0,_lib.setLineHeight)(css);smartLabel&&smartLabel.setStyle(css);textStr=smartLabel&&conf.wrap?smartLabel.getSmartText(conf.text,wrapWidth,wrapHeight,0).text:conf.text;return textStr};_proto._getFillColor=function _getFillColor(rawConfig,groupConfig){var shape=this,shapeType=shape.config.type,colorObj={color:\"\",alpha:\"\",angle:\"\",ratio:\"\",radialGradient:shapeType===\"circle\"||shapeType===\"arc\"};colorObj.color=rawConfig.fontColor||rawConfig.fillColor||rawConfig.color||groupConfig.color||DEFAULT_COLOR;colorObj.alpha=(0,_lib.pluck)(rawConfig.fillAlpha,parseFloat(rawConfig.alpha),groupConfig.alpha,DEFAULT_ALPHA);colorObj.angle=FULL_ANGLE_DEGREES-(0,_lib.pluckNumber)(rawConfig.fillAngle,DEFAULT_FILL_ANGLE);colorObj.ratio=(0,_lib.pluck)(rawConfig.fillRatio);if(rawConfig.fillPattern){colorObj.radialGradient=rawConfig.fillPattern===RADIAL||(0,_lib.pluckNumber)(rawConfig.fillPattern)}if(colorObj.radialGradient){colorObj.gradientUnits=GRADIENT_UNIT_OBJECT_BBOX;colorObj.cx=.5;colorObj.cy=.5;colorObj.fx=.5;colorObj.fy=.5}shape.config.rawColor=colorObj.color;shape.config.rawAlpha=colorObj.alpha;shape.config.rawAngle=colorObj.angle;shape.config.rawFillPattern=colorObj.radialGradient?\"radial\":\"linear\";shape.config.rawRatio=colorObj.ratio;return(0,_lib.toRaphaelColor)(colorObj)};_proto.updateAttr=function updateAttr(){var text=this,config=text.config,attr=config.calculatedAttrs,x=(0,_lib.pluckNumber)(attr.x,text.getScaledVal(config.x,true)),y=(0,_lib.pluckNumber)(attr.y,text.getScaledVal(config.y,true)),transform;if(config.rotateText!==\"0\"){transform=(0,_lib.getSuggestiveRotation)(parseFloat(config.rotateAngle),x,y)}text._setConfig(\"attr\",{x:x,y:y,transform:transform})};_proto._getAnnotationAttrs=function _getAnnotationAttrs(){var text=this,config=text.config,attr=text._getConfig(\"attr\")||{},x=text.getScaledVal(config.x,true),y=text.getScaledVal(config.y,false);attr.x=(typeof attr.x===\"undefined\"?x:attr.x)+config.leftMargin/2;attr.y=typeof attr.y===\"undefined\"?y:attr.y;attr.text=text.getText();attr.fill=config.color;attr.outlineText=config.outlineText;if(attr.text&&(applyTextBound(text.rawConfig.borderColor,text.rawConfig.borderAlpha)||text.rawConfig.bgColor)){attr[\"text-bound\"]=[(0,_lib.toRaphaelColor)(config.bgColor),config.borderColor,config.borderThickness,DEFAULT_BORDER_PADDING,config.radius,config.dashArrayStr]}else{attr[\"text-bound\"]=[]}attr[\"font-style\"]=config.fontStyle;attr[\"font-weight\"]=config.fontWeight;attr[\"font-family\"]=config.font;attr[\"font-size\"]=text.getScaledFont(config.fontSize);attr[\"text-anchor\"]=config.align;attr[\"vertical-align\"]=config.vAlign;if(config.rotateText!==\"0\"){attr.transform=attr.transform||(0,_lib.getSuggestiveRotation)(parseFloat(config.rotateAngle),x,y)}return attr};return AnnotaionText}(_annotationShape.default);var _default=AnnotaionText;exports.default=_default;"]},"metadata":{},"sourceType":"script"}