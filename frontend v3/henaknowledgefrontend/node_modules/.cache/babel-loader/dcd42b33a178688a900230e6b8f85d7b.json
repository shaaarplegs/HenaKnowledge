{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _annotationShape = _interopRequireDefault(require(\"./annotation-shape\"));\n\nvar _lib = require(\"@fusioncharts/core/src/lib\");\n\nvar ELEMENT_TYPE_IMAGE = \"image\",\n    getComputedImagePosition = function getComputedImagePosition(config) {\n  var height = config.height,\n      width = config.width,\n      vAlign = config.vAlign,\n      align = config.align,\n      x = config.x,\n      y = config.y,\n      position = {\n    x: x,\n    y: y\n  };\n\n  switch (align) {\n    case \"center\":\n      position.x = x - width / 2;\n      break;\n\n    case \"right\":\n      position.x = x - width;\n      break;\n  }\n\n  switch (vAlign) {\n    case \"middle\":\n      position.y = y - height / 2;\n      break;\n\n    case \"bottom\":\n      position.y = y - height;\n      break;\n  }\n\n  return position;\n},\n    imageOnloadListener = function imageOnloadListener(event) {\n  var image = this,\n      rawItemConfig = this.config,\n      loadedImage = event.originalEvent.target,\n      loadedHeight = loadedImage.height,\n      loadedWidth = loadedImage.width,\n      shapeAlign = image._getConfig(\"align\"),\n      shapeVAlign = image._getConfig(\"vAlign\"),\n      xScale = image._getConfig(\"xScale\"),\n      yScale = image._getConfig(\"yScale\"),\n      scaledHeight = loadedHeight * yScale,\n      scaledWidth = loadedWidth * xScale,\n      computedPosition = getComputedImagePosition({\n    x: rawItemConfig.derivedX,\n    y: rawItemConfig.derivedY,\n    height: scaledHeight,\n    width: scaledWidth,\n    align: shapeAlign,\n    vAlign: shapeVAlign\n  });\n\n  image.config.loadedWidth = loadedWidth;\n  image.config.loadedHeight = loadedHeight;\n  rawItemConfig = Object.assign(image.rawConfig, {\n    x: computedPosition.x,\n    y: computedPosition.y,\n    width: scaledWidth,\n    height: scaledHeight,\n    autoScale: 0\n  });\n  this.getGraphicalElement(this.config.id, this.config.animationLabel).attr(rawItemConfig);\n  image.rawConfig.onload && image.rawConfig.onload.call(image, {\n    width: scaledWidth,\n    height: scaledHeight\n  });\n  event.detachHandler();\n};\n\nvar ImageAnnotation = function (_AnnotationShape) {\n  (0, _inheritsLoose2.default)(ImageAnnotation, _AnnotationShape);\n\n  function ImageAnnotation(id) {\n    var _this;\n\n    _this = _AnnotationShape.call(this, id) || this;\n    _this._listener = imageOnloadListener;\n    return _this;\n  }\n\n  var _proto = ImageAnnotation.prototype;\n\n  _proto.getName = function getName() {\n    return ELEMENT_TYPE_IMAGE;\n  };\n\n  _proto.configureAttributes = function configureAttributes(rawConfig) {\n    if (rawConfig === void 0) {\n      rawConfig = {};\n    }\n\n    _AnnotationShape.prototype.configureAttributes.call(this, rawConfig);\n\n    var image = this,\n        shapeConfig = image.rawConfig,\n        config = image.config;\n    config.url = (0, _lib.getValidValue)(shapeConfig.url);\n    config.xScale = config.rawXScale = (0, _lib.pluckNumber)(shapeConfig.xScale, 100) / 100;\n    config.yScale = config.rawYScale = (0, _lib.pluckNumber)(shapeConfig.yScale, 100) / 100;\n    config.width = (0, _lib.pluckNumber)(config.loadedWidth, shapeConfig.width);\n    config.height = (0, _lib.pluckNumber)(config.loadedHeight, shapeConfig.height);\n    config.align = (0, _lib.pluck)(shapeConfig.align, \"left\");\n    config.vAlign = (0, _lib.pluck)(shapeConfig.vAlign, \"top\");\n    config.xScale = config.xScale * (image.groupConfig.scaleX || 1);\n    config.yScale = config.yScale * (image.groupConfig.scaleY || 1);\n    config.elementType = ELEMENT_TYPE_IMAGE;\n\n    if (typeof config.width === \"undefined\" && typeof config.height === \"undefined\") {\n      image.addEventListener(\"load\", image._listener);\n    }\n  };\n\n  _proto.updateAttr = function updateAttr() {\n    var image = this,\n        group = image.getLinkedParent(),\n        config = image.config,\n        attr = config.calculatedAttrs;\n    image.config.xScale = group.config.scaleX * config.rawXScale;\n    image.config.yScale = group.config.scaleY * config.rawYScale;\n\n    image._setConfig(\"attr\", {\n      x: (0, _lib.pluckNumber)(attr.x, image.getScaledVal(config.x, true)),\n      y: (0, _lib.pluckNumber)(attr.y, image.getScaledVal(config.y, false))\n    });\n  };\n\n  _proto._getAnnotationAttrs = function _getAnnotationAttrs() {\n    var image = this,\n        config = image.config,\n        attr = config.attr,\n        x = (0, _lib.pluckNumber)(config.attr.x, config.x),\n        y = (0, _lib.pluckNumber)(config.attr.y, config.y);\n\n    if (!(0, _lib.pluckNumber)(image.rawConfig.autoscale, image.rawConfig.autoScale, 1)) {\n      attr = {\n        x: x,\n        y: y\n      };\n    }\n\n    config.derivedX = attr.x = typeof attr.x === \"undefined\" ? image.getScaledVal(x, true) : attr.x;\n    config.derivedY = attr.y = typeof attr.y === \"undefined\" ? image.getScaledVal(y, false) : attr.y;\n    attr.src = config.url;\n    attr.opacity = (0, _lib.pluckNumber)(config.rawAlpha, 100) / 100;\n\n    if (typeof config.width !== \"undefined\") {\n      attr.width = config.width * config.xScale;\n    }\n\n    if (typeof config.height !== \"undefined\") {\n      attr.height = config.height * config.yScale;\n    }\n\n    return attr;\n  };\n\n  return ImageAnnotation;\n}(_annotationShape.default);\n\nvar _default = ImageAnnotation;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/features/src/annotation/shapes/annotation-image.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_inheritsLoose2","_annotationShape","_lib","ELEMENT_TYPE_IMAGE","getComputedImagePosition","config","height","width","vAlign","align","x","y","position","imageOnloadListener","event","image","rawItemConfig","loadedImage","originalEvent","target","loadedHeight","loadedWidth","shapeAlign","_getConfig","shapeVAlign","xScale","yScale","scaledHeight","scaledWidth","computedPosition","derivedX","derivedY","Object","assign","rawConfig","autoScale","getGraphicalElement","id","animationLabel","attr","onload","call","detachHandler","ImageAnnotation","_AnnotationShape","_this","_listener","_proto","prototype","getName","configureAttributes","shapeConfig","url","getValidValue","rawXScale","pluckNumber","rawYScale","pluck","groupConfig","scaleX","scaleY","elementType","addEventListener","updateAttr","group","getLinkedParent","calculatedAttrs","_setConfig","getScaledVal","_getAnnotationAttrs","autoscale","src","opacity","rawAlpha","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _annotationShape=_interopRequireDefault(require(\"./annotation-shape\"));var _lib=require(\"@fusioncharts/core/src/lib\");var ELEMENT_TYPE_IMAGE=\"image\",getComputedImagePosition=function getComputedImagePosition(config){var height=config.height,width=config.width,vAlign=config.vAlign,align=config.align,x=config.x,y=config.y,position={x:x,y:y};switch(align){case\"center\":position.x=x-width/2;break;case\"right\":position.x=x-width;break}switch(vAlign){case\"middle\":position.y=y-height/2;break;case\"bottom\":position.y=y-height;break}return position},imageOnloadListener=function imageOnloadListener(event){var image=this,rawItemConfig=this.config,loadedImage=event.originalEvent.target,loadedHeight=loadedImage.height,loadedWidth=loadedImage.width,shapeAlign=image._getConfig(\"align\"),shapeVAlign=image._getConfig(\"vAlign\"),xScale=image._getConfig(\"xScale\"),yScale=image._getConfig(\"yScale\"),scaledHeight=loadedHeight*yScale,scaledWidth=loadedWidth*xScale,computedPosition=getComputedImagePosition({x:rawItemConfig.derivedX,y:rawItemConfig.derivedY,height:scaledHeight,width:scaledWidth,align:shapeAlign,vAlign:shapeVAlign});image.config.loadedWidth=loadedWidth;image.config.loadedHeight=loadedHeight;rawItemConfig=Object.assign(image.rawConfig,{x:computedPosition.x,y:computedPosition.y,width:scaledWidth,height:scaledHeight,autoScale:0});this.getGraphicalElement(this.config.id,this.config.animationLabel).attr(rawItemConfig);image.rawConfig.onload&&image.rawConfig.onload.call(image,{width:scaledWidth,height:scaledHeight});event.detachHandler()};var ImageAnnotation=function(_AnnotationShape){(0,_inheritsLoose2.default)(ImageAnnotation,_AnnotationShape);function ImageAnnotation(id){var _this;_this=_AnnotationShape.call(this,id)||this;_this._listener=imageOnloadListener;return _this}var _proto=ImageAnnotation.prototype;_proto.getName=function getName(){return ELEMENT_TYPE_IMAGE};_proto.configureAttributes=function configureAttributes(rawConfig){if(rawConfig===void 0){rawConfig={}}_AnnotationShape.prototype.configureAttributes.call(this,rawConfig);var image=this,shapeConfig=image.rawConfig,config=image.config;config.url=(0,_lib.getValidValue)(shapeConfig.url);config.xScale=config.rawXScale=(0,_lib.pluckNumber)(shapeConfig.xScale,100)/100;config.yScale=config.rawYScale=(0,_lib.pluckNumber)(shapeConfig.yScale,100)/100;config.width=(0,_lib.pluckNumber)(config.loadedWidth,shapeConfig.width);config.height=(0,_lib.pluckNumber)(config.loadedHeight,shapeConfig.height);config.align=(0,_lib.pluck)(shapeConfig.align,\"left\");config.vAlign=(0,_lib.pluck)(shapeConfig.vAlign,\"top\");config.xScale=config.xScale*(image.groupConfig.scaleX||1);config.yScale=config.yScale*(image.groupConfig.scaleY||1);config.elementType=ELEMENT_TYPE_IMAGE;if(typeof config.width===\"undefined\"&&typeof config.height===\"undefined\"){image.addEventListener(\"load\",image._listener)}};_proto.updateAttr=function updateAttr(){var image=this,group=image.getLinkedParent(),config=image.config,attr=config.calculatedAttrs;image.config.xScale=group.config.scaleX*config.rawXScale;image.config.yScale=group.config.scaleY*config.rawYScale;image._setConfig(\"attr\",{x:(0,_lib.pluckNumber)(attr.x,image.getScaledVal(config.x,true)),y:(0,_lib.pluckNumber)(attr.y,image.getScaledVal(config.y,false))})};_proto._getAnnotationAttrs=function _getAnnotationAttrs(){var image=this,config=image.config,attr=config.attr,x=(0,_lib.pluckNumber)(config.attr.x,config.x),y=(0,_lib.pluckNumber)(config.attr.y,config.y);if(!(0,_lib.pluckNumber)(image.rawConfig.autoscale,image.rawConfig.autoScale,1)){attr={x:x,y:y}}config.derivedX=attr.x=typeof attr.x===\"undefined\"?image.getScaledVal(x,true):attr.x;config.derivedY=attr.y=typeof attr.y===\"undefined\"?image.getScaledVal(y,false):attr.y;attr.src=config.url;attr.opacity=(0,_lib.pluckNumber)(config.rawAlpha,100)/100;if(typeof config.width!==\"undefined\"){attr.width=config.width*config.xScale}if(typeof config.height!==\"undefined\"){attr.height=config.height*config.yScale}return attr};return ImageAnnotation}(_annotationShape.default);var _default=ImageAnnotation;exports.default=_default;"]},"metadata":{},"sourceType":"script"}