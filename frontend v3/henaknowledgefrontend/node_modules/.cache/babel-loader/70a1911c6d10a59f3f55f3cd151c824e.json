{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _inputBase = _interopRequireDefault(require(\"./input-base\"));\n\nvar _lib = require(\"@fusioncharts/core/src/lib\");\n\nvar STATE_PRESSED = \"pressed\";\n\nvar fetchCoordFromEvent = function fetchCoordFromEvent(sentEvent) {\n  var event = sentEvent;\n\n  if (event.originalEvent) {\n    event = event.originalEvent;\n  }\n\n  if (event.type.match(/touch/)) {\n    return {\n      x: event.touches[0].pageX,\n      y: event.touches[0].pageY\n    };\n  } else if (event.type.match(/mouse|pointer/)) {\n    return {\n      x: event.pageX,\n      y: event.pageY\n    };\n  }\n},\n    isSingleFinger = function isSingleFinger(event) {\n  return !event.touches || event.touches.length === 1;\n},\n    getDiffValXY = function getDiffValXY(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n};\n\nvar InputPan = function (_Base) {\n  (0, _inheritsLoose2.default)(InputPan, _Base);\n\n  function InputPan() {\n    var _this;\n\n    _this = _Base.call(this) || this;\n    var input = (0, _assertThisInitialized2.default)(_this);\n    input.controlArr = [{\n      nativeInteraction: [\"fc-dragstart\", \"fc-dragmove\"],\n      callback: input.onDrag.bind(input),\n      component: input\n    }, {\n      nativeInteraction: [\"fc-dragend\"],\n      callback: input.onDragEnd.bind(input),\n      component: input\n    }];\n    input.toggle = input.toggle.bind(input);\n    _lib.isFirefox && input.controlArr.push({\n      nativeInteraction: [\"fc-mousedown\"],\n      callback: InputPan.mousedown,\n      component: input\n    });\n    return _this;\n  }\n\n  InputPan.mousedown = function mousedown(event) {\n    event && event.preventDefault();\n  };\n\n  var _proto = InputPan.prototype;\n\n  _proto.configure = function configure() {\n    _Base.prototype.configure.call(this);\n\n    var input = this;\n    !input.config.skipGraphics && input.setLinkedItem(\"button\", input.createButton({\n      icon: \"panModeIcon\",\n      tooltext: input.config.tooltext,\n      handlers: {\n        click: input.toggle\n      },\n      state: \"activated\"\n    }));\n    input.getLinkedParent().registerDependancy([{\n      derivedInteraction: [\"zoomin\", \"zoomout\", \"dragzoomenabled\", \"dragzoomdisabled\"],\n      callback: input.dependancyFn,\n      component: input\n    }]);\n    input.disable(_lib.UNDEF, false);\n  };\n\n  _proto.getName = function getName() {\n    return \"dragPan\";\n  };\n\n  _proto.enable = function enable(event, dontFireExtEvt) {\n    var input = this;\n\n    if (input._checkStackLen() && input.config.enabled !== true) {\n      input.config.enabled = true;\n      input.config.state = STATE_PRESSED;\n      input.fireEvent(\"panenabled\");\n      !dontFireExtEvt && input.getFromEnv(\"chart\").fireChartInstanceEvent(\"zoommodechanged\", {\n        panModeActive: true\n      }, event && event.originalEvent);\n      input.setControl();\n    }\n  };\n\n  _proto.disable = function disable(event, dontFireExtEvt) {\n    var input = this;\n\n    if (input.config.enabled !== false) {\n      input.config.enabled = false;\n      input.config.state = input._checkStackLen() ? \"activated\" : \"disabled\";\n      input.fireEvent(\"pandisabled\");\n      !dontFireExtEvt && input.getFromEnv(\"chart\").fireChartInstanceEvent(\"zoommodechanged\", {\n        panModeActive: false\n      }, event && event.originalEvent);\n      input.setControl();\n    }\n  };\n\n  _proto.setControl = function setControl() {\n    var input = this,\n        manager = input.getLinkedParent(),\n        button = input.getLinkedItem(\"button\"),\n        controlArr = input.controlArr;\n    manager.releaseControl(controlArr);\n\n    if (input.isEnabled()) {\n      manager.getControl(controlArr);\n    }\n\n    button && button.setCurrentState(input.isEnabled() ? input.config.state : \"disabled\");\n  };\n\n  _proto.setDrag = function setDrag(val) {\n    this.config.isDragging = !!val;\n  };\n\n  _proto.isDragging = function isDragging() {\n    return !!this.config.isDragging;\n  };\n\n  _proto.onDragEnd = function onDragEnd() {\n    this.setDrag(false);\n    this.getFromEnv(\"chart\").getContainer(\"parentgroup\").attr({\n      cursor: \"default\"\n    });\n  };\n\n  _proto.onDrag = function onDrag(event) {\n    var inputPan = this,\n        min,\n        max,\n        shiftVal,\n        visibleDiff,\n        axis,\n        range,\n        scale,\n        scaleRange,\n        scaleDomain,\n        pvr,\n        currentXY = fetchCoordFromEvent(event.originalEvent),\n        diffOb;\n\n    if (!isSingleFinger(event.originalEvent)) {\n      return;\n    }\n\n    inputPan.getFromEnv(\"chart\").getContainer(\"parentgroup\").attr({\n      cursor: \"move\"\n    });\n    this.getFromEnv(\"animationManager\").setAnimationState(\"drag\");\n\n    if (!inputPan.isDragging()) {\n      inputPan.getFromEnv(\"axesObArr\").forEach(function (axesOb) {\n        axesOb.origConfig = axesOb.axis.getVisibleConfig();\n        axesOb.startCoord = currentXY;\n      });\n      inputPan.setDrag(true);\n    } else {\n      inputPan.getFromEnv(\"axesObArr\").forEach(function (axesOb) {\n        min = axesOb.origConfig.minValue;\n        max = axesOb.origConfig.maxValue;\n        axis = axesOb.axis;\n        range = axis.config.axisRange;\n        scale = axis.getScale();\n        scaleRange = scale.getRange();\n        scaleDomain = scale.getDomain();\n        pvr = (scaleRange[1] - scaleRange[0]) / (scaleDomain[1] - scaleDomain[0]);\n        diffOb = getDiffValXY(currentXY, axesOb.startCoord);\n        visibleDiff = max - min;\n\n        if (axesOb.isY) {\n          shiftVal = diffOb.y / pvr;\n        } else {\n          shiftVal = diffOb.x / pvr;\n        }\n\n        shiftVal = -shiftVal;\n\n        if (shiftVal > 0) {\n          shiftVal = Math.min(range.max - max, shiftVal);\n        } else if (shiftVal < 0) {\n          shiftVal = -Math.min(min - range.min, -shiftVal);\n        } else {\n          return;\n        }\n\n        min = min + shiftVal;\n        max = min + visibleDiff;\n        axis.setVisibleConfig(min, max);\n      });\n    }\n  };\n\n  _proto.dependancyFn = function dependancyFn(eventOb) {\n    var input = this;\n\n    if (eventOb.type === \"zoomout\") {\n      !input._checkStackLen() && input.disable();\n    } else if (eventOb.type === \"zoomin\") {\n      input.enable(eventOb);\n    } else if (eventOb.type === \"dragzoomdisabled\") {\n      input._checkStackLen() && input.enable(eventOb);\n    } else if (eventOb.type === \"dragzoomenabled\") {\n      input.disable(eventOb);\n    }\n  };\n\n  return InputPan;\n}(_inputBase.default);\n\nvar _default = InputPan;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/features/src/input-ext/input-pan.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_assertThisInitialized2","_inheritsLoose2","_inputBase","_lib","STATE_PRESSED","fetchCoordFromEvent","sentEvent","event","originalEvent","type","match","x","touches","pageX","y","pageY","isSingleFinger","length","getDiffValXY","a","b","InputPan","_Base","_this","call","input","controlArr","nativeInteraction","callback","onDrag","bind","component","onDragEnd","toggle","isFirefox","push","mousedown","preventDefault","_proto","prototype","configure","config","skipGraphics","setLinkedItem","createButton","icon","tooltext","handlers","click","state","getLinkedParent","registerDependancy","derivedInteraction","dependancyFn","disable","UNDEF","getName","enable","dontFireExtEvt","_checkStackLen","enabled","fireEvent","getFromEnv","fireChartInstanceEvent","panModeActive","setControl","manager","button","getLinkedItem","releaseControl","isEnabled","getControl","setCurrentState","setDrag","val","isDragging","getContainer","attr","cursor","inputPan","min","max","shiftVal","visibleDiff","axis","range","scale","scaleRange","scaleDomain","pvr","currentXY","diffOb","setAnimationState","forEach","axesOb","origConfig","getVisibleConfig","startCoord","minValue","maxValue","axisRange","getScale","getRange","getDomain","isY","Math","setVisibleConfig","eventOb","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _inputBase=_interopRequireDefault(require(\"./input-base\"));var _lib=require(\"@fusioncharts/core/src/lib\");var STATE_PRESSED=\"pressed\";var fetchCoordFromEvent=function fetchCoordFromEvent(sentEvent){var event=sentEvent;if(event.originalEvent){event=event.originalEvent}if(event.type.match(/touch/)){return{x:event.touches[0].pageX,y:event.touches[0].pageY}}else if(event.type.match(/mouse|pointer/)){return{x:event.pageX,y:event.pageY}}},isSingleFinger=function isSingleFinger(event){return!event.touches||event.touches.length===1},getDiffValXY=function getDiffValXY(a,b){return{x:a.x-b.x,y:a.y-b.y}};var InputPan=function(_Base){(0,_inheritsLoose2.default)(InputPan,_Base);function InputPan(){var _this;_this=_Base.call(this)||this;var input=(0,_assertThisInitialized2.default)(_this);input.controlArr=[{nativeInteraction:[\"fc-dragstart\",\"fc-dragmove\"],callback:input.onDrag.bind(input),component:input},{nativeInteraction:[\"fc-dragend\"],callback:input.onDragEnd.bind(input),component:input}];input.toggle=input.toggle.bind(input);_lib.isFirefox&&input.controlArr.push({nativeInteraction:[\"fc-mousedown\"],callback:InputPan.mousedown,component:input});return _this}InputPan.mousedown=function mousedown(event){event&&event.preventDefault()};var _proto=InputPan.prototype;_proto.configure=function configure(){_Base.prototype.configure.call(this);var input=this;!input.config.skipGraphics&&input.setLinkedItem(\"button\",input.createButton({icon:\"panModeIcon\",tooltext:input.config.tooltext,handlers:{click:input.toggle},state:\"activated\"}));input.getLinkedParent().registerDependancy([{derivedInteraction:[\"zoomin\",\"zoomout\",\"dragzoomenabled\",\"dragzoomdisabled\"],callback:input.dependancyFn,component:input}]);input.disable(_lib.UNDEF,false)};_proto.getName=function getName(){return\"dragPan\"};_proto.enable=function enable(event,dontFireExtEvt){var input=this;if(input._checkStackLen()&&input.config.enabled!==true){input.config.enabled=true;input.config.state=STATE_PRESSED;input.fireEvent(\"panenabled\");!dontFireExtEvt&&input.getFromEnv(\"chart\").fireChartInstanceEvent(\"zoommodechanged\",{panModeActive:true},event&&event.originalEvent);input.setControl()}};_proto.disable=function disable(event,dontFireExtEvt){var input=this;if(input.config.enabled!==false){input.config.enabled=false;input.config.state=input._checkStackLen()?\"activated\":\"disabled\";input.fireEvent(\"pandisabled\");!dontFireExtEvt&&input.getFromEnv(\"chart\").fireChartInstanceEvent(\"zoommodechanged\",{panModeActive:false},event&&event.originalEvent);input.setControl()}};_proto.setControl=function setControl(){var input=this,manager=input.getLinkedParent(),button=input.getLinkedItem(\"button\"),controlArr=input.controlArr;manager.releaseControl(controlArr);if(input.isEnabled()){manager.getControl(controlArr)}button&&button.setCurrentState(input.isEnabled()?input.config.state:\"disabled\")};_proto.setDrag=function setDrag(val){this.config.isDragging=!!val};_proto.isDragging=function isDragging(){return!!this.config.isDragging};_proto.onDragEnd=function onDragEnd(){this.setDrag(false);this.getFromEnv(\"chart\").getContainer(\"parentgroup\").attr({cursor:\"default\"})};_proto.onDrag=function onDrag(event){var inputPan=this,min,max,shiftVal,visibleDiff,axis,range,scale,scaleRange,scaleDomain,pvr,currentXY=fetchCoordFromEvent(event.originalEvent),diffOb;if(!isSingleFinger(event.originalEvent)){return}inputPan.getFromEnv(\"chart\").getContainer(\"parentgroup\").attr({cursor:\"move\"});this.getFromEnv(\"animationManager\").setAnimationState(\"drag\");if(!inputPan.isDragging()){inputPan.getFromEnv(\"axesObArr\").forEach((function(axesOb){axesOb.origConfig=axesOb.axis.getVisibleConfig();axesOb.startCoord=currentXY}));inputPan.setDrag(true)}else{inputPan.getFromEnv(\"axesObArr\").forEach((function(axesOb){min=axesOb.origConfig.minValue;max=axesOb.origConfig.maxValue;axis=axesOb.axis;range=axis.config.axisRange;scale=axis.getScale();scaleRange=scale.getRange();scaleDomain=scale.getDomain();pvr=(scaleRange[1]-scaleRange[0])/(scaleDomain[1]-scaleDomain[0]);diffOb=getDiffValXY(currentXY,axesOb.startCoord);visibleDiff=max-min;if(axesOb.isY){shiftVal=diffOb.y/pvr}else{shiftVal=diffOb.x/pvr}shiftVal=-shiftVal;if(shiftVal>0){shiftVal=Math.min(range.max-max,shiftVal)}else if(shiftVal<0){shiftVal=-Math.min(min-range.min,-shiftVal)}else{return}min=min+shiftVal;max=min+visibleDiff;axis.setVisibleConfig(min,max)}))}};_proto.dependancyFn=function dependancyFn(eventOb){var input=this;if(eventOb.type===\"zoomout\"){!input._checkStackLen()&&input.disable()}else if(eventOb.type===\"zoomin\"){input.enable(eventOb)}else if(eventOb.type===\"dragzoomdisabled\"){input._checkStackLen()&&input.enable(eventOb)}else if(eventOb.type===\"dragzoomenabled\"){input.disable(eventOb)}};return InputPan}(_inputBase.default);var _default=InputPan;exports.default=_default;"]},"metadata":{},"sourceType":"script"}