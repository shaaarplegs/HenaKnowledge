{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _lib = require(\"@fusioncharts/core/src/lib\");\n\nvar BLACK_LIST = {\n  treemap: true,\n  scatter: true,\n  bubble: true,\n  errorscatter: true,\n  errorline: true,\n  errorbar2d: true,\n  candlestick: true,\n  stackedcolumn3d: true,\n  stackedbar3d: true,\n  mscolumnline3d: true,\n  mscombi3d: true,\n  mscolumn3dlinedy: true,\n  stackedcolumn3dline: true,\n  stackedcolumn3dlinedy: true\n},\n    DEFAULT_PLOT_COLOR = \"#000000\",\n    isBlackListed = function isBlackListed(component) {\n  return BLACK_LIST[component.getName().toLowerCase()];\n},\n    reduceToolTexts = function reduceToolTexts(acc, tooltext) {\n  return acc + '<div style=\"margin: 0;\">' + tooltext + \"</div>\";\n},\n    countHoveredPlots = function countHoveredPlots(acc, info) {\n  return info.hovered ? acc + 1 : acc;\n},\n    extractColor = function extractColor(plotConfig) {\n  return plotConfig.originalPlotColor || plotConfig.plotColor || plotConfig.color || DEFAULT_PLOT_COLOR;\n},\n    compareByJsonIndex = function compareByJsonIndex(a, b) {\n  return b.getJSONIndex() - a.getJSONIndex();\n};\n\nfunction _enableConsolidatedToolTip(e) {\n  var chart = e.sender.getFromEnv(\"chart\"),\n      canvas = this,\n      toolTextGray = chart.config.tooltipgrayoutcolor,\n      showPlotColor = chart.config.plotcolorintooltip,\n      toolTipController = chart.getFromEnv(\"toolTipController\"),\n      datasets = chart.getDatasets().sort(compareByJsonIndex),\n      consolidatedToolTip = chart.getFromEnv(\"consolidated-tooltip\"),\n      chartCoords = (0, _lib.getMouseCoordinate)(e.sender.getFromEnv(\"chart-container\"), e.originalEvent, chart),\n      canvasX = chartCoords.chartX,\n      canvasY = chartCoords.chartY,\n      alreadyColored = false,\n      hoveredInfos = datasets.map(function (dataset) {\n    return dataset.getPlotInCategoryAt(canvasX, canvasY);\n  }).filter(Boolean),\n      numPlotsHovered = hoveredInfos.reduce(countHoveredPlots, 0),\n      plotTexts = hoveredInfos.map(function (hoveredInfo) {\n    var dataConfig = hoveredInfo.pointObj.config,\n        text = dataConfig.finalTooltext || dataConfig.toolText,\n        color = extractColor(dataConfig);\n\n    if (numPlotsHovered > 0) {\n      if (!alreadyColored && hoveredInfo.hovered) {\n        text = '<div style=\"display: inline-block;\">' + text + \"</div>\";\n        alreadyColored = true;\n      } else {\n        color = toolTextGray;\n        text = '<div style=\"color: ' + (0, _lib.hashify)(toolTextGray) + '; display: inline-block;\">' + text + \"</div>\";\n      }\n    } else {\n      text = '<div style=\"display: inline-block;\">' + text + \"</div>\";\n    }\n\n    return showPlotColor ? '<div style=\"color: ' + (0, _lib.hashify)(color) + '; display: inline-block;\">&#9632&nbsp;</div>' + text : text;\n  }),\n      consolidatedText = [].concat(plotTexts).reverse().reduce(reduceToolTexts, \"\");\n\n  if (!canvas.isWithinCanvas(canvasX, canvasY)) {\n    consolidatedToolTip && toolTipController.hide(consolidatedToolTip);\n    return;\n  }\n\n  if (consolidatedText) {\n    if (!consolidatedToolTip) {\n      chart.addToEnv(\"consolidated-tooltip\", toolTipController.draw(e.originalEvent, consolidatedText));\n    } else {\n      toolTipController.draw(e.originalEvent, consolidatedText, consolidatedToolTip);\n    }\n  } else {\n    consolidatedToolTip && toolTipController.hide(consolidatedToolTip);\n  }\n}\n\nfunction _disableConsolidatedToolTip(e) {\n  var chart = e.sender.getFromEnv(\"chart\"),\n      consolidatedToolTip = chart.getFromEnv(\"consolidated-tooltip\");\n  consolidatedToolTip && chart.getFromEnv(\"toolTipController\").hide(consolidatedToolTip);\n}\n\nfunction drawConsolidatedToolTip(idx) {\n  var chart = this.apiInstance,\n      datasets = chart.getDatasets().sort(compareByJsonIndex),\n      showPlotColor = chart.config.plotcolorintooltip,\n      toolTipController = chart.getFromEnv(\"toolTipController\"),\n      consolidatedToolTip = chart.getFromEnv(\"consolidated-tooltip\"),\n      dataComponents = datasets.map(function (dataset) {\n    var dataComponent = dataset.components.data;\n    return dataComponent[idx] && dataComponent[idx];\n  }).filter(Boolean),\n      coords = dataComponents[0] && {\n    x: dataComponents[0].config._Px - dataComponents[0]._width,\n    y: dataComponents[0].config._Py,\n    width: dataComponents[0].config._width\n  },\n      consolidatedText = dataComponents.map(function (data) {\n    var config = data.config,\n        text = config.finalTooltext || config.toolText;\n    return showPlotColor ? '<div style=\"color: ' + (0, _lib.hashify)(extractColor(config)) + '; display: inline-block;\">&#9632&nbsp;</div><div style=\"display: inline-block;\">' + text + \"</div>\" : '<div style=\"display: inline-block;\">' + text + \"</div>\";\n  }).reduce(reduceToolTexts, \"\");\n\n  if (consolidatedText && coords) {\n    if (!consolidatedToolTip) {\n      chart.addToEnv(\"consolidated-tooltip\", toolTipController.drawAt(coords.x, coords.y, consolidatedText));\n    } else {\n      toolTipController.drawAt(coords.x, coords.y, consolidatedText, consolidatedToolTip);\n    }\n  } else {\n    consolidatedToolTip && toolTipController.hide(consolidatedToolTip);\n  }\n}\n\nfunction consolidatedTooltipExt(FusionCharts) {\n  FusionCharts.addEventListener(\"predraw\", function onFcPredraw(event) {\n    var chart;\n\n    if (event.sender.getType && event.sender.getType() === \"chartAPI\" && !isBlackListed(event.sender)) {\n      chart = event.sender;\n      var canvases = chart.getChildren(\"canvas\");\n      chart.getFromEnv(\"chartInstance\").drawConsolidatedToolTip = drawConsolidatedToolTip;\n      canvases && canvases.forEach(function (canvas) {\n        if (!chart.config.drawTrendRegion || !chart.config.showtooltip) {\n          canvas.removeEventListener(\"fc-mouseover\", _enableConsolidatedToolTip);\n          canvas.removeEventListener(\"fc-mousemove\", _enableConsolidatedToolTip);\n          canvas.removeEventListener(\"fc-mouseout\", _disableConsolidatedToolTip);\n          canvas.setState(\"consolidatedTooltipEventListenerAttached\", false);\n          return;\n        }\n\n        if (!canvas.getState(\"consolidatedTooltipEventListenerAttached\") && chart.config.showtooltip) {\n          canvas.addEventListener(\"fc-mouseover\", _enableConsolidatedToolTip);\n          canvas.addEventListener(\"fc-mousemove\", _enableConsolidatedToolTip);\n          canvas.addEventListener(\"fc-mouseout\", _disableConsolidatedToolTip);\n          canvas.setState(\"consolidatedTooltipEventListenerAttached\", true);\n        }\n      });\n    }\n  });\n}\n\nvar _default = {\n  extension: consolidatedTooltipExt,\n  name: \"ConsolidatedToolTip\",\n  type: \"extension\",\n  requiresFusionCharts: true\n};\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/features/src/consolidated-tooltip/index.js"],"names":["exports","__esModule","default","_lib","require","BLACK_LIST","treemap","scatter","bubble","errorscatter","errorline","errorbar2d","candlestick","stackedcolumn3d","stackedbar3d","mscolumnline3d","mscombi3d","mscolumn3dlinedy","stackedcolumn3dline","stackedcolumn3dlinedy","DEFAULT_PLOT_COLOR","isBlackListed","component","getName","toLowerCase","reduceToolTexts","acc","tooltext","countHoveredPlots","info","hovered","extractColor","plotConfig","originalPlotColor","plotColor","color","compareByJsonIndex","a","b","getJSONIndex","_enableConsolidatedToolTip","e","chart","sender","getFromEnv","canvas","toolTextGray","config","tooltipgrayoutcolor","showPlotColor","plotcolorintooltip","toolTipController","datasets","getDatasets","sort","consolidatedToolTip","chartCoords","getMouseCoordinate","originalEvent","canvasX","chartX","canvasY","chartY","alreadyColored","hoveredInfos","map","dataset","getPlotInCategoryAt","filter","Boolean","numPlotsHovered","reduce","plotTexts","hoveredInfo","dataConfig","pointObj","text","finalTooltext","toolText","hashify","consolidatedText","concat","reverse","isWithinCanvas","hide","addToEnv","draw","_disableConsolidatedToolTip","drawConsolidatedToolTip","idx","apiInstance","dataComponents","dataComponent","components","data","coords","x","_Px","_width","y","_Py","width","drawAt","consolidatedTooltipExt","FusionCharts","addEventListener","onFcPredraw","event","getType","canvases","getChildren","forEach","drawTrendRegion","showtooltip","removeEventListener","setState","getState","_default","extension","name","type","requiresFusionCharts"],"mappings":"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","sourcesContent":["\"use strict\";exports.__esModule=true;exports.default=void 0;var _lib=require(\"@fusioncharts/core/src/lib\");var BLACK_LIST={treemap:true,scatter:true,bubble:true,errorscatter:true,errorline:true,errorbar2d:true,candlestick:true,stackedcolumn3d:true,stackedbar3d:true,mscolumnline3d:true,mscombi3d:true,mscolumn3dlinedy:true,stackedcolumn3dline:true,stackedcolumn3dlinedy:true},DEFAULT_PLOT_COLOR=\"#000000\",isBlackListed=function isBlackListed(component){return BLACK_LIST[component.getName().toLowerCase()]},reduceToolTexts=function reduceToolTexts(acc,tooltext){return acc+'<div style=\"margin: 0;\">'+tooltext+\"</div>\"},countHoveredPlots=function countHoveredPlots(acc,info){return info.hovered?acc+1:acc},extractColor=function extractColor(plotConfig){return plotConfig.originalPlotColor||plotConfig.plotColor||plotConfig.color||DEFAULT_PLOT_COLOR},compareByJsonIndex=function compareByJsonIndex(a,b){return b.getJSONIndex()-a.getJSONIndex()};function _enableConsolidatedToolTip(e){var chart=e.sender.getFromEnv(\"chart\"),canvas=this,toolTextGray=chart.config.tooltipgrayoutcolor,showPlotColor=chart.config.plotcolorintooltip,toolTipController=chart.getFromEnv(\"toolTipController\"),datasets=chart.getDatasets().sort(compareByJsonIndex),consolidatedToolTip=chart.getFromEnv(\"consolidated-tooltip\"),chartCoords=(0,_lib.getMouseCoordinate)(e.sender.getFromEnv(\"chart-container\"),e.originalEvent,chart),canvasX=chartCoords.chartX,canvasY=chartCoords.chartY,alreadyColored=false,hoveredInfos=datasets.map((function(dataset){return dataset.getPlotInCategoryAt(canvasX,canvasY)})).filter(Boolean),numPlotsHovered=hoveredInfos.reduce(countHoveredPlots,0),plotTexts=hoveredInfos.map((function(hoveredInfo){var dataConfig=hoveredInfo.pointObj.config,text=dataConfig.finalTooltext||dataConfig.toolText,color=extractColor(dataConfig);if(numPlotsHovered>0){if(!alreadyColored&&hoveredInfo.hovered){text='<div style=\"display: inline-block;\">'+text+\"</div>\";alreadyColored=true}else{color=toolTextGray;text='<div style=\"color: '+(0,_lib.hashify)(toolTextGray)+'; display: inline-block;\">'+text+\"</div>\"}}else{text='<div style=\"display: inline-block;\">'+text+\"</div>\"}return showPlotColor?'<div style=\"color: '+(0,_lib.hashify)(color)+'; display: inline-block;\">&#9632&nbsp;</div>'+text:text})),consolidatedText=[].concat(plotTexts).reverse().reduce(reduceToolTexts,\"\");if(!canvas.isWithinCanvas(canvasX,canvasY)){consolidatedToolTip&&toolTipController.hide(consolidatedToolTip);return}if(consolidatedText){if(!consolidatedToolTip){chart.addToEnv(\"consolidated-tooltip\",toolTipController.draw(e.originalEvent,consolidatedText))}else{toolTipController.draw(e.originalEvent,consolidatedText,consolidatedToolTip)}}else{consolidatedToolTip&&toolTipController.hide(consolidatedToolTip)}}function _disableConsolidatedToolTip(e){var chart=e.sender.getFromEnv(\"chart\"),consolidatedToolTip=chart.getFromEnv(\"consolidated-tooltip\");consolidatedToolTip&&chart.getFromEnv(\"toolTipController\").hide(consolidatedToolTip)}function drawConsolidatedToolTip(idx){var chart=this.apiInstance,datasets=chart.getDatasets().sort(compareByJsonIndex),showPlotColor=chart.config.plotcolorintooltip,toolTipController=chart.getFromEnv(\"toolTipController\"),consolidatedToolTip=chart.getFromEnv(\"consolidated-tooltip\"),dataComponents=datasets.map((function(dataset){var dataComponent=dataset.components.data;return dataComponent[idx]&&dataComponent[idx]})).filter(Boolean),coords=dataComponents[0]&&{x:dataComponents[0].config._Px-dataComponents[0]._width,y:dataComponents[0].config._Py,width:dataComponents[0].config._width},consolidatedText=dataComponents.map((function(data){var config=data.config,text=config.finalTooltext||config.toolText;return showPlotColor?'<div style=\"color: '+(0,_lib.hashify)(extractColor(config))+'; display: inline-block;\">&#9632&nbsp;</div><div style=\"display: inline-block;\">'+text+\"</div>\":'<div style=\"display: inline-block;\">'+text+\"</div>\"})).reduce(reduceToolTexts,\"\");if(consolidatedText&&coords){if(!consolidatedToolTip){chart.addToEnv(\"consolidated-tooltip\",toolTipController.drawAt(coords.x,coords.y,consolidatedText))}else{toolTipController.drawAt(coords.x,coords.y,consolidatedText,consolidatedToolTip)}}else{consolidatedToolTip&&toolTipController.hide(consolidatedToolTip)}}function consolidatedTooltipExt(FusionCharts){FusionCharts.addEventListener(\"predraw\",(function onFcPredraw(event){var chart;if(event.sender.getType&&event.sender.getType()===\"chartAPI\"&&!isBlackListed(event.sender)){chart=event.sender;var canvases=chart.getChildren(\"canvas\");chart.getFromEnv(\"chartInstance\").drawConsolidatedToolTip=drawConsolidatedToolTip;canvases&&canvases.forEach((function(canvas){if(!chart.config.drawTrendRegion||!chart.config.showtooltip){canvas.removeEventListener(\"fc-mouseover\",_enableConsolidatedToolTip);canvas.removeEventListener(\"fc-mousemove\",_enableConsolidatedToolTip);canvas.removeEventListener(\"fc-mouseout\",_disableConsolidatedToolTip);canvas.setState(\"consolidatedTooltipEventListenerAttached\",false);return}if(!canvas.getState(\"consolidatedTooltipEventListenerAttached\")&&chart.config.showtooltip){canvas.addEventListener(\"fc-mouseover\",_enableConsolidatedToolTip);canvas.addEventListener(\"fc-mousemove\",_enableConsolidatedToolTip);canvas.addEventListener(\"fc-mouseout\",_disableConsolidatedToolTip);canvas.setState(\"consolidatedTooltipEventListenerAttached\",true)}}))}}))}var _default={extension:consolidatedTooltipExt,name:\"ConsolidatedToolTip\",type:\"extension\",requiresFusionCharts:true};exports.default=_default;"]},"metadata":{},"sourceType":"script"}