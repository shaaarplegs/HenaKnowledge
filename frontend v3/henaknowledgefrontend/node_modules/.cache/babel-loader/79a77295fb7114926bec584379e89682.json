{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _mapper = _interopRequireDefault(require(\"./mapper.js\"));\n\nvar _isAllDefined = _interopRequireDefault(require(\"./is-all-defined.js\"));\n\nvar UNDEF,\n    lastHoveredInfo = {\n  elementInfo: []\n},\n    safePointerEventMapping = {\n  mouseover: \"pointerover\",\n  mousedown: \"pointerdown\",\n  mousemove: \"pointermove\",\n  mouseup: \"pointerup\",\n  mouseout: \"pointerout\"\n},\n    safeMouseEventMapping = {\n  mouseover: \"touchstart\",\n  mousedown: \"touchstart\",\n  mouseup: \"touchend\",\n  mousemove: \"touchmove\",\n  mouseout: \"touchend\"\n},\n    touchDeviceEvents = {\n  blur: true\n},\n    navigator = window.navigator,\n    supportsTouch = \"ontouchstart\" in document || navigator.maxTouchPoints || navigator.msMaxTouchPoints,\n    supportsPointer = (\"onpointerover\" in document),\n    fcClick = function fcClick(dom, handler, context) {\n  var _ref;\n\n  if (context === void 0) {\n    context = dom;\n  }\n\n  var eventType, fn, x1, y1, content;\n\n  if (!dom._clickHandlerHelper) {\n    var downFn = function downFn(e) {\n      dom._lastEventTriggered = \"mousedown\";\n      x1 = e.clientX !== UNDEF ? e.clientX : e.changedTouches && e.changedTouches[0].clientX;\n      y1 = e.clientY !== UNDEF ? e.clientY : e.changedTouches && e.changedTouches[0].clientY;\n    },\n        moveFn = function moveFn(e) {\n      var x2 = e.clientX !== UNDEF ? e.clientX : e.changedTouches && e.changedTouches[0].clientX,\n          y2 = e.clientY !== UNDEF ? e.clientY : e.changedTouches && e.changedTouches[0].clientY;\n\n      if (Math.abs(x1 - x2) >= 2.5 || Math.abs(y1 - y2) >= 2.5) {\n        dom._lastEventTriggered = UNDEF;\n      }\n    };\n\n    if (!supportsPointer && supportsTouch) {\n      content = {\n        touchstart: function touchstart() {\n          dom._lastEventTriggered = \"touchstart\";\n          dom._lastEventTriggeredAt = new Date().getTime();\n        },\n        touchmove: moveFn\n      };\n    } else if (supportsPointer && supportsTouch) {\n      content = {\n        pointerdown: downFn,\n        pointermove: moveFn\n      };\n    } else {\n      content = {\n        mousedown: downFn,\n        mousemove: moveFn\n      };\n    }\n\n    for (eventType in content) {\n      if (dom.addEventListener) {\n        dom.addEventListener(eventType, content[eventType]);\n      } else {\n        dom.attachEvent(\"on\" + eventType, content[eventType]);\n      }\n    }\n\n    dom._clickHandlerHelper = content;\n    dom._clickEventCount = 0;\n  }\n\n  ++dom._clickEventCount;\n\n  if (!supportsPointer && supportsTouch) {\n    eventType = \"touchend\";\n\n    fn = function fn(e) {\n      if (dom._lastEventTriggered === \"touchstart\" && new Date().getTime() - dom._lastEventTriggeredAt <= 500) {\n        setTimeout(function () {\n          handler.call(context, e);\n        }, 0);\n      }\n    };\n  } else {\n    eventType = \"click\";\n\n    fn = function fn(e) {\n      dom._lastEventTriggered === \"mousedown\" && handler.call(context, e);\n    };\n  }\n\n  return _ref = {}, _ref[eventType] = fn, _ref;\n},\n    fcunclick = function fcunclick(dom) {\n  var eventType,\n      clickHandlerHelper = dom._clickHandlerHelper;\n\n  if (! --dom._clickEventCount) {\n    for (eventType in clickHandlerHelper) {\n      if (dom.removeEventListener) {\n        dom.removeEventListener(eventType, clickHandlerHelper[eventType]);\n      } else {\n        dom.detachEvent(\"on\" + eventType, clickHandlerHelper[eventType]);\n      }\n    }\n\n    dom._clickHandlerHelper = UNDEF;\n  }\n},\n    getDerivedInfo = function getDerivedInfo(dom, _type, callback, context) {\n  var _ref2;\n\n  if (context === void 0) {\n    context = dom;\n  }\n\n  switch (_type) {\n    case \"fc-click\":\n      return fcClick(dom, callback);\n  }\n\n  var actualtype,\n      type = _type,\n      isSafe = type.match(/fc-/),\n      fn = callback;\n  isSafe && (type = type.replace(/fc-/, \"\"));\n\n  if (isSafe) {\n    if (supportsTouch) {\n      actualtype = type;\n      type = (supportsPointer ? safePointerEventMapping[type] : safeMouseEventMapping[type]) || type;\n\n      if (actualtype === \"mouseout\") {\n        fn = function fn(e) {\n          if (!(supportsPointer && supportsTouch && !e.isPrimary)) {\n            lastHoveredInfo.elementInfo.push({\n              el: context,\n              callback: callback\n            });\n            lastHoveredInfo.srcElement = e.srcElement || e.target;\n          }\n        };\n\n        type = supportsPointer ? \"pointerover\" : \"touchstart\";\n      }\n    }\n  }\n\n  if (fn === callback) {\n    fn = function fn(e) {\n      !(supportsPointer && supportsTouch && !e.isPrimary && !touchDeviceEvents[e.type]) && callback.call(context, e);\n    };\n  }\n\n  return _ref2 = {}, _ref2[type] = fn, _ref2;\n},\n    removeHelperHandlers = function removeHelperHandlers(dom, type) {\n  switch (type) {\n    case \"fc-click\":\n      return fcunclick(dom);\n  }\n};\n\nif (supportsTouch) {\n  document.addEventListener(supportsPointer ? \"pointerover\" : \"touchstart\", function (e) {\n    if (lastHoveredInfo.srcElement && lastHoveredInfo.srcElement !== (e.srcElement || e.target)) {\n      var elementInfo = lastHoveredInfo.elementInfo,\n          ii = elementInfo.length,\n          elems,\n          i;\n\n      for (i = 0; i < ii; i++) {\n        elems = elementInfo[i];\n        elems.callback.call(elems.el, e);\n      }\n    }\n\n    lastHoveredInfo = {\n      elementInfo: []\n    };\n  }, true);\n}\n\nvar FusionEvenetHandler = function () {\n  function FusionEvenetHandler() {\n    this.mapper = new _mapper.default();\n  }\n\n  var _proto = FusionEvenetHandler.prototype;\n\n  _proto.on = function on(dom, type, callback, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var mapper = this.mapper,\n        derivedInfo,\n        key,\n        keyset = [dom, type, callback];\n\n    if ((0, _isAllDefined.default)(keyset)) {\n      if (!(derivedInfo = mapper.getValue(keyset))) {\n        derivedInfo = getDerivedInfo(dom, type, callback);\n        mapper.setValue(keyset, derivedInfo);\n\n        for (key in derivedInfo) {\n          if (dom.addEventListener) {\n            dom.addEventListener(key, derivedInfo[key]);\n          } else {\n            dom.attachEvent(\"on\" + key, derivedInfo[key]);\n          }\n        }\n\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.off = function off(dom, type, callback) {\n    var mapper = this.mapper,\n        derivedInfo,\n        key,\n        keyset = [dom, type, callback];\n\n    if ((0, _isAllDefined.default)(keyset)) {\n      if (derivedInfo = mapper.getValue(keyset)) {\n        removeHelperHandlers(dom, type);\n\n        for (key in derivedInfo) {\n          if (dom.removeEventListener) {\n            dom.removeEventListener(key, derivedInfo[key]);\n          } else {\n            dom.detachEvent(\"on\" + key, derivedInfo[key]);\n          }\n        }\n\n        mapper.clear(keyset);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  return FusionEvenetHandler;\n}();\n\nvar _default = FusionEvenetHandler;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/core/src/fusion-events-wrapper/fusion-event-wrapper.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_mapper","_isAllDefined","UNDEF","lastHoveredInfo","elementInfo","safePointerEventMapping","mouseover","mousedown","mousemove","mouseup","mouseout","safeMouseEventMapping","touchDeviceEvents","blur","navigator","window","supportsTouch","document","maxTouchPoints","msMaxTouchPoints","supportsPointer","fcClick","dom","handler","context","_ref","eventType","fn","x1","y1","content","_clickHandlerHelper","downFn","e","_lastEventTriggered","clientX","changedTouches","clientY","moveFn","x2","y2","Math","abs","touchstart","_lastEventTriggeredAt","Date","getTime","touchmove","pointerdown","pointermove","addEventListener","attachEvent","_clickEventCount","setTimeout","call","fcunclick","clickHandlerHelper","removeEventListener","detachEvent","getDerivedInfo","_type","callback","_ref2","actualtype","type","isSafe","match","replace","isPrimary","push","el","srcElement","target","removeHelperHandlers","ii","length","elems","i","FusionEvenetHandler","mapper","_proto","prototype","on","options","derivedInfo","key","keyset","getValue","setValue","off","clear","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _mapper=_interopRequireDefault(require(\"./mapper.js\"));var _isAllDefined=_interopRequireDefault(require(\"./is-all-defined.js\"));var UNDEF,lastHoveredInfo={elementInfo:[]},safePointerEventMapping={mouseover:\"pointerover\",mousedown:\"pointerdown\",mousemove:\"pointermove\",mouseup:\"pointerup\",mouseout:\"pointerout\"},safeMouseEventMapping={mouseover:\"touchstart\",mousedown:\"touchstart\",mouseup:\"touchend\",mousemove:\"touchmove\",mouseout:\"touchend\"},touchDeviceEvents={blur:true},navigator=window.navigator,supportsTouch=\"ontouchstart\"in document||navigator.maxTouchPoints||navigator.msMaxTouchPoints,supportsPointer=\"onpointerover\"in document,fcClick=function fcClick(dom,handler,context){var _ref;if(context===void 0){context=dom}var eventType,fn,x1,y1,content;if(!dom._clickHandlerHelper){var downFn=function downFn(e){dom._lastEventTriggered=\"mousedown\";x1=e.clientX!==UNDEF?e.clientX:e.changedTouches&&e.changedTouches[0].clientX;y1=e.clientY!==UNDEF?e.clientY:e.changedTouches&&e.changedTouches[0].clientY},moveFn=function moveFn(e){var x2=e.clientX!==UNDEF?e.clientX:e.changedTouches&&e.changedTouches[0].clientX,y2=e.clientY!==UNDEF?e.clientY:e.changedTouches&&e.changedTouches[0].clientY;if(Math.abs(x1-x2)>=2.5||Math.abs(y1-y2)>=2.5){dom._lastEventTriggered=UNDEF}};if(!supportsPointer&&supportsTouch){content={touchstart:function touchstart(){dom._lastEventTriggered=\"touchstart\";dom._lastEventTriggeredAt=(new Date).getTime()},touchmove:moveFn}}else if(supportsPointer&&supportsTouch){content={pointerdown:downFn,pointermove:moveFn}}else{content={mousedown:downFn,mousemove:moveFn}}for(eventType in content){if(dom.addEventListener){dom.addEventListener(eventType,content[eventType])}else{dom.attachEvent(\"on\"+eventType,content[eventType])}}dom._clickHandlerHelper=content;dom._clickEventCount=0}++dom._clickEventCount;if(!supportsPointer&&supportsTouch){eventType=\"touchend\";fn=function fn(e){if(dom._lastEventTriggered===\"touchstart\"&&(new Date).getTime()-dom._lastEventTriggeredAt<=500){setTimeout((function(){handler.call(context,e)}),0)}}}else{eventType=\"click\";fn=function fn(e){dom._lastEventTriggered===\"mousedown\"&&handler.call(context,e)}}return _ref={},_ref[eventType]=fn,_ref},fcunclick=function fcunclick(dom){var eventType,clickHandlerHelper=dom._clickHandlerHelper;if(!--dom._clickEventCount){for(eventType in clickHandlerHelper){if(dom.removeEventListener){dom.removeEventListener(eventType,clickHandlerHelper[eventType])}else{dom.detachEvent(\"on\"+eventType,clickHandlerHelper[eventType])}}dom._clickHandlerHelper=UNDEF}},getDerivedInfo=function getDerivedInfo(dom,_type,callback,context){var _ref2;if(context===void 0){context=dom}switch(_type){case\"fc-click\":return fcClick(dom,callback)}var actualtype,type=_type,isSafe=type.match(/fc-/),fn=callback;isSafe&&(type=type.replace(/fc-/,\"\"));if(isSafe){if(supportsTouch){actualtype=type;type=(supportsPointer?safePointerEventMapping[type]:safeMouseEventMapping[type])||type;if(actualtype===\"mouseout\"){fn=function fn(e){if(!(supportsPointer&&supportsTouch&&!e.isPrimary)){lastHoveredInfo.elementInfo.push({el:context,callback:callback});lastHoveredInfo.srcElement=e.srcElement||e.target}};type=supportsPointer?\"pointerover\":\"touchstart\"}}}if(fn===callback){fn=function fn(e){!(supportsPointer&&supportsTouch&&!e.isPrimary&&!touchDeviceEvents[e.type])&&callback.call(context,e)}}return _ref2={},_ref2[type]=fn,_ref2},removeHelperHandlers=function removeHelperHandlers(dom,type){switch(type){case\"fc-click\":return fcunclick(dom)}};if(supportsTouch){document.addEventListener(supportsPointer?\"pointerover\":\"touchstart\",(function(e){if(lastHoveredInfo.srcElement&&lastHoveredInfo.srcElement!==(e.srcElement||e.target)){var elementInfo=lastHoveredInfo.elementInfo,ii=elementInfo.length,elems,i;for(i=0;i<ii;i++){elems=elementInfo[i];elems.callback.call(elems.el,e)}}lastHoveredInfo={elementInfo:[]}}),true)}var FusionEvenetHandler=function(){function FusionEvenetHandler(){this.mapper=new _mapper.default}var _proto=FusionEvenetHandler.prototype;_proto.on=function on(dom,type,callback,options){if(options===void 0){options={}}var mapper=this.mapper,derivedInfo,key,keyset=[dom,type,callback];if((0,_isAllDefined.default)(keyset)){if(!(derivedInfo=mapper.getValue(keyset))){derivedInfo=getDerivedInfo(dom,type,callback);mapper.setValue(keyset,derivedInfo);for(key in derivedInfo){if(dom.addEventListener){dom.addEventListener(key,derivedInfo[key])}else{dom.attachEvent(\"on\"+key,derivedInfo[key])}}return true}}return false};_proto.off=function off(dom,type,callback){var mapper=this.mapper,derivedInfo,key,keyset=[dom,type,callback];if((0,_isAllDefined.default)(keyset)){if(derivedInfo=mapper.getValue(keyset)){removeHelperHandlers(dom,type);for(key in derivedInfo){if(dom.removeEventListener){dom.removeEventListener(key,derivedInfo[key])}else{dom.detachEvent(\"on\"+key,derivedInfo[key])}}mapper.clear(keyset);return true}}return false};return FusionEvenetHandler}();var _default=FusionEvenetHandler;exports.default=_default;"]},"metadata":{},"sourceType":"script"}