{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _tool = _interopRequireDefault(require(\"../tool\"));\n\nvar _lib = require(\"../../../lib\");\n\nvar _dependencyManager = require(\"../../../dependency-manager\");\n\nvar R = (0, _dependencyManager.getDep)(\"redraphael\", \"plugin\"),\n    M = \"M\",\n    m = \"m\",\n    v = \"v\",\n    COLOR_5F5F5F = \"#5F5F5F\";\n\nvar ScrollAnchor = function (_Tool) {\n  (0, _inheritsLoose2.default)(ScrollAnchor, _Tool);\n\n  function ScrollAnchor() {\n    var _this;\n\n    _this = _Tool.call(this) || this;\n    _this._evtHandlers = {};\n    return _this;\n  }\n\n  var _proto = ScrollAnchor.prototype;\n\n  _proto.configureAttributes = function configureAttributes(obj) {\n    if (obj === void 0) {\n      obj = {};\n    }\n\n    var selfConfig = this.config;\n    selfConfig.drawStripes = (0, _lib.pluckNumber)(obj.drawStripes, 0);\n    selfConfig._nodeDimensions = {};\n    selfConfig.style = {\n      scroller: Object.assign({}, {\n        fill: obj.displayFlat && R.tintshade(obj.color, -.6).rgba || [270 * obj.isHorizontal, R.tintshade(obj.color, .3).rgba + \":40\", R.tintshade(obj.color, -.7).rgba].join(\"-\"),\n        stroke: R.tintshade(obj.color, -.6).rgba\n      }, obj.style.scroller),\n      grip: Object.assign({}, {\n        stroke: COLOR_5F5F5F,\n        \"stroke-linecap\": \"round\",\n        \"stroke-width\": 2\n      }, obj.style.grip)\n    };\n  };\n\n  _proto.attachEventHandlers = function attachEventHandlers() {\n    var scrollAnchor = this,\n        scrollbar = this.getLinkedParent(),\n        scrollbarConfig = scrollbar.config,\n        _dragstart,\n        _dragaxis,\n        newScrollPos,\n        isHorizontal = scrollbarConfig.isHorizontal;\n\n    scrollAnchor.addEventListener(\"fc-dragmove\", scrollAnchor._evtHandlers.dragmove || (scrollAnchor._evtHandlers.dragmove = function (event) {\n      newScrollPos = _dragstart + event.originalEvent.data[_dragaxis] / this.config.trackLength;\n\n      if (newScrollPos >= 1) {\n        newScrollPos = 1;\n      } else if (newScrollPos <= 0 || isNaN(newScrollPos)) {\n        newScrollPos = 0;\n      }\n\n      scrollbarConfig.scrollPosition = newScrollPos;\n      scrollAnchor.asyncDraw();\n      typeof scrollbarConfig.evt.scroll === \"function\" && scrollbarConfig.evt.scroll(scrollbarConfig.scrollPosition);\n    }));\n    scrollAnchor.addEventListener(\"fc-dragstart\", scrollAnchor._evtHandlers.dragstart || (scrollAnchor._evtHandlers.dragstart = function () {\n      _dragaxis = isHorizontal ? 0 : 1;\n      _dragstart = scrollbarConfig.scrollPosition;\n      typeof scrollbarConfig.evt.scrollStart === \"function\" && scrollbarConfig.evt.scrollStart(scrollbarConfig.scrollPosition);\n    }));\n    scrollAnchor.addEventListener(\"fc-dragend\", scrollAnchor._evtHandlers.dragend || (scrollAnchor._evtHandlers.dragend = function () {\n      typeof scrollbarConfig.evt.scrollEnd === \"function\" && scrollbarConfig.evt.scrollEnd(scrollbarConfig.scrollPosition);\n    }));\n  };\n\n  _proto.draw = function draw() {\n    var scrollAnchor = this,\n        selfConfig = scrollAnchor.config,\n        scrollbar = this.getLinkedParent(),\n        scrollbarConfig = scrollbar.config,\n        x = scrollbarConfig.x + .5,\n        y = scrollbarConfig.y + scrollbarConfig.padding + .5,\n        width = scrollbarConfig.width - 1,\n        height = scrollbarConfig.height - 1 < 1 ? 1 : scrollbarConfig.height - 1,\n        ratio = scrollbarConfig.restrictScrollAnchor ? Math.max(scrollbarConfig.scrollRatio, .01) : scrollbarConfig.scrollRatio,\n        isHorizontal = scrollbarConfig.isHorizontal,\n        position = (0, _lib.pluckNumber)(scrollbarConfig.scrollPosition, scrollbarConfig.startPercent, 0),\n        trackLength,\n        trackOffset,\n        button = 0,\n        track = isHorizontal ? width * ratio : height * ratio;\n\n    if (position >= 1) {\n      position = 1;\n    } else if (position <= 0 || isNaN(position)) {\n      position = 0;\n    }\n\n    if (scrollbarConfig.showButtons) {\n      button = isHorizontal ? Math.min(height, width * .5) : Math.min(width, height * .5);\n      track -= button * 2 * ratio;\n    }\n\n    selfConfig.trackLength = trackLength = isHorizontal ? width - 2 * button - track : height - 2 * button - track;\n    selfConfig.trackOffset = trackOffset = isHorizontal ? x + button + .5 : y + button + .5;\n    selfConfig._nodeDimensions = {\n      x: isHorizontal ? trackOffset + trackLength * position : x,\n      y: isHorizontal ? y : trackOffset + trackLength * position,\n      width: isHorizontal ? track - 1 < 1 ? 1 : track - 1 : width < 1 ? 1 : width,\n      height: isHorizontal ? height < 1 ? 1 : height : track - 1 < 1 ? 1 : track - 1\n    };\n    scrollAnchor.addGraphicalElement({\n      el: \"rect\",\n      attr: {\n        x: selfConfig._nodeDimensions.x,\n        y: selfConfig._nodeDimensions.y,\n        width: selfConfig._nodeDimensions.width,\n        height: selfConfig._nodeDimensions.height,\n        r: scrollbarConfig.roundEdges && 2 || 0,\n        opacity: selfConfig.style.scroller.opacity\n      },\n      css: selfConfig.style.scroller,\n      container: {\n        id: \"scrollbarGroup\",\n        label: \"scrollbarGroup\",\n        isParent: true\n      },\n      component: scrollAnchor,\n      label: \"scrollbarAnchor\",\n      id: \"scrollbarAnchor\"\n    });\n\n    if (selfConfig.drawStripes && selfConfig._nodeDimensions.width >= 8) {\n      scrollAnchor.addGraphicalElement({\n        el: \"path\",\n        attr: {\n          path: [M, selfConfig._nodeDimensions.x + selfConfig._nodeDimensions.width / 2 - 3, selfConfig._nodeDimensions.y + .2 * selfConfig._nodeDimensions.height, v, .6 * selfConfig._nodeDimensions.height, m, 3, -.6 * selfConfig._nodeDimensions.height, v, .6 * selfConfig._nodeDimensions.height, m, 3, -.6 * selfConfig._nodeDimensions.height, v, .6 * selfConfig._nodeDimensions.height],\n          opacity: selfConfig.style.grip.opacity\n        },\n        css: selfConfig.style.grip,\n        container: {\n          id: \"scrollbarGroup\",\n          label: \"scrollbarGroup\",\n          isParent: true\n        },\n        component: scrollAnchor,\n        label: \"scrollbarAnchorStripe\",\n        id: \"scrollbarAnchorStripe\"\n      });\n    }\n  };\n\n  return ScrollAnchor;\n}(_tool.default);\n\nvar _default = ScrollAnchor;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/core/src/toolbox/tools/scrollbar/scroll-anchor.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_inheritsLoose2","_tool","_lib","_dependencyManager","R","getDep","M","m","v","COLOR_5F5F5F","ScrollAnchor","_Tool","_this","call","_evtHandlers","_proto","prototype","configureAttributes","obj","selfConfig","config","drawStripes","pluckNumber","_nodeDimensions","style","scroller","Object","assign","fill","displayFlat","tintshade","color","rgba","isHorizontal","join","stroke","grip","attachEventHandlers","scrollAnchor","scrollbar","getLinkedParent","scrollbarConfig","_dragstart","_dragaxis","newScrollPos","addEventListener","dragmove","event","originalEvent","data","trackLength","isNaN","scrollPosition","asyncDraw","evt","scroll","dragstart","scrollStart","dragend","scrollEnd","draw","x","y","padding","width","height","ratio","restrictScrollAnchor","Math","max","scrollRatio","position","startPercent","trackOffset","button","track","showButtons","min","addGraphicalElement","el","attr","r","roundEdges","opacity","css","container","id","label","isParent","component","path","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _tool=_interopRequireDefault(require(\"../tool\"));var _lib=require(\"../../../lib\");var _dependencyManager=require(\"../../../dependency-manager\");var R=(0,_dependencyManager.getDep)(\"redraphael\",\"plugin\"),M=\"M\",m=\"m\",v=\"v\",COLOR_5F5F5F=\"#5F5F5F\";var ScrollAnchor=function(_Tool){(0,_inheritsLoose2.default)(ScrollAnchor,_Tool);function ScrollAnchor(){var _this;_this=_Tool.call(this)||this;_this._evtHandlers={};return _this}var _proto=ScrollAnchor.prototype;_proto.configureAttributes=function configureAttributes(obj){if(obj===void 0){obj={}}var selfConfig=this.config;selfConfig.drawStripes=(0,_lib.pluckNumber)(obj.drawStripes,0);selfConfig._nodeDimensions={};selfConfig.style={scroller:Object.assign({},{fill:obj.displayFlat&&R.tintshade(obj.color,-.6).rgba||[270*obj.isHorizontal,R.tintshade(obj.color,.3).rgba+\":40\",R.tintshade(obj.color,-.7).rgba].join(\"-\"),stroke:R.tintshade(obj.color,-.6).rgba},obj.style.scroller),grip:Object.assign({},{stroke:COLOR_5F5F5F,\"stroke-linecap\":\"round\",\"stroke-width\":2},obj.style.grip)}};_proto.attachEventHandlers=function attachEventHandlers(){var scrollAnchor=this,scrollbar=this.getLinkedParent(),scrollbarConfig=scrollbar.config,_dragstart,_dragaxis,newScrollPos,isHorizontal=scrollbarConfig.isHorizontal;scrollAnchor.addEventListener(\"fc-dragmove\",scrollAnchor._evtHandlers.dragmove||(scrollAnchor._evtHandlers.dragmove=function(event){newScrollPos=_dragstart+event.originalEvent.data[_dragaxis]/this.config.trackLength;if(newScrollPos>=1){newScrollPos=1}else if(newScrollPos<=0||isNaN(newScrollPos)){newScrollPos=0}scrollbarConfig.scrollPosition=newScrollPos;scrollAnchor.asyncDraw();typeof scrollbarConfig.evt.scroll===\"function\"&&scrollbarConfig.evt.scroll(scrollbarConfig.scrollPosition)}));scrollAnchor.addEventListener(\"fc-dragstart\",scrollAnchor._evtHandlers.dragstart||(scrollAnchor._evtHandlers.dragstart=function(){_dragaxis=isHorizontal?0:1;_dragstart=scrollbarConfig.scrollPosition;typeof scrollbarConfig.evt.scrollStart===\"function\"&&scrollbarConfig.evt.scrollStart(scrollbarConfig.scrollPosition)}));scrollAnchor.addEventListener(\"fc-dragend\",scrollAnchor._evtHandlers.dragend||(scrollAnchor._evtHandlers.dragend=function(){typeof scrollbarConfig.evt.scrollEnd===\"function\"&&scrollbarConfig.evt.scrollEnd(scrollbarConfig.scrollPosition)}))};_proto.draw=function draw(){var scrollAnchor=this,selfConfig=scrollAnchor.config,scrollbar=this.getLinkedParent(),scrollbarConfig=scrollbar.config,x=scrollbarConfig.x+.5,y=scrollbarConfig.y+scrollbarConfig.padding+.5,width=scrollbarConfig.width-1,height=scrollbarConfig.height-1<1?1:scrollbarConfig.height-1,ratio=scrollbarConfig.restrictScrollAnchor?Math.max(scrollbarConfig.scrollRatio,.01):scrollbarConfig.scrollRatio,isHorizontal=scrollbarConfig.isHorizontal,position=(0,_lib.pluckNumber)(scrollbarConfig.scrollPosition,scrollbarConfig.startPercent,0),trackLength,trackOffset,button=0,track=isHorizontal?width*ratio:height*ratio;if(position>=1){position=1}else if(position<=0||isNaN(position)){position=0}if(scrollbarConfig.showButtons){button=isHorizontal?Math.min(height,width*.5):Math.min(width,height*.5);track-=button*2*ratio}selfConfig.trackLength=trackLength=isHorizontal?width-2*button-track:height-2*button-track;selfConfig.trackOffset=trackOffset=isHorizontal?x+button+.5:y+button+.5;selfConfig._nodeDimensions={x:isHorizontal?trackOffset+trackLength*position:x,y:isHorizontal?y:trackOffset+trackLength*position,width:isHorizontal?track-1<1?1:track-1:width<1?1:width,height:isHorizontal?height<1?1:height:track-1<1?1:track-1};scrollAnchor.addGraphicalElement({el:\"rect\",attr:{x:selfConfig._nodeDimensions.x,y:selfConfig._nodeDimensions.y,width:selfConfig._nodeDimensions.width,height:selfConfig._nodeDimensions.height,r:scrollbarConfig.roundEdges&&2||0,opacity:selfConfig.style.scroller.opacity},css:selfConfig.style.scroller,container:{id:\"scrollbarGroup\",label:\"scrollbarGroup\",isParent:true},component:scrollAnchor,label:\"scrollbarAnchor\",id:\"scrollbarAnchor\"});if(selfConfig.drawStripes&&selfConfig._nodeDimensions.width>=8){scrollAnchor.addGraphicalElement({el:\"path\",attr:{path:[M,selfConfig._nodeDimensions.x+selfConfig._nodeDimensions.width/2-3,selfConfig._nodeDimensions.y+.2*selfConfig._nodeDimensions.height,v,.6*selfConfig._nodeDimensions.height,m,3,-.6*selfConfig._nodeDimensions.height,v,.6*selfConfig._nodeDimensions.height,m,3,-.6*selfConfig._nodeDimensions.height,v,.6*selfConfig._nodeDimensions.height],opacity:selfConfig.style.grip.opacity},css:selfConfig.style.grip,container:{id:\"scrollbarGroup\",label:\"scrollbarGroup\",isParent:true},component:scrollAnchor,label:\"scrollbarAnchorStripe\",id:\"scrollbarAnchorStripe\"})}};return ScrollAnchor}(_tool.default);var _default=ScrollAnchor;exports.default=_default;"]},"metadata":{},"sourceType":"script"}