{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _tooltipComponent = _interopRequireDefault(require(\"./tooltip-component\"));\n\nvar _lib = require(\"@fusioncharts/core/src/lib\");\n\nvar TOOL_TIP_KEY = \"__FC_tooltipText\",\n    MOVE_HANDLER = \"__FC_onTooltipMove\",\n    OUT_HANDLER = \"__FC_onTooltipOut\",\n    OVER_HANDLER = \"__FC_onTooltipOver\",\n    IMPLICIT = \"implicit\",\n    MOUSE_POINTER_WIDTH_OFFSET = 11,\n    MOUSE_POINTER_HEIGHT_OFFSET = 11;\n\nvar moveHandler = function moveHandler(toolTip, controller, sentEvent) {\n  var event = (0, _lib.getMouseCoordinate)(controller.universe, (0, _lib.getTouchEvent)(sentEvent), controller.chart),\n      mousePointerWidthOffset = MOUSE_POINTER_WIDTH_OFFSET,\n      mousePointerHeightOffset = MOUSE_POINTER_HEIGHT_OFFSET,\n      x = event.chartX,\n      y = event.chartY;\n  x += mousePointerWidthOffset;\n  y += mousePointerHeightOffset;\n\n  ToolTipController._draw.call(controller, x, y, this.data(TOOL_TIP_KEY), toolTip);\n},\n    outHandler = function outHandler(toolTip) {\n  ToolTipController._hide(toolTip);\n};\n\nvar ToolTipController = function () {\n  function ToolTipController(universe, chart) {\n    var tooltipController = this;\n    tooltipController.config = {};\n    tooltipController.universe = universe;\n    this.chart = chart;\n    this.restrictWithinCanvas = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    tooltipController.toolTips = {\n      implicit: [],\n      explicit: []\n    };\n\n    tooltipController.hideImplicitToolTip = function (e) {\n      var toolTip = tooltipController.lastActiveToolip;\n\n      if (toolTip && e.target !== toolTip.getData(\"targetElement\").node) {\n        ToolTipController._hide(toolTip);\n\n        tooltipController.config.lastActiveToolip = _lib.UNDEF;\n      }\n    };\n\n    tooltipController.config.positioningArr = [];\n    tooltipController.config.canvasArr = [];\n    universe.FusionCharts.jsVars.fcObj.addEventListener(\"resized\", tooltipController._updateAllToolTipBounds.bind(tooltipController));\n  }\n\n  var _proto = ToolTipController.prototype;\n\n  _proto.setRestrictionWithinCanvas = function setRestrictionWithinCanvas(obj) {\n    if (obj === void 0) {\n      obj = {};\n    }\n\n    Object.assign(this.restrictWithinCanvas, obj);\n  };\n\n  _proto.getRestrictionWithinCanvas = function getRestrictionWithinCanvas() {\n    return this.restrictWithinCanvas;\n  };\n\n  _proto._updateAllToolTipBounds = function _updateAllToolTipBounds() {\n    var tooltipController = this,\n        config = tooltipController.config,\n        canvasIndex,\n        types,\n        callback = function callback(tooltip) {\n      if (tooltip.universeBounds && tooltip.universeBounds.canvas) {\n        canvasIndex = config.canvasArr.indexOf(tooltip.universeBounds.canvas);\n      }\n\n      tooltip.setUniverseBounds(config.positioningArr[canvasIndex]);\n    },\n        toolTips = tooltipController.toolTips;\n\n    for (types in toolTips) {\n      toolTips[types].forEach(callback);\n    }\n  };\n\n  _proto._setRelativePosition = function _setRelativePosition(positioningObj) {\n    var config = this.config,\n        canvasArr = config.canvasArr,\n        positioningArr = config.positioningArr,\n        canvasIndex = canvasArr.indexOf(positioningObj.canvas);\n\n    if (canvasIndex === -1) {\n      canvasArr.push(positioningObj.canvas);\n      positioningArr.push(positioningObj);\n    } else {\n      canvasArr[canvasIndex] = positioningObj.canvas;\n      positioningArr[canvasIndex] = positioningObj;\n    }\n  };\n\n  _proto._createToolTip = function _createToolTip(toolTipType, canvas) {\n    var tooltipController = this,\n        config = tooltipController.config,\n        toolTip;\n    toolTip = new _tooltipComponent.default(this.universe, config.positioningArr[config.canvasArr.indexOf(canvas)]);\n    toolTip.setRestrictionWithinCanvas(tooltipController.restrictWithinCanvas);\n    toolTip.setStyle(tooltipController.config.tooltipStyle);\n    tooltipController.toolTips[toolTipType].push(toolTip);\n    return toolTip;\n  };\n\n  _proto.enableToolTip = function enableToolTip(element, text, canvas) {\n    var ref = this,\n        tooltipImplicitArray = ref.toolTips[IMPLICIT],\n        length = tooltipImplicitArray.length,\n        index,\n        toolTip;\n\n    if (element && element.abbrArr && element.abbrArr.length) {\n      for (index = 0; index < element.abbrArr.length; index++) {\n        ref.enableToolTip(element.abbrArr[index].el, element.abbrArr[index].title, canvas);\n      }\n    }\n\n    if (!text) {\n      ref.disableToolTip(element);\n      return ref;\n    } else if (element.data(TOOL_TIP_KEY)) {\n      if (length > 0) {\n        tooltipImplicitArray.some(function (_tooltip) {\n          toolTip = _tooltip;\n\n          if (toolTip.getData(\"active\") && toolTip.data.targetElement === element) {\n            toolTip.show(text);\n            return true;\n          }\n\n          return false;\n        });\n      }\n\n      element.data(TOOL_TIP_KEY, text);\n      return ref;\n    }\n\n    toolTip = ref._getAvailableToolTip(\"implicit\", canvas);\n    ref.disableToolTip(element);\n    element.data(TOOL_TIP_KEY, text);\n    element.data(MOVE_HANDLER, moveHandler.bind(element, toolTip, ref));\n    element.data(OUT_HANDLER, outHandler.bind(element, toolTip));\n    element.data(OVER_HANDLER, function (_element) {\n      return function (e) {\n        ref.draw(e, element.data(TOOL_TIP_KEY), toolTip);\n        toolTip.setData(\"targetElement\", _element);\n        ref.config.lastActiveToolip = toolTip;\n      };\n    }(element));\n    element.on(\"fc-mousemove\", element.data(MOVE_HANDLER));\n    element.on(\"fc-mouseout\", element.data(OUT_HANDLER));\n    element.on(\"fc-mouseover\", element.data(OVER_HANDLER));\n    return ref;\n  };\n\n  _proto.disableToolTip = function disableToolTip(element) {\n    var elemOutHandler = element.data(OUT_HANDLER),\n        elemMoveHandler = element.data(MOVE_HANDLER),\n        elemOverHandler = element.data(OVER_HANDLER);\n    elemMoveHandler && element.off(\"fc-mousemove\", elemMoveHandler);\n    elemOutHandler && element.off(\"fc-mouseout\", elemOutHandler);\n    elemOverHandler && element.off(\"fc-mouseover\", elemOverHandler);\n    element.removeData(TOOL_TIP_KEY);\n    return this;\n  };\n\n  _proto.draw = function draw(sentEvent, text, toolTip, canvas) {\n    var mousePointerWidthOffset = MOUSE_POINTER_WIDTH_OFFSET,\n        mousePointerHeightOffset = MOUSE_POINTER_HEIGHT_OFFSET,\n        x,\n        y,\n        event = (0, _lib.getMouseCoordinate)(this.universe, (0, _lib.getTouchEvent)(sentEvent), this.chart),\n        currToolTip = toolTip && !toolTip.disposed ? toolTip : this._getAvailableToolTip(\"explicit\", canvas);\n    x = event.chartX;\n    y = event.chartY;\n    x += mousePointerWidthOffset;\n    y += mousePointerHeightOffset;\n\n    ToolTipController._draw.call(this, x, y, text, currToolTip);\n\n    return currToolTip;\n  };\n\n  _proto.drawAt = function drawAt(x, y, text, toolTip, canvas) {\n    var currToolTip = toolTip && !toolTip.disposed ? toolTip : this._getAvailableToolTip(\"explicit\", canvas);\n\n    ToolTipController._draw.call(this, x, y, text, currToolTip);\n\n    return currToolTip;\n  };\n\n  ToolTipController._draw = function _draw(x, y, text, toolTip) {\n    var toolTipConfig = this.config,\n        chartConfig = this.chart.getFromEnv(\"chartConfig\"),\n        tooltipPosition = chartConfig.tooltipposition;\n\n    if (!(0, _lib.isSimilarObject)(toolTip.previousStyle, toolTipConfig.tooltipStyle)) {\n      toolTip.setStyle(toolTipConfig.tooltipStyle);\n      toolTip.previousStyle = Object.assign({}, toolTipConfig.tooltipStyle);\n    }\n\n    toolTip.show(text);\n    toolTip.update(x, y, tooltipPosition);\n  };\n\n  _proto._getAvailableToolTip = function _getAvailableToolTip(type, canvas) {\n    var toolTips = this.toolTips[type],\n        toolTip,\n        isToolTipInactive;\n\n    for (var i = 0, ii = toolTips.length; i < ii; i++) {\n      toolTip = toolTips[i];\n      isToolTipInactive = toolTip.getData(\"active\") === false;\n\n      if (isToolTipInactive) {\n        return toolTip;\n      }\n    }\n\n    return this._createToolTip(type, canvas);\n  };\n\n  _proto.setStyle = function setStyle(obj) {\n    var toolTipController = this,\n        toolTipConfig = toolTipController.config,\n        tooltipStyle;\n    tooltipStyle = toolTipConfig.tooltipStyle = {};\n\n    for (var key in obj) {\n      if (key === \"showToolTipShadow\") {\n        if (obj[key]) {\n          tooltipStyle.boxShadow = \"1px 1px 3px rgba(64,64,64,0.4)\";\n        } else {\n          tooltipStyle.boxShadow = \"none\";\n        }\n      } else {\n        tooltipStyle[key] = obj[key];\n      }\n    }\n  };\n\n  _proto.hide = function hide(toolTip) {\n    ToolTipController._hide(toolTip);\n\n    return this;\n  };\n\n  _proto.hideAll = function hideAll() {\n    var self = this,\n        type,\n        i;\n\n    for (type in self.toolTips) {\n      for (i = 0; i < self.toolTips[type].length; i++) {\n        ToolTipController._hide(self.toolTips[type][i]);\n      }\n    }\n  };\n\n  ToolTipController._hide = function _hide(toolTip, willDispose) {\n    if (toolTip) {\n      if (willDispose) {\n        toolTip.dispose();\n      } else {\n        toolTip.hide();\n      }\n    }\n  };\n\n  return ToolTipController;\n}();\n\nvar _default = {\n  extension: ToolTipController,\n  name: \"ToolTipController\",\n  type: \"plugin\"\n};\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/features/src/tooltip-controller/index.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_tooltipComponent","_lib","TOOL_TIP_KEY","MOVE_HANDLER","OUT_HANDLER","OVER_HANDLER","IMPLICIT","MOUSE_POINTER_WIDTH_OFFSET","MOUSE_POINTER_HEIGHT_OFFSET","moveHandler","toolTip","controller","sentEvent","event","getMouseCoordinate","universe","getTouchEvent","chart","mousePointerWidthOffset","mousePointerHeightOffset","x","chartX","y","chartY","ToolTipController","_draw","call","data","outHandler","_hide","tooltipController","config","restrictWithinCanvas","left","right","top","bottom","toolTips","implicit","explicit","hideImplicitToolTip","e","lastActiveToolip","target","getData","node","UNDEF","positioningArr","canvasArr","FusionCharts","jsVars","fcObj","addEventListener","_updateAllToolTipBounds","bind","_proto","prototype","setRestrictionWithinCanvas","obj","Object","assign","getRestrictionWithinCanvas","canvasIndex","types","callback","tooltip","universeBounds","canvas","indexOf","setUniverseBounds","forEach","_setRelativePosition","positioningObj","push","_createToolTip","toolTipType","setStyle","tooltipStyle","enableToolTip","element","text","ref","tooltipImplicitArray","length","index","abbrArr","el","title","disableToolTip","some","_tooltip","targetElement","show","_getAvailableToolTip","_element","draw","setData","on","elemOutHandler","elemMoveHandler","elemOverHandler","off","removeData","currToolTip","disposed","drawAt","toolTipConfig","chartConfig","getFromEnv","tooltipPosition","tooltipposition","isSimilarObject","previousStyle","update","type","isToolTipInactive","i","ii","toolTipController","key","boxShadow","hide","hideAll","self","willDispose","dispose","_default","extension","name"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _tooltipComponent=_interopRequireDefault(require(\"./tooltip-component\"));var _lib=require(\"@fusioncharts/core/src/lib\");var TOOL_TIP_KEY=\"__FC_tooltipText\",MOVE_HANDLER=\"__FC_onTooltipMove\",OUT_HANDLER=\"__FC_onTooltipOut\",OVER_HANDLER=\"__FC_onTooltipOver\",IMPLICIT=\"implicit\",MOUSE_POINTER_WIDTH_OFFSET=11,MOUSE_POINTER_HEIGHT_OFFSET=11;var moveHandler=function moveHandler(toolTip,controller,sentEvent){var event=(0,_lib.getMouseCoordinate)(controller.universe,(0,_lib.getTouchEvent)(sentEvent),controller.chart),mousePointerWidthOffset=MOUSE_POINTER_WIDTH_OFFSET,mousePointerHeightOffset=MOUSE_POINTER_HEIGHT_OFFSET,x=event.chartX,y=event.chartY;x+=mousePointerWidthOffset;y+=mousePointerHeightOffset;ToolTipController._draw.call(controller,x,y,this.data(TOOL_TIP_KEY),toolTip)},outHandler=function outHandler(toolTip){ToolTipController._hide(toolTip)};var ToolTipController=function(){function ToolTipController(universe,chart){var tooltipController=this;tooltipController.config={};tooltipController.universe=universe;this.chart=chart;this.restrictWithinCanvas={left:false,right:false,top:false,bottom:false};tooltipController.toolTips={implicit:[],explicit:[]};tooltipController.hideImplicitToolTip=function(e){var toolTip=tooltipController.lastActiveToolip;if(toolTip&&e.target!==toolTip.getData(\"targetElement\").node){ToolTipController._hide(toolTip);tooltipController.config.lastActiveToolip=_lib.UNDEF}};tooltipController.config.positioningArr=[];tooltipController.config.canvasArr=[];universe.FusionCharts.jsVars.fcObj.addEventListener(\"resized\",tooltipController._updateAllToolTipBounds.bind(tooltipController))}var _proto=ToolTipController.prototype;_proto.setRestrictionWithinCanvas=function setRestrictionWithinCanvas(obj){if(obj===void 0){obj={}}Object.assign(this.restrictWithinCanvas,obj)};_proto.getRestrictionWithinCanvas=function getRestrictionWithinCanvas(){return this.restrictWithinCanvas};_proto._updateAllToolTipBounds=function _updateAllToolTipBounds(){var tooltipController=this,config=tooltipController.config,canvasIndex,types,callback=function callback(tooltip){if(tooltip.universeBounds&&tooltip.universeBounds.canvas){canvasIndex=config.canvasArr.indexOf(tooltip.universeBounds.canvas)}tooltip.setUniverseBounds(config.positioningArr[canvasIndex])},toolTips=tooltipController.toolTips;for(types in toolTips){toolTips[types].forEach(callback)}};_proto._setRelativePosition=function _setRelativePosition(positioningObj){var config=this.config,canvasArr=config.canvasArr,positioningArr=config.positioningArr,canvasIndex=canvasArr.indexOf(positioningObj.canvas);if(canvasIndex===-1){canvasArr.push(positioningObj.canvas);positioningArr.push(positioningObj)}else{canvasArr[canvasIndex]=positioningObj.canvas;positioningArr[canvasIndex]=positioningObj}};_proto._createToolTip=function _createToolTip(toolTipType,canvas){var tooltipController=this,config=tooltipController.config,toolTip;toolTip=new _tooltipComponent.default(this.universe,config.positioningArr[config.canvasArr.indexOf(canvas)]);toolTip.setRestrictionWithinCanvas(tooltipController.restrictWithinCanvas);toolTip.setStyle(tooltipController.config.tooltipStyle);tooltipController.toolTips[toolTipType].push(toolTip);return toolTip};_proto.enableToolTip=function enableToolTip(element,text,canvas){var ref=this,tooltipImplicitArray=ref.toolTips[IMPLICIT],length=tooltipImplicitArray.length,index,toolTip;if(element&&element.abbrArr&&element.abbrArr.length){for(index=0;index<element.abbrArr.length;index++){ref.enableToolTip(element.abbrArr[index].el,element.abbrArr[index].title,canvas)}}if(!text){ref.disableToolTip(element);return ref}else if(element.data(TOOL_TIP_KEY)){if(length>0){tooltipImplicitArray.some((function(_tooltip){toolTip=_tooltip;if(toolTip.getData(\"active\")&&toolTip.data.targetElement===element){toolTip.show(text);return true}return false}))}element.data(TOOL_TIP_KEY,text);return ref}toolTip=ref._getAvailableToolTip(\"implicit\",canvas);ref.disableToolTip(element);element.data(TOOL_TIP_KEY,text);element.data(MOVE_HANDLER,moveHandler.bind(element,toolTip,ref));element.data(OUT_HANDLER,outHandler.bind(element,toolTip));element.data(OVER_HANDLER,function(_element){return function(e){ref.draw(e,element.data(TOOL_TIP_KEY),toolTip);toolTip.setData(\"targetElement\",_element);ref.config.lastActiveToolip=toolTip}}(element));element.on(\"fc-mousemove\",element.data(MOVE_HANDLER));element.on(\"fc-mouseout\",element.data(OUT_HANDLER));element.on(\"fc-mouseover\",element.data(OVER_HANDLER));return ref};_proto.disableToolTip=function disableToolTip(element){var elemOutHandler=element.data(OUT_HANDLER),elemMoveHandler=element.data(MOVE_HANDLER),elemOverHandler=element.data(OVER_HANDLER);elemMoveHandler&&element.off(\"fc-mousemove\",elemMoveHandler);elemOutHandler&&element.off(\"fc-mouseout\",elemOutHandler);elemOverHandler&&element.off(\"fc-mouseover\",elemOverHandler);element.removeData(TOOL_TIP_KEY);return this};_proto.draw=function draw(sentEvent,text,toolTip,canvas){var mousePointerWidthOffset=MOUSE_POINTER_WIDTH_OFFSET,mousePointerHeightOffset=MOUSE_POINTER_HEIGHT_OFFSET,x,y,event=(0,_lib.getMouseCoordinate)(this.universe,(0,_lib.getTouchEvent)(sentEvent),this.chart),currToolTip=toolTip&&!toolTip.disposed?toolTip:this._getAvailableToolTip(\"explicit\",canvas);x=event.chartX;y=event.chartY;x+=mousePointerWidthOffset;y+=mousePointerHeightOffset;ToolTipController._draw.call(this,x,y,text,currToolTip);return currToolTip};_proto.drawAt=function drawAt(x,y,text,toolTip,canvas){var currToolTip=toolTip&&!toolTip.disposed?toolTip:this._getAvailableToolTip(\"explicit\",canvas);ToolTipController._draw.call(this,x,y,text,currToolTip);return currToolTip};ToolTipController._draw=function _draw(x,y,text,toolTip){var toolTipConfig=this.config,chartConfig=this.chart.getFromEnv(\"chartConfig\"),tooltipPosition=chartConfig.tooltipposition;if(!(0,_lib.isSimilarObject)(toolTip.previousStyle,toolTipConfig.tooltipStyle)){toolTip.setStyle(toolTipConfig.tooltipStyle);toolTip.previousStyle=Object.assign({},toolTipConfig.tooltipStyle)}toolTip.show(text);toolTip.update(x,y,tooltipPosition)};_proto._getAvailableToolTip=function _getAvailableToolTip(type,canvas){var toolTips=this.toolTips[type],toolTip,isToolTipInactive;for(var i=0,ii=toolTips.length;i<ii;i++){toolTip=toolTips[i];isToolTipInactive=toolTip.getData(\"active\")===false;if(isToolTipInactive){return toolTip}}return this._createToolTip(type,canvas)};_proto.setStyle=function setStyle(obj){var toolTipController=this,toolTipConfig=toolTipController.config,tooltipStyle;tooltipStyle=toolTipConfig.tooltipStyle={};for(var key in obj){if(key===\"showToolTipShadow\"){if(obj[key]){tooltipStyle.boxShadow=\"1px 1px 3px rgba(64,64,64,0.4)\"}else{tooltipStyle.boxShadow=\"none\"}}else{tooltipStyle[key]=obj[key]}}};_proto.hide=function hide(toolTip){ToolTipController._hide(toolTip);return this};_proto.hideAll=function hideAll(){var self=this,type,i;for(type in self.toolTips){for(i=0;i<self.toolTips[type].length;i++){ToolTipController._hide(self.toolTips[type][i])}}};ToolTipController._hide=function _hide(toolTip,willDispose){if(toolTip){if(willDispose){toolTip.dispose()}else{toolTip.hide()}}};return ToolTipController}();var _default={extension:ToolTipController,name:\"ToolTipController\",type:\"plugin\"};exports.default=_default;"]},"metadata":{},"sourceType":"script"}