{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _componentInterface = require(\"@fusioncharts/core/src/component-interface\");\n\nvar _dependencyManager = require(\"@fusioncharts/core/src/dependency-manager\");\n\nvar _eventApi = require(\"@fusioncharts/core/src/event-api\");\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  it = o[Symbol.iterator]();\n  return it.next.bind(it);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar UNDEF,\n    BLANK = \"\",\n    OBJECTSTRING = \"object\",\n    arrayToStr = \"[object Array]\",\n    objectToStr = \"[object Object]\",\n    themer,\n    isImportantRegEx = /\\s+!important$/,\n    importantStrRegEx = /\\\\!important$/,\n    getValueFromObjProperty = function getValueFromObjProperty(obj, property) {\n  var val,\n      key,\n      prop = property;\n  prop = (prop + \"\").toLowerCase();\n\n  for (key in obj) {\n    if (obj.hasOwnProperty(key) && prop === (key + \"\").toLowerCase()) {\n      val = obj[key];\n      break;\n    }\n  }\n\n  return val;\n},\n    hasFunc = function hasFunc(themeArr) {\n  var i, len;\n\n  for (i = 0, len = themeArr.length; i < len; i++) {\n    if (typeof themeArr[i] === \"function\") {\n      return true;\n    }\n  }\n\n  return false;\n},\n    getArrayFromObj = function getArrayFromObj(obj) {\n  var returnArr = [],\n      key;\n\n  for (key in obj) {\n    returnArr[key] = obj[key];\n  }\n\n  return returnArr;\n},\n    trimString = function trimString(str) {\n  return str.replace(/^\\s\\s*/, \"\").replace(/\\s\\s*$/, \"\");\n},\n    getRegisteredThemes = function getRegisteredThemes(addedThemes) {\n  var themes = {},\n      theme;\n\n  for (var key in addedThemes) {\n    if (addedThemes.hasOwnProperty(key)) {\n      theme = addedThemes[key];\n      themes[theme.name] = theme;\n    }\n  }\n\n  return themes;\n},\n    checkCyclicRef = function checkCyclicRef(obj, parentArr) {\n  var i = parentArr.length,\n      bIndex = -1;\n\n  while (i--) {\n    if (obj === parentArr[i]) {\n      bIndex = i;\n      return bIndex;\n    }\n  }\n\n  return bIndex;\n},\n    merge = function merge(target, source, skipUndef, assignByImportance, _tgtArr, _srcArr) {\n  var item,\n      srcVal,\n      tgtVal,\n      str,\n      cRef,\n      tgtArr = _tgtArr,\n      srcArr = _srcArr;\n\n  if (!srcArr) {\n    tgtArr = [target];\n    srcArr = [source];\n  } else {\n    tgtArr.push(target);\n    srcArr.push(source);\n  }\n\n  if (source instanceof Array) {\n    for (item = 0; item < source.length; item += 1) {\n      try {\n        srcVal = target[item];\n        tgtVal = source[item];\n      } catch (e) {\n        continue;\n      }\n\n      if (typeof tgtVal !== OBJECTSTRING) {\n        if (!(skipUndef && tgtVal === UNDEF)) {\n          target[item] = tgtVal;\n        }\n      } else {\n        if (srcVal === null || typeof srcVal !== OBJECTSTRING) {\n          srcVal = target[item] = tgtVal instanceof Array ? [] : {};\n        }\n\n        cRef = checkCyclicRef(tgtVal, srcArr);\n\n        if (cRef !== -1) {\n          srcVal = target[item] = tgtArr[cRef];\n        } else {\n          merge(srcVal, tgtVal, skipUndef, assignByImportance, tgtArr, srcArr);\n        }\n      }\n    }\n  } else {\n    for (item in source) {\n      try {\n        srcVal = target[item];\n        tgtVal = source[item];\n      } catch (e) {\n        continue;\n      }\n\n      if (tgtVal !== null && typeof tgtVal === OBJECTSTRING) {\n        str = Object.prototype.toString.call(tgtVal);\n\n        if (str === objectToStr) {\n          if (srcVal === null || typeof srcVal !== OBJECTSTRING) {\n            srcVal = target[item] = {};\n          }\n\n          cRef = checkCyclicRef(tgtVal, srcArr);\n\n          if (cRef !== -1) {\n            srcVal = target[item] = tgtArr[cRef];\n          } else {\n            if (item === \"data\" && tgtVal._dataStore) {\n              target[item] = assignByImportance ? assignByImportance(srcVal, tgtVal) : tgtVal;\n            } else {\n              merge(srcVal, tgtVal, skipUndef, assignByImportance, tgtArr, srcArr);\n            }\n          }\n        } else if (str === arrayToStr) {\n          if (srcVal === null || !(srcVal instanceof Array)) {\n            srcVal = target[item] = [];\n          }\n\n          cRef = checkCyclicRef(tgtVal, srcArr);\n\n          if (cRef !== -1) {\n            srcVal = target[item] = tgtArr[cRef];\n          } else {\n            merge(srcVal, tgtVal, skipUndef, assignByImportance, tgtArr, srcArr);\n          }\n        } else {\n          target[item] = assignByImportance ? assignByImportance(srcVal, tgtVal) : tgtVal;\n        }\n      } else {\n        target[item] = assignByImportance ? assignByImportance(srcVal, tgtVal) : tgtVal;\n      }\n    }\n  }\n\n  return target;\n},\n    extend2 = function extend2(_obj1, obj2, skipUndef, assignByImportance) {\n  if (assignByImportance === void 0) {\n    assignByImportance = null;\n  }\n\n  var obj1 = _obj1;\n\n  if (typeof obj1 !== OBJECTSTRING && typeof obj2 !== OBJECTSTRING) {\n    return null;\n  }\n\n  if (typeof obj2 !== OBJECTSTRING || obj2 === null) {\n    return obj1;\n  }\n\n  if (typeof obj1 !== OBJECTSTRING) {\n    obj1 = obj2 instanceof Array ? [] : {};\n  }\n\n  merge(obj1, obj2, skipUndef, assignByImportance);\n  return obj1;\n},\n    checkImportance = function checkImportance(_value) {\n  var value = _value;\n  var returnObj = {\n    important: false,\n    str: BLANK\n  };\n\n  if (!value) {\n    return returnObj;\n  }\n\n  value = value.toString();\n\n  if (isImportantRegEx.test(value)) {\n    value = value.replace(isImportantRegEx, BLANK);\n    returnObj.important = true;\n  } else {\n    value = value.replace(importantStrRegEx, \"!imporant\");\n    returnObj.important = false;\n  }\n\n  returnObj.str = value;\n  return returnObj;\n},\n    getImportantStyle = function getImportantStyle(styleA, styleB) {\n  var importanceOfStyleA = checkImportance(styleA),\n      importanceOfStyleB = checkImportance(styleB);\n\n  if (importanceOfStyleA.important && !importanceOfStyleB.important) {\n    return importanceOfStyleA.str;\n  }\n\n  return importanceOfStyleB.str;\n},\n    mergeThemeWithData = function mergeThemeWithData(dataJSON, themeComponent) {\n  var items = themeComponent.getAll(),\n      key,\n      keyLowerCase,\n      valStr,\n      importanceThemeSource,\n      importanceDataSource;\n\n  for (key in items) {\n    keyLowerCase = key.toLowerCase();\n    valStr = items[key].toString();\n    importanceThemeSource = checkImportance(valStr);\n    importanceDataSource = checkImportance(dataJSON[keyLowerCase]);\n\n    if (importanceThemeSource.important && !importanceDataSource.important) {\n      dataJSON[keyLowerCase] = importanceThemeSource.str;\n    } else if (importanceDataSource.important) {\n      dataJSON[keyLowerCase] = importanceDataSource.str;\n    } else if (dataJSON[keyLowerCase] === UNDEF && typeof items[key] !== \"object\") {\n      dataJSON[keyLowerCase] = typeof items[key] !== \"object\" ? importanceThemeSource.str : items[key];\n    } else if (typeof items[key] === \"object\") {\n      if (typeof dataJSON[keyLowerCase] === \"undefined\") {\n        dataJSON[keyLowerCase] = items[key];\n      }\n\n      dataJSON[keyLowerCase] = extend2(items[key], dataJSON[keyLowerCase], false, getImportantStyle);\n    }\n  }\n},\n    getAllUniqueKeys = function getAllUniqueKeys(dataObject, themeInstance) {\n  var keys = [].concat(Object.keys(dataObject));\n  var theme;\n\n  for (var _iterator = _createForOfIteratorHelperLoose(themeInstance.themeArray), _step; !(_step = _iterator()).done;) {\n    theme = _step.value;\n    keys.push.apply(keys, Object.keys(theme));\n  }\n\n  return Array.from(new Set(keys));\n},\n    recursiveApply = function recursiveApply(dataObj, themeObject) {\n  var key,\n      dataItem,\n      themeComponent,\n      item,\n      i,\n      ii,\n      j,\n      vLineIndex = 0,\n      catIndex = 0,\n      hasTimeseriesThemeFunction,\n      items,\n      keysToIterateOn = getAllUniqueKeys(dataObj, themeObject);\n\n  for (var _iterator2 = _createForOfIteratorHelperLoose(keysToIterateOn), _step2; !(_step2 = _iterator2()).done;) {\n    key = _step2.value;\n    dataItem = dataObj[key];\n\n    if (typeof dataItem === \"undefined\") {\n      dataItem = dataObj[key] = {};\n    }\n\n    hasTimeseriesThemeFunction = themeObject.type === \"timeseries\" && themeObject.themeComponents[key] && hasFunc(themeObject.themeComponents[key]);\n\n    if (dataItem instanceof Array && !hasTimeseriesThemeFunction) {\n      ii = dataItem.length;\n\n      for (i = 0; i < ii; i += 1) {\n        item = dataItem[i];\n\n        if (typeof item === \"object\") {\n          if (key === \"category\") {\n            if (item.vline === \"true\") {\n              themeComponent = themeObject.component(\"vline\", vLineIndex, item);\n\n              if (themeComponent) {\n                mergeThemeWithData(item, themeComponent);\n                vLineIndex += 1;\n              }\n            } else {\n              themeComponent = themeObject.component(\"category\", catIndex, item, ii);\n\n              if (themeComponent) {\n                mergeThemeWithData(item, themeComponent);\n                catIndex += 1;\n              }\n            }\n          } else {\n            themeComponent = themeObject.component(key, i, item, ii);\n\n            if (themeComponent) {\n              mergeThemeWithData(item, themeComponent);\n              recursiveApply(item, themeComponent);\n            }\n          }\n        }\n      }\n    } else if (typeof dataItem === \"object\") {\n      if (!hasTimeseriesThemeFunction) {\n        themeComponent = themeObject.component(key, null, dataItem);\n\n        if (themeComponent) {\n          mergeThemeWithData(dataItem, themeComponent);\n          recursiveApply(dataItem, themeComponent);\n        }\n      } else {\n        themeComponent = themeObject.component(key, null, dataItem);\n        items = themeComponent.getAll();\n        dataObj[key] = items;\n\n        if (/^\\d+$/.test(Object.keys(items).join(\"\"))) {\n          items = getArrayFromObj(items);\n          dataObj[key] = items;\n\n          for (j = 0; j < dataObj[key].length; j++) {\n            recursiveApply(dataObj[key][j], themeComponent);\n          }\n        } else {\n          recursiveApply(dataItem, themeComponent);\n        }\n      }\n    }\n  }\n};\n\nvar ThemeManager = function (_ComponentInterface) {\n  (0, _inheritsLoose2.default)(ThemeManager, _ComponentInterface);\n\n  function ThemeManager() {\n    return _ComponentInterface.apply(this, arguments) || this;\n  }\n\n  var _proto = ThemeManager.prototype;\n\n  _proto.configure = function configure() {\n    !this.config.themeStore && (this.config.themeStore = {});\n  };\n\n  _proto.add = function add(themeJSON) {\n    var i = 0,\n        ii = themeJSON.length,\n        themeName;\n\n    for (; i < ii; i += 1) {\n      themeName = themeJSON[i].name;\n\n      if (themeName) {\n        this.config.themeStore[themeName] = themeJSON[i];\n      }\n    }\n  };\n\n  _proto.themify = function themify(themeName, chartInstance, chartType, chartDefinition, additionalBase) {\n    var tm = this,\n        jsVars = chartInstance.jsVars,\n        themes = themeName.split(\",\"),\n        themeArr = [],\n        ii = themes.length,\n        themeJSON,\n        i;\n    tm.config.themeStore = getRegisteredThemes((0, _dependencyManager.getDepsByType)(\"theme\"));\n\n    if (ii) {\n      for (i = 0; i < ii; i += 1) {\n        themeJSON = tm.config.themeStore[trimString(themes[i])];\n        themeJSON && themeArr.push(ThemeManager.evaluateThemeJSON(themeJSON.theme, chartInstance, chartType, additionalBase));\n      }\n\n      if (themeArr.length) {\n        jsVars.themeObject = new ThemeInstance(themeArr, chartInstance, false, chartDefinition, chartType);\n        ThemeManager.applyTheme(chartInstance);\n      } else {\n        (0, _eventApi.raiseWarning)(chartInstance, \"14051100501\", \"run\", \"api.themes~themify()\", 'The theme \"' + themeName + '\" requested has not been registered.');\n      }\n    }\n  };\n\n  ThemeManager.evaluateThemeJSON = function evaluateThemeJSON(themeObject, chartInstance, _chartType, additionalBase) {\n    var evaledTheme = {},\n        jsVars = chartInstance.jsVars,\n        additionalBaseObj,\n        chartAttribObj,\n        chartType = _chartType,\n        evaluator = function evaluator(tblock) {\n      var key, item;\n\n      for (key in tblock) {\n        item = tblock[key];\n\n        if (item instanceof Array) {\n          evaledTheme[key] = extend2(evaledTheme[key] || [], item);\n        } else if (typeof item === \"object\") {\n          evaledTheme[key] = extend2(evaledTheme[key] || {}, item);\n        } else {\n          evaledTheme[key] = item;\n        }\n      }\n    };\n\n    chartType = chartType || chartInstance.chartType();\n\n    if (jsVars.themeObject && themeObject !== jsVars.themeObject) {\n      jsVars.themeObject.dispose();\n      delete jsVars.themeObject;\n    }\n\n    evaluator(getValueFromObjProperty(themeObject, \"base\"));\n    additionalBase && (additionalBaseObj = getValueFromObjProperty(themeObject, additionalBase));\n    additionalBaseObj && evaluator(additionalBaseObj);\n    chartType && (chartAttribObj = getValueFromObjProperty(themeObject, chartType));\n    chartAttribObj && evaluator(chartAttribObj);\n    return evaledTheme;\n  };\n\n  ThemeManager.applyTheme = function applyTheme(chartInstance) {\n    var themeObj = chartInstance.jsVars.themeObject,\n        themedData = themeObj.getThemedJSONData().data;\n\n    if (themedData) {\n      recursiveApply(themedData, themeObj);\n    }\n  };\n\n  return ThemeManager;\n}(_componentInterface.ComponentInterface);\n\nvar ThemeInstance = function (_ComponentInterface2) {\n  (0, _inheritsLoose2.default)(ThemeInstance, _ComponentInterface2);\n\n  function ThemeInstance(themeJSONArr, parent, isChildInstance, chartDefinition, type) {\n    var _this;\n\n    _this = _ComponentInterface2.call(this) || this;\n    var i = 0,\n        ii;\n    _this.themeArray = themeJSONArr;\n    _this.themeComponents = {};\n    _this.base = {};\n    _this.type = type;\n    _this.chartInstance = parent;\n    _this.isChildInstance = Boolean(isChildInstance);\n    _this.themedData = isChildInstance ? null : chartDefinition;\n    _this.length = themeJSONArr.length;\n    ii = themeJSONArr.length;\n\n    for (; i < ii; i += 1) {\n      _this.parse(themeJSONArr[i]);\n    }\n\n    return _this;\n  }\n\n  var _proto2 = ThemeInstance.prototype;\n\n  _proto2.pushTheme = function pushTheme(themeJSON, pushToBase) {\n    if (pushToBase === void 0) {\n      pushToBase = false;\n    }\n\n    if (themeJSON) {\n      this.themeArray.push(themeJSON);\n      this.parse(themeJSON, pushToBase);\n      this.length += 1;\n    }\n  };\n\n  _proto2.parse = function parse(themeJSON, pushToBase) {\n    var ti = this,\n        blockLen,\n        ii;\n\n    if (themeJSON instanceof Array) {\n      blockLen = themeJSON.length;\n\n      for (ii = 0; ii < blockLen; ii++) {\n        ti._parseSubBlock(themeJSON[ii], pushToBase);\n      }\n    } else {\n      ti._parseSubBlock(themeJSON, pushToBase);\n    }\n  };\n\n  _proto2._parseSubBlock = function _parseSubBlock(_subBlock, pushToBase) {\n    var ti = this,\n        base = ti.base,\n        type = ti.type,\n        components = ti.themeComponents,\n        parent = ti.chartInstance,\n        isChildInstance = ti.isChildInstance,\n        key,\n        imp1,\n        imp2,\n        componentArr;\n\n    for (key in _subBlock) {\n      if (typeof _subBlock[key] === \"string\" || typeof _subBlock[key] === \"number\") {\n        if (base[key]) {\n          imp1 = checkImportance(_subBlock[key]);\n          imp2 = checkImportance(base[key]);\n\n          if (imp1.important || !imp2.important) {\n            base[key] = _subBlock[key];\n          }\n        } else {\n          base[key] = _subBlock[key];\n        }\n      } else if (type === \"timeseries\" && isChildInstance) {\n        if (_subBlock[key] instanceof Array && key !== \"palettecolors\" && !pushToBase) {\n          if (!components[key]) {\n            components[key] = [];\n          }\n\n          components[key].push(extend2([], _subBlock[key]));\n        } else if (typeof _subBlock[key] === \"object\" || pushToBase) {\n          base[key] = _subBlock[key];\n        }\n      } else {\n        if (!components[key]) {\n          components[key] = [];\n        }\n\n        componentArr = components[key];\n\n        if (_subBlock[key] instanceof Array) {\n          componentArr.push(extend2([], _subBlock[key]));\n        } else if (typeof _subBlock[key] === \"object\") {\n          componentArr.push(new ThemeInstance([_subBlock[key]], parent, true, {}, type));\n        } else if (typeof _subBlock[key] === \"function\") {\n          componentArr.push(_subBlock[key]);\n        }\n      }\n    }\n  };\n\n  _proto2.mergeWithThemeInstance = function mergeWithThemeInstance(instance) {\n    var ti = this,\n        thisBase = ti.base,\n        thatBase = instance.base,\n        thisComponents = ti.themeComponents,\n        thatComponents = instance.themeComponents,\n        imp1,\n        imp2,\n        key;\n\n    for (key in thatBase) {\n      imp1 = checkImportance(thisBase[key]);\n      imp2 = checkImportance(thatBase[key]);\n\n      if (!imp1.important || imp2.important) {\n        thisBase[key] = thatBase[key];\n      }\n    }\n\n    for (key in thatComponents) {\n      if (thisComponents[key]) {\n        thisComponents[key] = thisComponents[key].concat(thatComponents[key]);\n      } else {\n        thisComponents[key] = [].concat(thatComponents[key]);\n      }\n    }\n\n    ti.length += instance.length;\n  };\n\n  _proto2.get = function get(key) {\n    return this.base[key];\n  };\n\n  _proto2.getAll = function getAll() {\n    return extend2({}, this.base);\n  };\n\n  _proto2.component = function component(key, index, dataJSON, length) {\n    var ti = this,\n        parent = ti.chartInstance,\n        returnInstance = new ThemeInstance([], parent, true, {}, ti.type),\n        i,\n        ii,\n        componentArr,\n        each;\n    componentArr = ti.themeComponents[key];\n\n    if (!componentArr) {\n      return null;\n    }\n\n    for (i = 0, ii = componentArr.length; i < ii; i += 1) {\n      each = componentArr[i];\n\n      if (typeof each === \"function\") {\n        if (ti.type !== \"timeseries\") {\n          returnInstance.mergeWithThemeData(each.call(parent, index, dataJSON, length), index || 0, dataJSON);\n        } else {\n          returnInstance.mergeWithThemeData(each.call(parent, dataJSON), index, dataJSON, true);\n        }\n      } else {\n        returnInstance.mergeWithThemeData(each, index, dataJSON);\n      }\n    }\n\n    return returnInstance;\n  };\n\n  _proto2.mergeWithThemeData = function mergeWithThemeData(themeData, _index, dataSourceJSON, pushToBase) {\n    if (pushToBase === void 0) {\n      pushToBase = false;\n    }\n\n    var ti = this,\n        themeItem,\n        arrayComponentLength,\n        index = _index;\n\n    if (themeData instanceof Array) {\n      index = index || 0;\n      arrayComponentLength = themeData.length;\n      index = index % arrayComponentLength;\n      themeItem = themeData[index];\n\n      if (themeItem instanceof ThemeInstance) {\n        ti.mergeWithThemeInstance(themeItem);\n      } else {\n        if (typeof themeItem === \"function\") {\n          ti.pushTheme(themeItem.call(parent, index, dataSourceJSON, length), pushToBase);\n        } else {\n          ti.pushTheme(themeItem, pushToBase);\n        }\n      }\n    } else {\n      if (themeData instanceof ThemeInstance) {\n        ti.mergeWithThemeInstance(themeData);\n      } else {\n        ti.pushTheme(themeData, pushToBase);\n      }\n    }\n  };\n\n  _proto2.getThemedJSONData = function getThemedJSONData() {\n    return {\n      data: this.themedData\n    };\n  };\n\n  _proto2.dispose = function dispose() {\n    var ti = this,\n        components = ti.themeComponents,\n        key,\n        i;\n\n    for (key in components) {\n      i = components[key].length;\n\n      if (i) {\n        while (i--) {\n          components[key][i].dispose && components[key][i].dispose();\n        }\n\n        delete components[key];\n      }\n    }\n\n    ti.themeComponents = null;\n    ti.chartInstance = null;\n    ti.base = null;\n    ti.themeArray = null;\n    ti.isChildInstance = null;\n    ti.dataWithoutTheme = null;\n  };\n\n  return ThemeInstance;\n}(_componentInterface.ComponentInterface);\n\nthemer = new ThemeManager();\nthemer.configure();\n\nfunction FCPlugger(FusionCharts) {\n  var applyTheme = function applyTheme(eventObj) {\n    var viz = eventObj.sender,\n        chartObj = viz.getFromEnv(\"chartInstance\"),\n        type,\n        themeStore = getRegisteredThemes((0, _dependencyManager.getDepsByType)(\"theme\")),\n        i,\n        dataObj = viz.getFromEnv(\"dataSource\"),\n        globalThemeName = FusionCharts.options.defaultTheme,\n        chartThemeName = dataObj && (dataObj.chart && dataObj.chart.theme || dataObj.map && dataObj.map.theme),\n        themeName = (globalThemeName || chartThemeName) && (globalThemeName || \"\") + \",\" + (chartThemeName || \"\"),\n        themeArray = themeName && themeName.split(\",\"),\n        themeArrayLen = themeArray && themeArray.length,\n        hasValidTheme = false,\n        theme;\n\n    for (i = 0; i < themeArrayLen; i++) {\n      theme = trimString(themeArray[i]);\n\n      if (themeStore && theme !== \"\" && themeStore.hasOwnProperty(theme)) {\n        hasValidTheme = true;\n      }\n    }\n\n    if (hasValidTheme) {\n      dataObj = extend2({}, viz.getFromEnv(\"dataSource\"));\n      type = chartObj.chartType();\n\n      if (dataObj.map) {\n        dataObj.chart = dataObj.map;\n        delete dataObj.map;\n      }\n\n      themer.themify(themeName, chartObj, type, dataObj, chartObj.apiInstance.defaultSeriesType === \"geo\" && \"geo\");\n      viz.addToEnv(\"dataSource\", dataObj);\n    } else if (chartObj.jsVars && chartObj.jsVars.themeObject) {\n      chartObj.jsVars && chartObj.jsVars.themeObject.dispose();\n      chartObj.jsVars && delete chartObj.jsVars.themeObject;\n    }\n  };\n\n  FusionCharts.addEventListener(\"internal.dataSanitized\", applyTheme);\n}\n\nvar _default = {\n  extension: FCPlugger,\n  name: \"ThemeEngine\",\n  type: \"extension\",\n  requiresFusionCharts: true\n};\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/features/src/theme-engine/index.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_inheritsLoose2","_componentInterface","_dependencyManager","_eventApi","_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","done","value","TypeError","next","bind","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","UNDEF","BLANK","OBJECTSTRING","arrayToStr","objectToStr","themer","isImportantRegEx","importantStrRegEx","getValueFromObjProperty","obj","property","val","key","prop","toLowerCase","hasOwnProperty","hasFunc","themeArr","getArrayFromObj","returnArr","trimString","str","replace","getRegisteredThemes","addedThemes","themes","theme","checkCyclicRef","parentArr","bIndex","merge","target","source","skipUndef","assignByImportance","_tgtArr","_srcArr","item","srcVal","tgtVal","cRef","tgtArr","srcArr","push","e","_dataStore","extend2","_obj1","obj2","obj1","checkImportance","_value","returnObj","important","getImportantStyle","styleA","styleB","importanceOfStyleA","importanceOfStyleB","mergeThemeWithData","dataJSON","themeComponent","items","getAll","keyLowerCase","valStr","importanceThemeSource","importanceDataSource","getAllUniqueKeys","dataObject","themeInstance","keys","concat","_iterator","themeArray","_step","apply","Set","recursiveApply","dataObj","themeObject","dataItem","ii","j","vLineIndex","catIndex","hasTimeseriesThemeFunction","keysToIterateOn","_iterator2","_step2","type","themeComponents","vline","component","join","ThemeManager","_ComponentInterface","arguments","_proto","configure","config","themeStore","add","themeJSON","themeName","themify","chartInstance","chartType","chartDefinition","additionalBase","tm","jsVars","split","getDepsByType","evaluateThemeJSON","ThemeInstance","applyTheme","raiseWarning","_chartType","evaledTheme","additionalBaseObj","chartAttribObj","evaluator","tblock","dispose","themeObj","themedData","getThemedJSONData","data","ComponentInterface","_ComponentInterface2","themeJSONArr","parent","isChildInstance","_this","base","Boolean","parse","_proto2","pushTheme","pushToBase","ti","blockLen","_parseSubBlock","_subBlock","components","imp1","imp2","componentArr","mergeWithThemeInstance","instance","thisBase","thatBase","thisComponents","thatComponents","get","index","returnInstance","each","mergeWithThemeData","themeData","_index","dataSourceJSON","themeItem","arrayComponentLength","dataWithoutTheme","FCPlugger","FusionCharts","eventObj","viz","sender","chartObj","getFromEnv","globalThemeName","options","defaultTheme","chartThemeName","chart","map","themeArrayLen","hasValidTheme","apiInstance","defaultSeriesType","addToEnv","addEventListener","_default","extension","requiresFusionCharts"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _componentInterface=require(\"@fusioncharts/core/src/component-interface\");var _dependencyManager=require(\"@fusioncharts/core/src/dependency-manager\");var _eventApi=require(\"@fusioncharts/core/src/event-api\");function _createForOfIteratorHelperLoose(o,allowArrayLike){var it;if(typeof Symbol===\"undefined\"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}it=o[Symbol.iterator]();return it.next.bind(it)}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var UNDEF,BLANK=\"\",OBJECTSTRING=\"object\",arrayToStr=\"[object Array]\",objectToStr=\"[object Object]\",themer,isImportantRegEx=/\\s+!important$/,importantStrRegEx=/\\\\!important$/,getValueFromObjProperty=function getValueFromObjProperty(obj,property){var val,key,prop=property;prop=(prop+\"\").toLowerCase();for(key in obj){if(obj.hasOwnProperty(key)&&prop===(key+\"\").toLowerCase()){val=obj[key];break}}return val},hasFunc=function hasFunc(themeArr){var i,len;for(i=0,len=themeArr.length;i<len;i++){if(typeof themeArr[i]===\"function\"){return true}}return false},getArrayFromObj=function getArrayFromObj(obj){var returnArr=[],key;for(key in obj){returnArr[key]=obj[key]}return returnArr},trimString=function trimString(str){return str.replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\")},getRegisteredThemes=function getRegisteredThemes(addedThemes){var themes={},theme;for(var key in addedThemes){if(addedThemes.hasOwnProperty(key)){theme=addedThemes[key];themes[theme.name]=theme}}return themes},checkCyclicRef=function checkCyclicRef(obj,parentArr){var i=parentArr.length,bIndex=-1;while(i--){if(obj===parentArr[i]){bIndex=i;return bIndex}}return bIndex},merge=function merge(target,source,skipUndef,assignByImportance,_tgtArr,_srcArr){var item,srcVal,tgtVal,str,cRef,tgtArr=_tgtArr,srcArr=_srcArr;if(!srcArr){tgtArr=[target];srcArr=[source]}else{tgtArr.push(target);srcArr.push(source)}if(source instanceof Array){for(item=0;item<source.length;item+=1){try{srcVal=target[item];tgtVal=source[item]}catch(e){continue}if(typeof tgtVal!==OBJECTSTRING){if(!(skipUndef&&tgtVal===UNDEF)){target[item]=tgtVal}}else{if(srcVal===null||typeof srcVal!==OBJECTSTRING){srcVal=target[item]=tgtVal instanceof Array?[]:{}}cRef=checkCyclicRef(tgtVal,srcArr);if(cRef!==-1){srcVal=target[item]=tgtArr[cRef]}else{merge(srcVal,tgtVal,skipUndef,assignByImportance,tgtArr,srcArr)}}}}else{for(item in source){try{srcVal=target[item];tgtVal=source[item]}catch(e){continue}if(tgtVal!==null&&typeof tgtVal===OBJECTSTRING){str=Object.prototype.toString.call(tgtVal);if(str===objectToStr){if(srcVal===null||typeof srcVal!==OBJECTSTRING){srcVal=target[item]={}}cRef=checkCyclicRef(tgtVal,srcArr);if(cRef!==-1){srcVal=target[item]=tgtArr[cRef]}else{if(item===\"data\"&&tgtVal._dataStore){target[item]=assignByImportance?assignByImportance(srcVal,tgtVal):tgtVal}else{merge(srcVal,tgtVal,skipUndef,assignByImportance,tgtArr,srcArr)}}}else if(str===arrayToStr){if(srcVal===null||!(srcVal instanceof Array)){srcVal=target[item]=[]}cRef=checkCyclicRef(tgtVal,srcArr);if(cRef!==-1){srcVal=target[item]=tgtArr[cRef]}else{merge(srcVal,tgtVal,skipUndef,assignByImportance,tgtArr,srcArr)}}else{target[item]=assignByImportance?assignByImportance(srcVal,tgtVal):tgtVal}}else{target[item]=assignByImportance?assignByImportance(srcVal,tgtVal):tgtVal}}}return target},extend2=function extend2(_obj1,obj2,skipUndef,assignByImportance){if(assignByImportance===void 0){assignByImportance=null}var obj1=_obj1;if(typeof obj1!==OBJECTSTRING&&typeof obj2!==OBJECTSTRING){return null}if(typeof obj2!==OBJECTSTRING||obj2===null){return obj1}if(typeof obj1!==OBJECTSTRING){obj1=obj2 instanceof Array?[]:{}}merge(obj1,obj2,skipUndef,assignByImportance);return obj1},checkImportance=function checkImportance(_value){var value=_value;var returnObj={important:false,str:BLANK};if(!value){return returnObj}value=value.toString();if(isImportantRegEx.test(value)){value=value.replace(isImportantRegEx,BLANK);returnObj.important=true}else{value=value.replace(importantStrRegEx,\"!imporant\");returnObj.important=false}returnObj.str=value;return returnObj},getImportantStyle=function getImportantStyle(styleA,styleB){var importanceOfStyleA=checkImportance(styleA),importanceOfStyleB=checkImportance(styleB);if(importanceOfStyleA.important&&!importanceOfStyleB.important){return importanceOfStyleA.str}return importanceOfStyleB.str},mergeThemeWithData=function mergeThemeWithData(dataJSON,themeComponent){var items=themeComponent.getAll(),key,keyLowerCase,valStr,importanceThemeSource,importanceDataSource;for(key in items){keyLowerCase=key.toLowerCase();valStr=items[key].toString();importanceThemeSource=checkImportance(valStr);importanceDataSource=checkImportance(dataJSON[keyLowerCase]);if(importanceThemeSource.important&&!importanceDataSource.important){dataJSON[keyLowerCase]=importanceThemeSource.str}else if(importanceDataSource.important){dataJSON[keyLowerCase]=importanceDataSource.str}else if(dataJSON[keyLowerCase]===UNDEF&&typeof items[key]!==\"object\"){dataJSON[keyLowerCase]=typeof items[key]!==\"object\"?importanceThemeSource.str:items[key]}else if(typeof items[key]===\"object\"){if(typeof dataJSON[keyLowerCase]===\"undefined\"){dataJSON[keyLowerCase]=items[key]}dataJSON[keyLowerCase]=extend2(items[key],dataJSON[keyLowerCase],false,getImportantStyle)}}},getAllUniqueKeys=function getAllUniqueKeys(dataObject,themeInstance){var keys=[].concat(Object.keys(dataObject));var theme;for(var _iterator=_createForOfIteratorHelperLoose(themeInstance.themeArray),_step;!(_step=_iterator()).done;){theme=_step.value;keys.push.apply(keys,Object.keys(theme))}return Array.from(new Set(keys))},recursiveApply=function recursiveApply(dataObj,themeObject){var key,dataItem,themeComponent,item,i,ii,j,vLineIndex=0,catIndex=0,hasTimeseriesThemeFunction,items,keysToIterateOn=getAllUniqueKeys(dataObj,themeObject);for(var _iterator2=_createForOfIteratorHelperLoose(keysToIterateOn),_step2;!(_step2=_iterator2()).done;){key=_step2.value;dataItem=dataObj[key];if(typeof dataItem===\"undefined\"){dataItem=dataObj[key]={}}hasTimeseriesThemeFunction=themeObject.type===\"timeseries\"&&themeObject.themeComponents[key]&&hasFunc(themeObject.themeComponents[key]);if(dataItem instanceof Array&&!hasTimeseriesThemeFunction){ii=dataItem.length;for(i=0;i<ii;i+=1){item=dataItem[i];if(typeof item===\"object\"){if(key===\"category\"){if(item.vline===\"true\"){themeComponent=themeObject.component(\"vline\",vLineIndex,item);if(themeComponent){mergeThemeWithData(item,themeComponent);vLineIndex+=1}}else{themeComponent=themeObject.component(\"category\",catIndex,item,ii);if(themeComponent){mergeThemeWithData(item,themeComponent);catIndex+=1}}}else{themeComponent=themeObject.component(key,i,item,ii);if(themeComponent){mergeThemeWithData(item,themeComponent);recursiveApply(item,themeComponent)}}}}}else if(typeof dataItem===\"object\"){if(!hasTimeseriesThemeFunction){themeComponent=themeObject.component(key,null,dataItem);if(themeComponent){mergeThemeWithData(dataItem,themeComponent);recursiveApply(dataItem,themeComponent)}}else{themeComponent=themeObject.component(key,null,dataItem);items=themeComponent.getAll();dataObj[key]=items;if(/^\\d+$/.test(Object.keys(items).join(\"\"))){items=getArrayFromObj(items);dataObj[key]=items;for(j=0;j<dataObj[key].length;j++){recursiveApply(dataObj[key][j],themeComponent)}}else{recursiveApply(dataItem,themeComponent)}}}}};var ThemeManager=function(_ComponentInterface){(0,_inheritsLoose2.default)(ThemeManager,_ComponentInterface);function ThemeManager(){return _ComponentInterface.apply(this,arguments)||this}var _proto=ThemeManager.prototype;_proto.configure=function configure(){!this.config.themeStore&&(this.config.themeStore={})};_proto.add=function add(themeJSON){var i=0,ii=themeJSON.length,themeName;for(;i<ii;i+=1){themeName=themeJSON[i].name;if(themeName){this.config.themeStore[themeName]=themeJSON[i]}}};_proto.themify=function themify(themeName,chartInstance,chartType,chartDefinition,additionalBase){var tm=this,jsVars=chartInstance.jsVars,themes=themeName.split(\",\"),themeArr=[],ii=themes.length,themeJSON,i;tm.config.themeStore=getRegisteredThemes((0,_dependencyManager.getDepsByType)(\"theme\"));if(ii){for(i=0;i<ii;i+=1){themeJSON=tm.config.themeStore[trimString(themes[i])];themeJSON&&themeArr.push(ThemeManager.evaluateThemeJSON(themeJSON.theme,chartInstance,chartType,additionalBase))}if(themeArr.length){jsVars.themeObject=new ThemeInstance(themeArr,chartInstance,false,chartDefinition,chartType);ThemeManager.applyTheme(chartInstance)}else{(0,_eventApi.raiseWarning)(chartInstance,\"14051100501\",\"run\",\"api.themes~themify()\",'The theme \"'+themeName+'\" requested has not been registered.')}}};ThemeManager.evaluateThemeJSON=function evaluateThemeJSON(themeObject,chartInstance,_chartType,additionalBase){var evaledTheme={},jsVars=chartInstance.jsVars,additionalBaseObj,chartAttribObj,chartType=_chartType,evaluator=function evaluator(tblock){var key,item;for(key in tblock){item=tblock[key];if(item instanceof Array){evaledTheme[key]=extend2(evaledTheme[key]||[],item)}else if(typeof item===\"object\"){evaledTheme[key]=extend2(evaledTheme[key]||{},item)}else{evaledTheme[key]=item}}};chartType=chartType||chartInstance.chartType();if(jsVars.themeObject&&themeObject!==jsVars.themeObject){jsVars.themeObject.dispose();delete jsVars.themeObject}evaluator(getValueFromObjProperty(themeObject,\"base\"));additionalBase&&(additionalBaseObj=getValueFromObjProperty(themeObject,additionalBase));additionalBaseObj&&evaluator(additionalBaseObj);chartType&&(chartAttribObj=getValueFromObjProperty(themeObject,chartType));chartAttribObj&&evaluator(chartAttribObj);return evaledTheme};ThemeManager.applyTheme=function applyTheme(chartInstance){var themeObj=chartInstance.jsVars.themeObject,themedData=themeObj.getThemedJSONData().data;if(themedData){recursiveApply(themedData,themeObj)}};return ThemeManager}(_componentInterface.ComponentInterface);var ThemeInstance=function(_ComponentInterface2){(0,_inheritsLoose2.default)(ThemeInstance,_ComponentInterface2);function ThemeInstance(themeJSONArr,parent,isChildInstance,chartDefinition,type){var _this;_this=_ComponentInterface2.call(this)||this;var i=0,ii;_this.themeArray=themeJSONArr;_this.themeComponents={};_this.base={};_this.type=type;_this.chartInstance=parent;_this.isChildInstance=Boolean(isChildInstance);_this.themedData=isChildInstance?null:chartDefinition;_this.length=themeJSONArr.length;ii=themeJSONArr.length;for(;i<ii;i+=1){_this.parse(themeJSONArr[i])}return _this}var _proto2=ThemeInstance.prototype;_proto2.pushTheme=function pushTheme(themeJSON,pushToBase){if(pushToBase===void 0){pushToBase=false}if(themeJSON){this.themeArray.push(themeJSON);this.parse(themeJSON,pushToBase);this.length+=1}};_proto2.parse=function parse(themeJSON,pushToBase){var ti=this,blockLen,ii;if(themeJSON instanceof Array){blockLen=themeJSON.length;for(ii=0;ii<blockLen;ii++){ti._parseSubBlock(themeJSON[ii],pushToBase)}}else{ti._parseSubBlock(themeJSON,pushToBase)}};_proto2._parseSubBlock=function _parseSubBlock(_subBlock,pushToBase){var ti=this,base=ti.base,type=ti.type,components=ti.themeComponents,parent=ti.chartInstance,isChildInstance=ti.isChildInstance,key,imp1,imp2,componentArr;for(key in _subBlock){if(typeof _subBlock[key]===\"string\"||typeof _subBlock[key]===\"number\"){if(base[key]){imp1=checkImportance(_subBlock[key]);imp2=checkImportance(base[key]);if(imp1.important||!imp2.important){base[key]=_subBlock[key]}}else{base[key]=_subBlock[key]}}else if(type===\"timeseries\"&&isChildInstance){if(_subBlock[key]instanceof Array&&key!==\"palettecolors\"&&!pushToBase){if(!components[key]){components[key]=[]}components[key].push(extend2([],_subBlock[key]))}else if(typeof _subBlock[key]===\"object\"||pushToBase){base[key]=_subBlock[key]}}else{if(!components[key]){components[key]=[]}componentArr=components[key];if(_subBlock[key]instanceof Array){componentArr.push(extend2([],_subBlock[key]))}else if(typeof _subBlock[key]===\"object\"){componentArr.push(new ThemeInstance([_subBlock[key]],parent,true,{},type))}else if(typeof _subBlock[key]===\"function\"){componentArr.push(_subBlock[key])}}}};_proto2.mergeWithThemeInstance=function mergeWithThemeInstance(instance){var ti=this,thisBase=ti.base,thatBase=instance.base,thisComponents=ti.themeComponents,thatComponents=instance.themeComponents,imp1,imp2,key;for(key in thatBase){imp1=checkImportance(thisBase[key]);imp2=checkImportance(thatBase[key]);if(!imp1.important||imp2.important){thisBase[key]=thatBase[key]}}for(key in thatComponents){if(thisComponents[key]){thisComponents[key]=thisComponents[key].concat(thatComponents[key])}else{thisComponents[key]=[].concat(thatComponents[key])}}ti.length+=instance.length};_proto2.get=function get(key){return this.base[key]};_proto2.getAll=function getAll(){return extend2({},this.base)};_proto2.component=function component(key,index,dataJSON,length){var ti=this,parent=ti.chartInstance,returnInstance=new ThemeInstance([],parent,true,{},ti.type),i,ii,componentArr,each;componentArr=ti.themeComponents[key];if(!componentArr){return null}for(i=0,ii=componentArr.length;i<ii;i+=1){each=componentArr[i];if(typeof each===\"function\"){if(ti.type!==\"timeseries\"){returnInstance.mergeWithThemeData(each.call(parent,index,dataJSON,length),index||0,dataJSON)}else{returnInstance.mergeWithThemeData(each.call(parent,dataJSON),index,dataJSON,true)}}else{returnInstance.mergeWithThemeData(each,index,dataJSON)}}return returnInstance};_proto2.mergeWithThemeData=function mergeWithThemeData(themeData,_index,dataSourceJSON,pushToBase){if(pushToBase===void 0){pushToBase=false}var ti=this,themeItem,arrayComponentLength,index=_index;if(themeData instanceof Array){index=index||0;arrayComponentLength=themeData.length;index=index%arrayComponentLength;themeItem=themeData[index];if(themeItem instanceof ThemeInstance){ti.mergeWithThemeInstance(themeItem)}else{if(typeof themeItem===\"function\"){ti.pushTheme(themeItem.call(parent,index,dataSourceJSON,length),pushToBase)}else{ti.pushTheme(themeItem,pushToBase)}}}else{if(themeData instanceof ThemeInstance){ti.mergeWithThemeInstance(themeData)}else{ti.pushTheme(themeData,pushToBase)}}};_proto2.getThemedJSONData=function getThemedJSONData(){return{data:this.themedData}};_proto2.dispose=function dispose(){var ti=this,components=ti.themeComponents,key,i;for(key in components){i=components[key].length;if(i){while(i--){components[key][i].dispose&&components[key][i].dispose()}delete components[key]}}ti.themeComponents=null;ti.chartInstance=null;ti.base=null;ti.themeArray=null;ti.isChildInstance=null;ti.dataWithoutTheme=null};return ThemeInstance}(_componentInterface.ComponentInterface);themer=new ThemeManager;themer.configure();function FCPlugger(FusionCharts){var applyTheme=function applyTheme(eventObj){var viz=eventObj.sender,chartObj=viz.getFromEnv(\"chartInstance\"),type,themeStore=getRegisteredThemes((0,_dependencyManager.getDepsByType)(\"theme\")),i,dataObj=viz.getFromEnv(\"dataSource\"),globalThemeName=FusionCharts.options.defaultTheme,chartThemeName=dataObj&&(dataObj.chart&&dataObj.chart.theme||dataObj.map&&dataObj.map.theme),themeName=(globalThemeName||chartThemeName)&&(globalThemeName||\"\")+\",\"+(chartThemeName||\"\"),themeArray=themeName&&themeName.split(\",\"),themeArrayLen=themeArray&&themeArray.length,hasValidTheme=false,theme;for(i=0;i<themeArrayLen;i++){theme=trimString(themeArray[i]);if(themeStore&&theme!==\"\"&&themeStore.hasOwnProperty(theme)){hasValidTheme=true}}if(hasValidTheme){dataObj=extend2({},viz.getFromEnv(\"dataSource\"));type=chartObj.chartType();if(dataObj.map){dataObj.chart=dataObj.map;delete dataObj.map}themer.themify(themeName,chartObj,type,dataObj,chartObj.apiInstance.defaultSeriesType===\"geo\"&&\"geo\");viz.addToEnv(\"dataSource\",dataObj)}else if(chartObj.jsVars&&chartObj.jsVars.themeObject){chartObj.jsVars&&chartObj.jsVars.themeObject.dispose();chartObj.jsVars&&delete chartObj.jsVars.themeObject}};FusionCharts.addEventListener(\"internal.dataSanitized\",applyTheme)}var _default={extension:FCPlugger,name:\"ThemeEngine\",type:\"extension\",requiresFusionCharts:true};exports.default=_default;"]},"metadata":{},"sourceType":"script"}