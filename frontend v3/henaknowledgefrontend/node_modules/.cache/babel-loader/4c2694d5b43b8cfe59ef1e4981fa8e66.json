{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _componentInterface = require(\"../component-interface\");\n\nvar _number = _interopRequireDefault(require(\"@fusioncharts/utils/src/scale-utils/interpolators/number\"));\n\nvar _diff = _interopRequireDefault(require(\"@fusioncharts/utils/src/scale-utils/array/diff\"));\n\nvar _cartesian = require(\"../axis/cartesian\");\n\nvar _cartesianAxisRef = _interopRequireDefault(require(\"./cartesian-axis-ref.animation\"));\n\nvar _dependencyManager = require(\"../dependency-manager\");\n\nvar isValid = function isValid(val) {\n  return !typeof val === \"undefined\" || val !== null;\n},\n    BUTT_STR = \"butt\";\n\nvar UNDEF;\n(0, _dependencyManager.addDep)({\n  name: \"cartesianAxisRefAnimation\",\n  type: \"animationRule\",\n  extension: _cartesianAxisRef.default\n});\n\nvar AxisRefVisual = function (_ComponentInterface) {\n  (0, _inheritsLoose2.default)(AxisRefVisual, _ComponentInterface);\n\n  function AxisRefVisual() {\n    var _this;\n\n    _this = _ComponentInterface.call(this) || this;\n    _this.config.map = {};\n    _this.config.explicitDrawItems = {};\n    return _this;\n  }\n\n  var _proto = AxisRefVisual.prototype;\n\n  _proto.getType = function getType() {\n    return \"axisRefVisuals\";\n  };\n\n  _proto.getName = function getName() {\n    return \"axisRefVisualsCartesian\";\n  };\n\n  _proto.draw = function draw() {\n    var drawingInfo = this.getDrawingInfo(),\n        eachCompInfo,\n        explicitDrawItems = this.getexplicitDrawItems(),\n        axisRefConf = this.config,\n        oldMap = axisRefConf.map,\n        map = {},\n        i,\n        type,\n        key,\n        axis,\n        elementIdArr,\n        eachDrawInfo,\n        parent = this.getLinkedParent(),\n        axes = parent.getAxes(),\n        axesIdArr = [],\n        baseContainer = parent.getChildContainer(\"axisReferenceVisualsFloor\"),\n        bottomContainer = parent.getChildContainer(\"axisReferenceVisualsBottom\"),\n        middleContainer = parent.getChildContainer(\"axisReferenceVisualsMiddle\"),\n        topContainer = parent.getChildContainer(\"axisReferenceVisualsTop\"),\n        ceilContainer = parent.getChildContainer(\"axisReferenceVisualsCeil\");\n    parent.config.trendlines = [];\n    parent.config.vtrendlines = [];\n\n    for (i = 0; i < axes.length; ++i) {\n      axesIdArr.push(axes[i].axis.getId());\n    }\n\n    axisRefConf.containers = [baseContainer, bottomContainer, middleContainer, topContainer, ceilContainer];\n\n    for (key in drawingInfo) {\n      if (drawingInfo.hasOwnProperty(key)) {\n        axis = this.getLinkedItem(key);\n\n        if (axesIdArr.indexOf(axis.getId()) >= 0) {\n          elementIdArr = map[key];\n\n          if (!elementIdArr) {\n            elementIdArr = map[key] = [];\n          }\n\n          eachCompInfo = drawingInfo[key];\n\n          for (i = 0; i < eachCompInfo.length; ++i) {\n            eachDrawInfo = eachCompInfo[i];\n            type = eachDrawInfo.type;\n\n            if (type === \"band\") {\n              elementIdArr.push.apply(elementIdArr, this.createBand(eachDrawInfo, axis));\n            } else if (type === \"line\") {\n              elementIdArr.push.apply(elementIdArr, this.createLine(eachDrawInfo, axis));\n            }\n          }\n        }\n      }\n    }\n\n    if (axisRefConf.isSmartDrawing) {\n      for (key in oldMap) {\n        if (oldMap.hasOwnProperty(key) && !explicitDrawItems[key] && this.getLinkedItem(key)) {\n          map[key] = oldMap[key];\n        }\n      }\n    }\n\n    this.resetexplicitDrawItems();\n    this.removeExtraElements(map);\n  };\n\n  _proto.getDrawingInfo = function getDrawingInfo() {\n    var drawingInfo = {},\n        key,\n        item,\n        explicitDrawItems = this.getexplicitDrawItems(),\n        canvasChanged = this.isCanvasChnaged(),\n        isSmartDrawing = this.config.isSmartDrawing = Object.keys(explicitDrawItems).length && !canvasChanged,\n        linkItems = isSmartDrawing ? explicitDrawItems : this.getLinkedItem();\n\n    for (key in linkItems) {\n      if (linkItems.hasOwnProperty(key)) {\n        item = linkItems[key];\n        drawingInfo[key] = item.getReferenceInfo();\n      }\n    }\n\n    return drawingInfo;\n  };\n\n  _proto.createLine = function createLine(lineInfo, axis) {\n    var containersArr = this.config.containers,\n        container = containersArr[lineInfo.layer],\n        axisConf = axis.config,\n        paper = this.getFromEnv(\"paper\"),\n        chartType = this.getFromEnv(\"chart\").getName(),\n        canvas = this.getLinkedParent(),\n        animationManager = this.getFromEnv(\"animationManager\"),\n        toolTipController = this.getFromEnv(\"toolTipController\"),\n        canvasConf = canvas.config,\n        trendLines = canvasConf.trendlines,\n        isVertical = axisConf.isVertical,\n        canvasLeft = canvasConf.canvasLeft,\n        canvasTop = canvasConf.canvasTop,\n        canvasBottom = canvasTop + canvasConf.canvasHeight,\n        canvasRight = canvasLeft + canvasConf.canvasWidth,\n        interpolatorLeftRight = (0, _number.default)(canvasLeft, canvasRight),\n        interpolatorTopBottom = (0, _number.default)(canvasTop, canvasBottom),\n        scale = axis.getScale(),\n        start = scale.getRangeValue(lineInfo.from),\n        end = lineInfo.to !== UNDEF && scale.getRangeValue(lineInfo.to) || start,\n        path = isVertical ? [\"M\", canvasLeft, start, \"L\", canvasRight, end] : [\"M\", start, canvasBottom, \"L\", end, canvasTop],\n        lineAttr = lineInfo.attr,\n        text = lineInfo.text,\n        textAttr = text && text.attr,\n        labelPosition = text && text.labelPosition || 0,\n        compId = axis.getId(),\n        eleId = lineInfo.id || lineInfo.from,\n        lineEleId = compId + \"_\" + eleId,\n        textEleId,\n        element = this.getGraphicalElement(lineEleId),\n        textElem,\n        key,\n        handlers = lineInfo.handlers,\n        value = {\n      start: lineInfo.from,\n      end: lineInfo.to\n    };\n    lineAttr.path = (0, _cartesian.getCrispPath)(path, isValid(lineAttr[\"stroke-width\"]) ? lineAttr[\"stroke-width\"] : 1).path.toString();\n\n    if (/trend/.test(lineInfo.id)) {\n      trendLines.push({\n        x1: path[1],\n        y1: path[2],\n        x2: path[4],\n        y2: path[5],\n        tooltext: lineInfo.toolText,\n        tolerance: lineAttr[\"stroke-width\"] < 5 ? 2.5 : lineAttr[\"stroke-width\"] / 2\n      });\n    }\n\n    lineAttr[\"stroke-linecap\"] = BUTT_STR;\n    element = this.addGraphicalElement(lineEleId, animationManager.setAnimation({\n      container: container,\n      el: element || \"path\",\n      attr: lineAttr,\n      component: this,\n      axis: axis,\n      data: {\n        value: value,\n        path: path\n      },\n      label: \"path\"\n    }));\n    element.data(\"data\", value);\n\n    if (text) {\n      textEleId = compId + \"_\" + eleId + textAttr.text;\n      textElem = this.getGraphicalElement(textEleId);\n\n      if (isVertical) {\n        textAttr.x = interpolatorLeftRight(labelPosition);\n        textAttr.y = start;\n      } else {\n        textAttr.x = start;\n        textAttr.y = interpolatorTopBottom(labelPosition);\n      }\n\n      textAttr.text = text.label;\n      textAttr.transform = paper.getSuggestiveRotation(text.labelRotation, textAttr.x, textAttr.y);\n      textElem = this.addGraphicalElement(textEleId, animationManager.setAnimation({\n        container: containersArr[text.layer],\n        el: textElem || \"text\",\n        attr: textAttr,\n        component: this,\n        axis: axis,\n        data: {\n          value: lineInfo.from\n        },\n        label: \"text\",\n        css: text.css\n      }));\n      textElem.data(\"data\", lineInfo.from);\n    }\n\n    if (!/zoomscatter/i.test(chartType)) {\n      if (lineInfo.toolText) {\n        toolTipController.enableToolTip(element, lineInfo.toolText);\n      } else {\n        toolTipController.disableToolTip(element);\n      }\n    }\n\n    for (key in handlers) {\n      if (handlers.hasOwnProperty(key)) {\n        element.on(key, handlers[key].bind(axis));\n        textElem && textElem.on(key, handlers[key].bind(axis));\n      }\n    }\n\n    return text ? [lineEleId, textEleId] : [lineEleId];\n  };\n\n  _proto.createBand = function createBand(bandInfo, axis) {\n    var container = this.config.containers[bandInfo.layer],\n        axisConf = axis.config,\n        animationManager = this.getFromEnv(\"animationManager\"),\n        toolTipController = this.getFromEnv(\"toolTipController\"),\n        canvas = this.getLinkedParent(),\n        chartType = this.getFromEnv(\"chart\").getName(),\n        canvasConf = canvas.config,\n        isVertical = axisConf.isVertical,\n        canvasLeft = canvasConf.canvasLeft,\n        canvasTop = canvasConf.canvasTop,\n        canvasBottom = canvasTop + canvasConf.canvasHeight,\n        canvasRight = canvasLeft + canvasConf.canvasWidth,\n        scale = axis.getScale(),\n        startVal = bandInfo.from,\n        endVal = bandInfo.to !== UNDEF ? bandInfo.to : startVal,\n        startPx,\n        endPx,\n        compId = axis.getId(),\n        eleId,\n        bandElemId,\n        element,\n        key,\n        elemAttr = bandInfo.attr,\n        difference,\n        handlers = bandInfo.handlers;\n\n    if (startVal === \"canvasStart\") {\n      startPx = isVertical ? canvasTop : canvasLeft;\n    } else {\n      startPx = scale.getRangeValue(startVal);\n    }\n\n    if (endVal === \"canvasEnd\") {\n      endPx = isVertical ? canvasBottom : canvasRight;\n    } else {\n      endPx = scale.getRangeValue(endVal);\n    }\n\n    difference = Math.abs(startPx - endPx);\n\n    if (isVertical) {\n      elemAttr.x = canvasLeft;\n      elemAttr.y = Math.min(startPx, endPx);\n      elemAttr.width = canvasRight - canvasLeft;\n      elemAttr.height = difference;\n    } else {\n      elemAttr.x = Math.min(startPx, endPx);\n      elemAttr.y = canvasTop;\n      elemAttr.width = difference;\n      elemAttr.height = canvasBottom - canvasTop;\n    }\n\n    eleId = bandInfo.id || elemAttr.x + \"_\" + elemAttr.y;\n    bandElemId = compId + \"_\" + eleId;\n    element = this.getGraphicalElement(bandElemId);\n\n    if (/trend/.test(bandInfo.id)) {\n      canvas.config.vtrendlines.push({\n        x1: elemAttr.x,\n        y1: elemAttr.y,\n        x2: elemAttr.x + elemAttr.width,\n        y2: elemAttr.y + elemAttr.height,\n        tooltext: bandInfo.toolText,\n        tolerance: elemAttr[\"stroke-width\"] < 5 ? 2.5 : elemAttr[\"stroke-width\"] / 2,\n        isTrendZone: 1\n      });\n    }\n\n    element = this.addGraphicalElement(bandElemId, animationManager.setAnimation({\n      container: container,\n      el: element || \"rect\",\n      attr: elemAttr,\n      component: this,\n      label: \"rect\"\n    }));\n\n    if (!/zoomscatter/i.test(chartType)) {\n      if (bandInfo.toolText) {\n        toolTipController.enableToolTip(element, bandInfo.toolText);\n      } else {\n        toolTipController.disableToolTip(element);\n      }\n    }\n\n    for (key in handlers) {\n      if (handlers.hasOwnProperty(key)) {\n        element.on(key, handlers[key].bind(axis));\n      }\n    }\n\n    return [bandElemId];\n  };\n\n  _proto.removeExtraElements = function removeExtraElements(newMap) {\n    var oldMap = this.config.map,\n        key,\n        idArr,\n        i,\n        len,\n        removingElement,\n        removeElemId;\n\n    for (key in oldMap) {\n      if (!newMap[key]) {\n        idArr = oldMap[key];\n        len = idArr.length;\n\n        for (i = 0; i < len; ++i) {\n          removingElement = this.getGraphicalElement(idArr[i]);\n          removingElement && this.removeGraphicalElement(removingElement);\n        }\n      } else {\n        removeElemId = (0, _diff.default)(oldMap[key], newMap[key]);\n        len = removeElemId.length;\n\n        for (i = 0; i < len; ++i) {\n          removingElement = this.getGraphicalElement(removeElemId[i]);\n          removingElement && this.removeGraphicalElement(removingElement);\n        }\n      }\n    }\n\n    this.config.map = newMap;\n  };\n\n  _proto.setLinkedItem = function setLinkedItem(itemName, item) {\n    _ComponentInterface.prototype.setLinkedItem.call(this, itemName, item);\n\n    var axisRefComp = this,\n        sender;\n\n    if (item.getType() === \"axis\") {\n      axisRefComp.addExtEventListener(\"predraw\", function (event) {\n        sender = event.sender;\n\n        if (sender.getState(\"removed\")) {\n          axisRefComp.removeLinkedItem(sender.getId());\n          axisRefComp.asyncDraw();\n        }\n      }, item);\n    }\n  };\n\n  _proto.addexplicitDrawItems = function addexplicitDrawItems(key, item) {\n    this.config.explicitDrawItems[key] = item;\n  };\n\n  _proto.getexplicitDrawItems = function getexplicitDrawItems() {\n    return this.config.explicitDrawItems;\n  };\n\n  _proto.resetexplicitDrawItems = function resetexplicitDrawItems() {\n    this.config.explicitDrawItems = {};\n  };\n\n  _proto.isCanvasChnaged = function isCanvasChnaged() {\n    var canvasDim = this.getLinkedParent().getEffectiveDimensions(),\n        axisRefConf = this.config,\n        isCanvasChnaged;\n    isCanvasChnaged = JSON.stringify(canvasDim) !== JSON.stringify(axisRefConf.canvasDim);\n    axisRefConf.canvasDim = canvasDim;\n    return isCanvasChnaged;\n  };\n\n  return AxisRefVisual;\n}(_componentInterface.ComponentInterface);\n\nvar _default = AxisRefVisual;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/core/src/axis-ref-visuals/axis-ref-component.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_inheritsLoose2","_componentInterface","_number","_diff","_cartesian","_cartesianAxisRef","_dependencyManager","isValid","val","BUTT_STR","UNDEF","addDep","name","type","extension","AxisRefVisual","_ComponentInterface","_this","call","config","map","explicitDrawItems","_proto","prototype","getType","getName","draw","drawingInfo","getDrawingInfo","eachCompInfo","getexplicitDrawItems","axisRefConf","oldMap","i","key","axis","elementIdArr","eachDrawInfo","parent","getLinkedParent","axes","getAxes","axesIdArr","baseContainer","getChildContainer","bottomContainer","middleContainer","topContainer","ceilContainer","trendlines","vtrendlines","length","push","getId","containers","hasOwnProperty","getLinkedItem","indexOf","apply","createBand","createLine","isSmartDrawing","resetexplicitDrawItems","removeExtraElements","item","canvasChanged","isCanvasChnaged","Object","keys","linkItems","getReferenceInfo","lineInfo","containersArr","container","layer","axisConf","paper","getFromEnv","chartType","canvas","animationManager","toolTipController","canvasConf","trendLines","isVertical","canvasLeft","canvasTop","canvasBottom","canvasHeight","canvasRight","canvasWidth","interpolatorLeftRight","interpolatorTopBottom","scale","getScale","start","getRangeValue","from","end","to","path","lineAttr","attr","text","textAttr","labelPosition","compId","eleId","id","lineEleId","textEleId","element","getGraphicalElement","textElem","handlers","value","getCrispPath","toString","test","x1","y1","x2","y2","tooltext","toolText","tolerance","addGraphicalElement","setAnimation","el","component","data","label","x","y","transform","getSuggestiveRotation","labelRotation","css","enableToolTip","disableToolTip","on","bind","bandInfo","startVal","endVal","startPx","endPx","bandElemId","elemAttr","difference","Math","abs","min","width","height","isTrendZone","newMap","idArr","len","removingElement","removeElemId","removeGraphicalElement","setLinkedItem","itemName","axisRefComp","sender","addExtEventListener","event","getState","removeLinkedItem","asyncDraw","addexplicitDrawItems","canvasDim","getEffectiveDimensions","JSON","stringify","ComponentInterface","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _componentInterface=require(\"../component-interface\");var _number=_interopRequireDefault(require(\"@fusioncharts/utils/src/scale-utils/interpolators/number\"));var _diff=_interopRequireDefault(require(\"@fusioncharts/utils/src/scale-utils/array/diff\"));var _cartesian=require(\"../axis/cartesian\");var _cartesianAxisRef=_interopRequireDefault(require(\"./cartesian-axis-ref.animation\"));var _dependencyManager=require(\"../dependency-manager\");var isValid=function isValid(val){return!typeof val===\"undefined\"||val!==null},BUTT_STR=\"butt\";var UNDEF;(0,_dependencyManager.addDep)({name:\"cartesianAxisRefAnimation\",type:\"animationRule\",extension:_cartesianAxisRef.default});var AxisRefVisual=function(_ComponentInterface){(0,_inheritsLoose2.default)(AxisRefVisual,_ComponentInterface);function AxisRefVisual(){var _this;_this=_ComponentInterface.call(this)||this;_this.config.map={};_this.config.explicitDrawItems={};return _this}var _proto=AxisRefVisual.prototype;_proto.getType=function getType(){return\"axisRefVisuals\"};_proto.getName=function getName(){return\"axisRefVisualsCartesian\"};_proto.draw=function draw(){var drawingInfo=this.getDrawingInfo(),eachCompInfo,explicitDrawItems=this.getexplicitDrawItems(),axisRefConf=this.config,oldMap=axisRefConf.map,map={},i,type,key,axis,elementIdArr,eachDrawInfo,parent=this.getLinkedParent(),axes=parent.getAxes(),axesIdArr=[],baseContainer=parent.getChildContainer(\"axisReferenceVisualsFloor\"),bottomContainer=parent.getChildContainer(\"axisReferenceVisualsBottom\"),middleContainer=parent.getChildContainer(\"axisReferenceVisualsMiddle\"),topContainer=parent.getChildContainer(\"axisReferenceVisualsTop\"),ceilContainer=parent.getChildContainer(\"axisReferenceVisualsCeil\");parent.config.trendlines=[];parent.config.vtrendlines=[];for(i=0;i<axes.length;++i){axesIdArr.push(axes[i].axis.getId())}axisRefConf.containers=[baseContainer,bottomContainer,middleContainer,topContainer,ceilContainer];for(key in drawingInfo){if(drawingInfo.hasOwnProperty(key)){axis=this.getLinkedItem(key);if(axesIdArr.indexOf(axis.getId())>=0){elementIdArr=map[key];if(!elementIdArr){elementIdArr=map[key]=[]}eachCompInfo=drawingInfo[key];for(i=0;i<eachCompInfo.length;++i){eachDrawInfo=eachCompInfo[i];type=eachDrawInfo.type;if(type===\"band\"){elementIdArr.push.apply(elementIdArr,this.createBand(eachDrawInfo,axis))}else if(type===\"line\"){elementIdArr.push.apply(elementIdArr,this.createLine(eachDrawInfo,axis))}}}}}if(axisRefConf.isSmartDrawing){for(key in oldMap){if(oldMap.hasOwnProperty(key)&&!explicitDrawItems[key]&&this.getLinkedItem(key)){map[key]=oldMap[key]}}}this.resetexplicitDrawItems();this.removeExtraElements(map)};_proto.getDrawingInfo=function getDrawingInfo(){var drawingInfo={},key,item,explicitDrawItems=this.getexplicitDrawItems(),canvasChanged=this.isCanvasChnaged(),isSmartDrawing=this.config.isSmartDrawing=Object.keys(explicitDrawItems).length&&!canvasChanged,linkItems=isSmartDrawing?explicitDrawItems:this.getLinkedItem();for(key in linkItems){if(linkItems.hasOwnProperty(key)){item=linkItems[key];drawingInfo[key]=item.getReferenceInfo()}}return drawingInfo};_proto.createLine=function createLine(lineInfo,axis){var containersArr=this.config.containers,container=containersArr[lineInfo.layer],axisConf=axis.config,paper=this.getFromEnv(\"paper\"),chartType=this.getFromEnv(\"chart\").getName(),canvas=this.getLinkedParent(),animationManager=this.getFromEnv(\"animationManager\"),toolTipController=this.getFromEnv(\"toolTipController\"),canvasConf=canvas.config,trendLines=canvasConf.trendlines,isVertical=axisConf.isVertical,canvasLeft=canvasConf.canvasLeft,canvasTop=canvasConf.canvasTop,canvasBottom=canvasTop+canvasConf.canvasHeight,canvasRight=canvasLeft+canvasConf.canvasWidth,interpolatorLeftRight=(0,_number.default)(canvasLeft,canvasRight),interpolatorTopBottom=(0,_number.default)(canvasTop,canvasBottom),scale=axis.getScale(),start=scale.getRangeValue(lineInfo.from),end=lineInfo.to!==UNDEF&&scale.getRangeValue(lineInfo.to)||start,path=isVertical?[\"M\",canvasLeft,start,\"L\",canvasRight,end]:[\"M\",start,canvasBottom,\"L\",end,canvasTop],lineAttr=lineInfo.attr,text=lineInfo.text,textAttr=text&&text.attr,labelPosition=text&&text.labelPosition||0,compId=axis.getId(),eleId=lineInfo.id||lineInfo.from,lineEleId=compId+\"_\"+eleId,textEleId,element=this.getGraphicalElement(lineEleId),textElem,key,handlers=lineInfo.handlers,value={start:lineInfo.from,end:lineInfo.to};lineAttr.path=(0,_cartesian.getCrispPath)(path,isValid(lineAttr[\"stroke-width\"])?lineAttr[\"stroke-width\"]:1).path.toString();if(/trend/.test(lineInfo.id)){trendLines.push({x1:path[1],y1:path[2],x2:path[4],y2:path[5],tooltext:lineInfo.toolText,tolerance:lineAttr[\"stroke-width\"]<5?2.5:lineAttr[\"stroke-width\"]/2})}lineAttr[\"stroke-linecap\"]=BUTT_STR;element=this.addGraphicalElement(lineEleId,animationManager.setAnimation({container:container,el:element||\"path\",attr:lineAttr,component:this,axis:axis,data:{value:value,path:path},label:\"path\"}));element.data(\"data\",value);if(text){textEleId=compId+\"_\"+eleId+textAttr.text;textElem=this.getGraphicalElement(textEleId);if(isVertical){textAttr.x=interpolatorLeftRight(labelPosition);textAttr.y=start}else{textAttr.x=start;textAttr.y=interpolatorTopBottom(labelPosition)}textAttr.text=text.label;textAttr.transform=paper.getSuggestiveRotation(text.labelRotation,textAttr.x,textAttr.y);textElem=this.addGraphicalElement(textEleId,animationManager.setAnimation({container:containersArr[text.layer],el:textElem||\"text\",attr:textAttr,component:this,axis:axis,data:{value:lineInfo.from},label:\"text\",css:text.css}));textElem.data(\"data\",lineInfo.from)}if(!/zoomscatter/i.test(chartType)){if(lineInfo.toolText){toolTipController.enableToolTip(element,lineInfo.toolText)}else{toolTipController.disableToolTip(element)}}for(key in handlers){if(handlers.hasOwnProperty(key)){element.on(key,handlers[key].bind(axis));textElem&&textElem.on(key,handlers[key].bind(axis))}}return text?[lineEleId,textEleId]:[lineEleId]};_proto.createBand=function createBand(bandInfo,axis){var container=this.config.containers[bandInfo.layer],axisConf=axis.config,animationManager=this.getFromEnv(\"animationManager\"),toolTipController=this.getFromEnv(\"toolTipController\"),canvas=this.getLinkedParent(),chartType=this.getFromEnv(\"chart\").getName(),canvasConf=canvas.config,isVertical=axisConf.isVertical,canvasLeft=canvasConf.canvasLeft,canvasTop=canvasConf.canvasTop,canvasBottom=canvasTop+canvasConf.canvasHeight,canvasRight=canvasLeft+canvasConf.canvasWidth,scale=axis.getScale(),startVal=bandInfo.from,endVal=bandInfo.to!==UNDEF?bandInfo.to:startVal,startPx,endPx,compId=axis.getId(),eleId,bandElemId,element,key,elemAttr=bandInfo.attr,difference,handlers=bandInfo.handlers;if(startVal===\"canvasStart\"){startPx=isVertical?canvasTop:canvasLeft}else{startPx=scale.getRangeValue(startVal)}if(endVal===\"canvasEnd\"){endPx=isVertical?canvasBottom:canvasRight}else{endPx=scale.getRangeValue(endVal)}difference=Math.abs(startPx-endPx);if(isVertical){elemAttr.x=canvasLeft;elemAttr.y=Math.min(startPx,endPx);elemAttr.width=canvasRight-canvasLeft;elemAttr.height=difference}else{elemAttr.x=Math.min(startPx,endPx);elemAttr.y=canvasTop;elemAttr.width=difference;elemAttr.height=canvasBottom-canvasTop}eleId=bandInfo.id||elemAttr.x+\"_\"+elemAttr.y;bandElemId=compId+\"_\"+eleId;element=this.getGraphicalElement(bandElemId);if(/trend/.test(bandInfo.id)){canvas.config.vtrendlines.push({x1:elemAttr.x,y1:elemAttr.y,x2:elemAttr.x+elemAttr.width,y2:elemAttr.y+elemAttr.height,tooltext:bandInfo.toolText,tolerance:elemAttr[\"stroke-width\"]<5?2.5:elemAttr[\"stroke-width\"]/2,isTrendZone:1})}element=this.addGraphicalElement(bandElemId,animationManager.setAnimation({container:container,el:element||\"rect\",attr:elemAttr,component:this,label:\"rect\"}));if(!/zoomscatter/i.test(chartType)){if(bandInfo.toolText){toolTipController.enableToolTip(element,bandInfo.toolText)}else{toolTipController.disableToolTip(element)}}for(key in handlers){if(handlers.hasOwnProperty(key)){element.on(key,handlers[key].bind(axis))}}return[bandElemId]};_proto.removeExtraElements=function removeExtraElements(newMap){var oldMap=this.config.map,key,idArr,i,len,removingElement,removeElemId;for(key in oldMap){if(!newMap[key]){idArr=oldMap[key];len=idArr.length;for(i=0;i<len;++i){removingElement=this.getGraphicalElement(idArr[i]);removingElement&&this.removeGraphicalElement(removingElement)}}else{removeElemId=(0,_diff.default)(oldMap[key],newMap[key]);len=removeElemId.length;for(i=0;i<len;++i){removingElement=this.getGraphicalElement(removeElemId[i]);removingElement&&this.removeGraphicalElement(removingElement)}}}this.config.map=newMap};_proto.setLinkedItem=function setLinkedItem(itemName,item){_ComponentInterface.prototype.setLinkedItem.call(this,itemName,item);var axisRefComp=this,sender;if(item.getType()===\"axis\"){axisRefComp.addExtEventListener(\"predraw\",(function(event){sender=event.sender;if(sender.getState(\"removed\")){axisRefComp.removeLinkedItem(sender.getId());axisRefComp.asyncDraw()}}),item)}};_proto.addexplicitDrawItems=function addexplicitDrawItems(key,item){this.config.explicitDrawItems[key]=item};_proto.getexplicitDrawItems=function getexplicitDrawItems(){return this.config.explicitDrawItems};_proto.resetexplicitDrawItems=function resetexplicitDrawItems(){this.config.explicitDrawItems={}};_proto.isCanvasChnaged=function isCanvasChnaged(){var canvasDim=this.getLinkedParent().getEffectiveDimensions(),axisRefConf=this.config,isCanvasChnaged;isCanvasChnaged=JSON.stringify(canvasDim)!==JSON.stringify(axisRefConf.canvasDim);axisRefConf.canvasDim=canvasDim;return isCanvasChnaged};return AxisRefVisual}(_componentInterface.ComponentInterface);var _default=AxisRefVisual;exports.default=_default;"]},"metadata":{},"sourceType":"script"}