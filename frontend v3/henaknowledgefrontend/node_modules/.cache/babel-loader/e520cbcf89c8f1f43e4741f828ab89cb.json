{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _lib = require(\"@fusioncharts/core/src/lib\");\n\nvar _componentInterface = require(\"@fusioncharts/core/src/component-interface\");\n\nvar CROSSLINE_ANIM_DUR_MULTIPLIER = 1e3,\n    CROSSLINE_ANIM_DUR_DEFAULT = .09;\n\nvar DEFAULTCOLOR = \"#EEEEEE\",\n    DEFAULTALPHA = 50,\n    crispFixer = _lib.hasSVG ? 0 : .5,\n    crisping = function crisping(x, s) {\n  return Math.round(x + (s % 2 / 2 + crispFixer)) - (s % 2 / 2 + crispFixer);\n},\n    handlers = function handlers(crossLineManagerBand) {\n  return {\n    onhover: function onhover(event, o) {\n      !crossLineManagerBand.config.axisScrolling && crossLineManagerBand.show(o.axes ? {\n        axesInfo: o.axes\n      } : {\n        event: event\n      });\n    },\n    onhoverout: function onhoverout(event) {\n      crossLineManagerBand.hide({\n        event: event\n      });\n    }\n  };\n},\n    createRaphaelGroup = function createRaphaelGroup(groupName, parentContainer, manager) {\n  return manager.getFromEnv(\"animationManager\").setAnimation({\n    el: \"group\",\n    attr: {\n      name: groupName\n    },\n    container: parentContainer,\n    state: \"appearing\",\n    component: manager,\n    label: \"group\"\n  });\n};\n\nvar CrossLineManagerBand = function (_ComponentInterface) {\n  (0, _inheritsLoose2.default)(CrossLineManagerBand, _ComponentInterface);\n\n  function CrossLineManagerBand() {\n    var _this;\n\n    _this = _ComponentInterface.call(this) || this;\n    _this._handlerAPI = handlers((0, _assertThisInitialized2.default)(_this));\n    _this.mouseOutTimer = _lib.UNDEF;\n    return _this;\n  }\n\n  var _proto = CrossLineManagerBand.prototype;\n\n  _proto.getAttachedAxisInfo = function getAttachedAxisInfo(event) {\n    if (event === void 0) {\n      event = {};\n    }\n\n    var manager = this,\n        listOfAxes = manager.getLinkedParent().getAxes(),\n        i,\n        axis,\n        isY,\n        isVertical,\n        axisTranslation,\n        coordinate = event.originalEvent && (0, _lib.getMouseCoordinate)(manager.getLinkedParent().getFromEnv(\"chart-container\"), event.originalEvent, manager.getFromEnv(\"chart\")),\n        chartX = coordinate && coordinate.chartX || 0,\n        chartY = coordinate && coordinate.chartY || 0;\n\n    for (i = listOfAxes.length - 1; i >= 0; i--) {\n      axis = listOfAxes[i].axis;\n      isY = listOfAxes[i].isY;\n\n      if (!isY) {\n        isVertical = !!axis.config.isVertical;\n        axisTranslation = axis.getTranslation();\n        return {\n          value: isVertical ? axis.getValue(chartY + axisTranslation) : axis.getValue(chartX + axisTranslation),\n          axis: axis,\n          isVertical: isVertical,\n          isY: false\n        };\n      }\n    }\n  };\n\n  _proto.configure = function configure() {\n    var manager = this,\n        conf = manager.config,\n        chartConfig = manager.getFromEnv(\"chartConfig\"),\n        chartAttr = manager.getFromEnv(\"chart-attrib\");\n    conf.drawCrossLine = (0, _lib.pluckNumber)(chartAttr.drawcrossline, chartConfig.drawcrossline, 0);\n    conf.bandStyle = {\n      fillcolor: (0, _lib.pluck)(chartAttr.crosslinecolor, chartConfig.crosslinecolor, DEFAULTCOLOR),\n      alpha: (0, _lib.pluckNumber)(chartAttr.crosslinealpha, chartConfig.crosslinealpha, DEFAULTALPHA),\n      thickness: (0, _lib.pluckNumber)(chartConfig.defaultcrosslinethickness),\n      managerId: manager.getId(),\n      onTop: (0, _lib.pluckNumber)(chartAttr.drawcrosslineontop, chartConfig.drawcrosslineontop, 0),\n      cursor: \"pointer\",\n      animDuration: (0, _lib.pluckNumber)(chartAttr.crosslineanimation, 0) && (0, _lib.pluckNumber)(chartAttr.crosslineanimationduration, CROSSLINE_ANIM_DUR_DEFAULT) * CROSSLINE_ANIM_DUR_MULTIPLIER\n    };\n  };\n\n  _proto.createGroup = function createGroup() {\n    var manager = this,\n        crosslineBottom = manager.getLinkedParent().getChildContainer(\"crosslineBottom\"),\n        crosslineTop = manager.getLinkedParent().getChildContainer(\"crosslineTop\");\n    !manager.getChildContainer(\"crosslineTop\") && manager.addChildContainer(\"crosslineTop\", createRaphaelGroup(\"crosslineTop\", crosslineTop, manager));\n    !manager.getChildContainer(\"crosslineBottom\") && manager.addChildContainer(\"crosslineBottom\", createRaphaelGroup(\"crosslineBottom\", crosslineBottom, manager));\n  };\n\n  _proto.show = function show(info) {\n    if (info === void 0) {\n      info = {};\n    }\n\n    var manager = this,\n        event = info.event;\n    clearTimeout(this.mouseOutTimer);\n    manager.config.attachedCanvasAxisInfo = manager.getAttachedAxisInfo(event);\n\n    manager._setAptAxesInfo(info.axesInfo, info.value);\n\n    manager._show(event);\n  };\n\n  _proto._setAptAxesInfo = function _setAptAxesInfo(extAttachedAxesInfo, value) {\n    if (extAttachedAxesInfo === void 0) {\n      extAttachedAxesInfo = [];\n    }\n\n    var infoLength = extAttachedAxesInfo.length,\n        extAttachedAxis,\n        attachedCanvasAxisInfo = this.config.attachedCanvasAxisInfo,\n        i;\n\n    if (extAttachedAxesInfo.length) {\n      for (i = 0; i < infoLength; i++) {\n        extAttachedAxis = extAttachedAxesInfo[i];\n\n        if (extAttachedAxis.axis === attachedCanvasAxisInfo.axis) {\n          attachedCanvasAxisInfo.value = extAttachedAxis.value;\n          break;\n        }\n      }\n    }\n\n    if (value !== _lib.UNDEF) {\n      attachedCanvasAxisInfo.value = value;\n    }\n  };\n\n  _proto._show = function _show(event) {\n    var manager = this,\n        conf = manager.config,\n        chartConfig = manager.getFromEnv(\"chartConfig\"),\n        crossline = manager.getChildren(\"crossline\")[0],\n        attachedCanvasAxisInfo = conf.attachedCanvasAxisInfo,\n        activeAxis = attachedCanvasAxisInfo.axis,\n        limit = activeAxis.getLimit().max - activeAxis.config.endPad,\n        xAxisIndex = Math.round(attachedCanvasAxisInfo.value),\n        xAxisPos = attachedCanvasAxisInfo.axis.getPixel(xAxisIndex) - attachedCanvasAxisInfo.axis.getTranslation(),\n        xAxisZeroPos,\n        xAxisOnePos,\n        thickness,\n        bandAttrs = Object.assign({}, conf.bandStyle),\n        crispedValue,\n        canvasConfig = manager.getFromEnv(\"canvasConfig\"),\n        canvasTop = canvasConfig.canvasTop,\n        canvasLeft = canvasConfig.canvasLeft;\n\n    if (xAxisIndex < 0 || xAxisIndex > limit) {\n      return;\n    }\n\n    if (manager.config.lastIndex !== xAxisIndex && conf.drawCrossLine) {\n      if ((thickness = bandAttrs.thickness) === _lib.UNDEF) {\n        if (chartConfig._hascolumn === false) {\n          thickness = 1;\n        } else {\n          xAxisZeroPos = activeAxis.getPixel(0);\n          xAxisOnePos = activeAxis.getPixel(1);\n          thickness = Math.abs(xAxisOnePos - xAxisZeroPos);\n        }\n      }\n\n      crispedValue = crisping(xAxisPos, thickness);\n      manager.createGroup();\n      bandAttrs.thickness = thickness;\n\n      if (attachedCanvasAxisInfo.isVertical) {\n        bandAttrs = Object.assign(bandAttrs, {\n          x1: canvasLeft,\n          y1: crispedValue,\n          x2: canvasLeft + canvasConfig.canvasWidth,\n          y2: crispedValue\n        });\n      } else {\n        bandAttrs = Object.assign(bandAttrs, {\n          x1: crispedValue,\n          y1: canvasTop,\n          x2: crispedValue,\n          y2: canvasTop + canvasConfig.canvasHeight\n        });\n      }\n\n      crossline.show(bandAttrs);\n      manager.getFromEnv(\"chart\").fireChartInstanceEvent(\"onChangeCrossLine\", {\n        currentIndex: xAxisIndex,\n        lastIndex: manager.config.lastIndex,\n        source: event ? \"mouse interaction\" : \"public API\"\n      });\n      manager.config.lastIndex = xAxisIndex;\n    }\n  };\n\n  _proto.hide = function hide(info) {\n    var _this2 = this;\n\n    if (info === void 0) {\n      info = {};\n    }\n\n    var manager = this;\n    this.mouseOutTimer = setTimeout(function () {\n      manager.getFromEnv(\"chart\").fireChartInstanceEvent(\"onChangeCrossLine\", {\n        lastIndex: manager.config.lastIndex,\n        source: info.event ? \"mouse interaction\" : \"public API\"\n      });\n      delete _this2.config.lastIndex;\n\n      _this2.getChildren(\"crossline\")[0].hide();\n    }, 20);\n  };\n\n  _proto.getType = function getType() {\n    return \"crossline-manager\";\n  };\n\n  _proto.getName = function getName() {\n    return \"crossline-manager-band-category-axis\";\n  };\n\n  return CrossLineManagerBand;\n}(_componentInterface.ComponentInterface);\n\nvar _default = CrossLineManagerBand;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/features/src/crossline/crossline-manager-band-category-axis.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_assertThisInitialized2","_inheritsLoose2","_lib","_componentInterface","CROSSLINE_ANIM_DUR_MULTIPLIER","CROSSLINE_ANIM_DUR_DEFAULT","DEFAULTCOLOR","DEFAULTALPHA","crispFixer","hasSVG","crisping","x","s","Math","round","handlers","crossLineManagerBand","onhover","event","o","config","axisScrolling","show","axes","axesInfo","onhoverout","hide","createRaphaelGroup","groupName","parentContainer","manager","getFromEnv","setAnimation","el","attr","name","container","state","component","label","CrossLineManagerBand","_ComponentInterface","_this","call","_handlerAPI","mouseOutTimer","UNDEF","_proto","prototype","getAttachedAxisInfo","listOfAxes","getLinkedParent","getAxes","i","axis","isY","isVertical","axisTranslation","coordinate","originalEvent","getMouseCoordinate","chartX","chartY","length","getTranslation","value","getValue","configure","conf","chartConfig","chartAttr","drawCrossLine","pluckNumber","drawcrossline","bandStyle","fillcolor","pluck","crosslinecolor","alpha","crosslinealpha","thickness","defaultcrosslinethickness","managerId","getId","onTop","drawcrosslineontop","cursor","animDuration","crosslineanimation","crosslineanimationduration","createGroup","crosslineBottom","getChildContainer","crosslineTop","addChildContainer","info","clearTimeout","attachedCanvasAxisInfo","_setAptAxesInfo","_show","extAttachedAxesInfo","infoLength","extAttachedAxis","crossline","getChildren","activeAxis","limit","getLimit","max","endPad","xAxisIndex","xAxisPos","getPixel","xAxisZeroPos","xAxisOnePos","bandAttrs","Object","assign","crispedValue","canvasConfig","canvasTop","canvasLeft","lastIndex","_hascolumn","abs","x1","y1","x2","canvasWidth","y2","canvasHeight","fireChartInstanceEvent","currentIndex","source","_this2","setTimeout","getType","getName","ComponentInterface","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _lib=require(\"@fusioncharts/core/src/lib\");var _componentInterface=require(\"@fusioncharts/core/src/component-interface\");var CROSSLINE_ANIM_DUR_MULTIPLIER=1e3,CROSSLINE_ANIM_DUR_DEFAULT=.09;var DEFAULTCOLOR=\"#EEEEEE\",DEFAULTALPHA=50,crispFixer=_lib.hasSVG?0:.5,crisping=function crisping(x,s){return Math.round(x+(s%2/2+crispFixer))-(s%2/2+crispFixer)},handlers=function handlers(crossLineManagerBand){return{onhover:function onhover(event,o){!crossLineManagerBand.config.axisScrolling&&crossLineManagerBand.show(o.axes?{axesInfo:o.axes}:{event:event})},onhoverout:function onhoverout(event){crossLineManagerBand.hide({event:event})}}},createRaphaelGroup=function createRaphaelGroup(groupName,parentContainer,manager){return manager.getFromEnv(\"animationManager\").setAnimation({el:\"group\",attr:{name:groupName},container:parentContainer,state:\"appearing\",component:manager,label:\"group\"})};var CrossLineManagerBand=function(_ComponentInterface){(0,_inheritsLoose2.default)(CrossLineManagerBand,_ComponentInterface);function CrossLineManagerBand(){var _this;_this=_ComponentInterface.call(this)||this;_this._handlerAPI=handlers((0,_assertThisInitialized2.default)(_this));_this.mouseOutTimer=_lib.UNDEF;return _this}var _proto=CrossLineManagerBand.prototype;_proto.getAttachedAxisInfo=function getAttachedAxisInfo(event){if(event===void 0){event={}}var manager=this,listOfAxes=manager.getLinkedParent().getAxes(),i,axis,isY,isVertical,axisTranslation,coordinate=event.originalEvent&&(0,_lib.getMouseCoordinate)(manager.getLinkedParent().getFromEnv(\"chart-container\"),event.originalEvent,manager.getFromEnv(\"chart\")),chartX=coordinate&&coordinate.chartX||0,chartY=coordinate&&coordinate.chartY||0;for(i=listOfAxes.length-1;i>=0;i--){axis=listOfAxes[i].axis;isY=listOfAxes[i].isY;if(!isY){isVertical=!!axis.config.isVertical;axisTranslation=axis.getTranslation();return{value:isVertical?axis.getValue(chartY+axisTranslation):axis.getValue(chartX+axisTranslation),axis:axis,isVertical:isVertical,isY:false}}}};_proto.configure=function configure(){var manager=this,conf=manager.config,chartConfig=manager.getFromEnv(\"chartConfig\"),chartAttr=manager.getFromEnv(\"chart-attrib\");conf.drawCrossLine=(0,_lib.pluckNumber)(chartAttr.drawcrossline,chartConfig.drawcrossline,0);conf.bandStyle={fillcolor:(0,_lib.pluck)(chartAttr.crosslinecolor,chartConfig.crosslinecolor,DEFAULTCOLOR),alpha:(0,_lib.pluckNumber)(chartAttr.crosslinealpha,chartConfig.crosslinealpha,DEFAULTALPHA),thickness:(0,_lib.pluckNumber)(chartConfig.defaultcrosslinethickness),managerId:manager.getId(),onTop:(0,_lib.pluckNumber)(chartAttr.drawcrosslineontop,chartConfig.drawcrosslineontop,0),cursor:\"pointer\",animDuration:(0,_lib.pluckNumber)(chartAttr.crosslineanimation,0)&&(0,_lib.pluckNumber)(chartAttr.crosslineanimationduration,CROSSLINE_ANIM_DUR_DEFAULT)*CROSSLINE_ANIM_DUR_MULTIPLIER}};_proto.createGroup=function createGroup(){var manager=this,crosslineBottom=manager.getLinkedParent().getChildContainer(\"crosslineBottom\"),crosslineTop=manager.getLinkedParent().getChildContainer(\"crosslineTop\");!manager.getChildContainer(\"crosslineTop\")&&manager.addChildContainer(\"crosslineTop\",createRaphaelGroup(\"crosslineTop\",crosslineTop,manager));!manager.getChildContainer(\"crosslineBottom\")&&manager.addChildContainer(\"crosslineBottom\",createRaphaelGroup(\"crosslineBottom\",crosslineBottom,manager))};_proto.show=function show(info){if(info===void 0){info={}}var manager=this,event=info.event;clearTimeout(this.mouseOutTimer);manager.config.attachedCanvasAxisInfo=manager.getAttachedAxisInfo(event);manager._setAptAxesInfo(info.axesInfo,info.value);manager._show(event)};_proto._setAptAxesInfo=function _setAptAxesInfo(extAttachedAxesInfo,value){if(extAttachedAxesInfo===void 0){extAttachedAxesInfo=[]}var infoLength=extAttachedAxesInfo.length,extAttachedAxis,attachedCanvasAxisInfo=this.config.attachedCanvasAxisInfo,i;if(extAttachedAxesInfo.length){for(i=0;i<infoLength;i++){extAttachedAxis=extAttachedAxesInfo[i];if(extAttachedAxis.axis===attachedCanvasAxisInfo.axis){attachedCanvasAxisInfo.value=extAttachedAxis.value;break}}}if(value!==_lib.UNDEF){attachedCanvasAxisInfo.value=value}};_proto._show=function _show(event){var manager=this,conf=manager.config,chartConfig=manager.getFromEnv(\"chartConfig\"),crossline=manager.getChildren(\"crossline\")[0],attachedCanvasAxisInfo=conf.attachedCanvasAxisInfo,activeAxis=attachedCanvasAxisInfo.axis,limit=activeAxis.getLimit().max-activeAxis.config.endPad,xAxisIndex=Math.round(attachedCanvasAxisInfo.value),xAxisPos=attachedCanvasAxisInfo.axis.getPixel(xAxisIndex)-attachedCanvasAxisInfo.axis.getTranslation(),xAxisZeroPos,xAxisOnePos,thickness,bandAttrs=Object.assign({},conf.bandStyle),crispedValue,canvasConfig=manager.getFromEnv(\"canvasConfig\"),canvasTop=canvasConfig.canvasTop,canvasLeft=canvasConfig.canvasLeft;if(xAxisIndex<0||xAxisIndex>limit){return}if(manager.config.lastIndex!==xAxisIndex&&conf.drawCrossLine){if((thickness=bandAttrs.thickness)===_lib.UNDEF){if(chartConfig._hascolumn===false){thickness=1}else{xAxisZeroPos=activeAxis.getPixel(0);xAxisOnePos=activeAxis.getPixel(1);thickness=Math.abs(xAxisOnePos-xAxisZeroPos)}}crispedValue=crisping(xAxisPos,thickness);manager.createGroup();bandAttrs.thickness=thickness;if(attachedCanvasAxisInfo.isVertical){bandAttrs=Object.assign(bandAttrs,{x1:canvasLeft,y1:crispedValue,x2:canvasLeft+canvasConfig.canvasWidth,y2:crispedValue})}else{bandAttrs=Object.assign(bandAttrs,{x1:crispedValue,y1:canvasTop,x2:crispedValue,y2:canvasTop+canvasConfig.canvasHeight})}crossline.show(bandAttrs);manager.getFromEnv(\"chart\").fireChartInstanceEvent(\"onChangeCrossLine\",{currentIndex:xAxisIndex,lastIndex:manager.config.lastIndex,source:event?\"mouse interaction\":\"public API\"});manager.config.lastIndex=xAxisIndex}};_proto.hide=function hide(info){var _this2=this;if(info===void 0){info={}}var manager=this;this.mouseOutTimer=setTimeout((function(){manager.getFromEnv(\"chart\").fireChartInstanceEvent(\"onChangeCrossLine\",{lastIndex:manager.config.lastIndex,source:info.event?\"mouse interaction\":\"public API\"});delete _this2.config.lastIndex;_this2.getChildren(\"crossline\")[0].hide()}),20)};_proto.getType=function getType(){return\"crossline-manager\"};_proto.getName=function getName(){return\"crossline-manager-band-category-axis\"};return CrossLineManagerBand}(_componentInterface.ComponentInterface);var _default=CrossLineManagerBand;exports.default=_default;"]},"metadata":{},"sourceType":"script"}