{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _lib = require(\"@fusioncharts/core/src/lib\");\n\nvar _componentInterface = require(\"@fusioncharts/core/src/component-interface\");\n\nvar IN_ALERT_RANGE = \"1\",\n    OUT_OF_ALERT_RANGE = \"2\",\n    ACTION_CALLJS = \"calljs\",\n    ACTION_SHOWANNOTATION = \"showannotation\";\n\nvar AlertManager = function (_ComponentInterface) {\n  (0, _inheritsLoose2.default)(AlertManager, _ComponentInterface);\n\n  function AlertManager() {\n    var _this;\n\n    _this = _ComponentInterface.call(this) || this;\n    _this.pIndex = 1;\n    _this.linkedItems = {\n      chart: {}\n    };\n    return _this;\n  }\n\n  var _proto = AlertManager.prototype;\n\n  _proto.getType = function getType() {\n    return \"extension\";\n  };\n\n  _proto.getName = function getName() {\n    return \"AlertManager\";\n  };\n\n  _proto.configure = function configure() {\n    var alertManager = this,\n        alerts = alertManager.getFromEnv(\"dataSource\"),\n        alertArr = alerts && alerts.alerts && alerts.alerts.alert,\n        numberFormatter = alertManager.getFromEnv(\"number-formatter\"),\n        config = alertManager.config || (alertManager.config = {}),\n        alertCount,\n        j,\n        alertObj;\n\n    if (alertArr && alertArr.length) {\n      config.alertArr = alertArr;\n      alertCount = alertArr.length;\n\n      for (j = 0; j < alertCount; j += 1) {\n        alertObj = alertArr[j];\n        alertObj.minvalue = numberFormatter.getCleanValue(alertObj.minvalue);\n        alertObj.maxvalue = numberFormatter.getCleanValue(alertObj.maxvalue);\n      }\n    } else {\n      config.alertArr = [];\n    }\n  };\n\n  _proto.processRTData = function processRTData(rtData) {\n    var alertManager = this,\n        config = alertManager.config,\n        numberFormatter = alertManager.getFromEnv(\"number-formatter\"),\n        i,\n        j,\n        dsLength,\n        dsObj,\n        dataLength,\n        dataObj,\n        val;\n\n    if (rtData && rtData.dataset && rtData.dataset.length) {\n      dsLength = rtData.dataset.length;\n\n      for (i = 0; i < dsLength; i += 1) {\n        dsObj = rtData.dataset[i];\n\n        if (dsObj.data && dsObj.data.length) {\n          if (config.datasetMap && config.datasetMap[i] === 0) {\n            continue;\n          }\n\n          dataLength = dsObj.data.length;\n\n          for (j = 0; j < dataLength; j += 1) {\n            dataObj = dsObj.data[j];\n            val = dataObj && numberFormatter.getCleanValue(dataObj.value);\n\n            if (val !== null) {\n              alertManager._doAlert(numberFormatter.getCleanValue(dataObj.value));\n            }\n          }\n        }\n      }\n    }\n  };\n\n  _proto._doAlert = function _doAlert(val) {\n    var alertManager = this,\n        chart = alertManager.getLinkedParent(),\n        alertArr = alertManager.config.alertArr,\n        alertCount = alertArr.length,\n        alertObj,\n        j,\n        alertAction;\n\n    for (j = 0; j < alertCount; j += 1) {\n      alertObj = alertArr[j];\n      alertAction = alertObj.action && alertObj.action.toLowerCase();\n\n      if (alertObj.minvalue <= val && alertObj.maxvalue >= val) {\n        if (!(alertObj.occuronce === \"1\" && alertObj.hasOccurred)) {\n          alertObj.hasOccurred = true;\n          alertObj.state = IN_ALERT_RANGE;\n\n          switch (alertAction) {\n            case ACTION_CALLJS:\n              setTimeout((0, _lib.pseudoEval)(alertObj.param));\n              break;\n\n            case ACTION_SHOWANNOTATION:\n              chart.showAnnotation && chart.showAnnotation(alertObj.param);\n              break;\n          }\n\n          chart.fireChartInstanceEvent(\"AlertComplete\", {\n            alertValue: val,\n            alertMaxValue: alertObj.maxvalue,\n            alertMinValue: alertObj.minvalue\n          });\n        }\n      } else {\n        if (alertAction === ACTION_SHOWANNOTATION && alertObj.state === IN_ALERT_RANGE) {\n          chart.hideAnnotation && chart.hideAnnotation(alertObj.param);\n        }\n\n        alertObj.state = OUT_OF_ALERT_RANGE;\n      }\n    }\n  };\n\n  return AlertManager;\n}(_componentInterface.ComponentInterface);\n\nvar _default = AlertManager;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/features/src/alertmanager/alertmanager.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_inheritsLoose2","_lib","_componentInterface","IN_ALERT_RANGE","OUT_OF_ALERT_RANGE","ACTION_CALLJS","ACTION_SHOWANNOTATION","AlertManager","_ComponentInterface","_this","call","pIndex","linkedItems","chart","_proto","prototype","getType","getName","configure","alertManager","alerts","getFromEnv","alertArr","alert","numberFormatter","config","alertCount","j","alertObj","length","minvalue","getCleanValue","maxvalue","processRTData","rtData","i","dsLength","dsObj","dataLength","dataObj","val","dataset","data","datasetMap","value","_doAlert","getLinkedParent","alertAction","action","toLowerCase","occuronce","hasOccurred","state","setTimeout","pseudoEval","param","showAnnotation","fireChartInstanceEvent","alertValue","alertMaxValue","alertMinValue","hideAnnotation","ComponentInterface","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _lib=require(\"@fusioncharts/core/src/lib\");var _componentInterface=require(\"@fusioncharts/core/src/component-interface\");var IN_ALERT_RANGE=\"1\",OUT_OF_ALERT_RANGE=\"2\",ACTION_CALLJS=\"calljs\",ACTION_SHOWANNOTATION=\"showannotation\";var AlertManager=function(_ComponentInterface){(0,_inheritsLoose2.default)(AlertManager,_ComponentInterface);function AlertManager(){var _this;_this=_ComponentInterface.call(this)||this;_this.pIndex=1;_this.linkedItems={chart:{}};return _this}var _proto=AlertManager.prototype;_proto.getType=function getType(){return\"extension\"};_proto.getName=function getName(){return\"AlertManager\"};_proto.configure=function configure(){var alertManager=this,alerts=alertManager.getFromEnv(\"dataSource\"),alertArr=alerts&&alerts.alerts&&alerts.alerts.alert,numberFormatter=alertManager.getFromEnv(\"number-formatter\"),config=alertManager.config||(alertManager.config={}),alertCount,j,alertObj;if(alertArr&&alertArr.length){config.alertArr=alertArr;alertCount=alertArr.length;for(j=0;j<alertCount;j+=1){alertObj=alertArr[j];alertObj.minvalue=numberFormatter.getCleanValue(alertObj.minvalue);alertObj.maxvalue=numberFormatter.getCleanValue(alertObj.maxvalue)}}else{config.alertArr=[]}};_proto.processRTData=function processRTData(rtData){var alertManager=this,config=alertManager.config,numberFormatter=alertManager.getFromEnv(\"number-formatter\"),i,j,dsLength,dsObj,dataLength,dataObj,val;if(rtData&&rtData.dataset&&rtData.dataset.length){dsLength=rtData.dataset.length;for(i=0;i<dsLength;i+=1){dsObj=rtData.dataset[i];if(dsObj.data&&dsObj.data.length){if(config.datasetMap&&config.datasetMap[i]===0){continue}dataLength=dsObj.data.length;for(j=0;j<dataLength;j+=1){dataObj=dsObj.data[j];val=dataObj&&numberFormatter.getCleanValue(dataObj.value);if(val!==null){alertManager._doAlert(numberFormatter.getCleanValue(dataObj.value))}}}}}};_proto._doAlert=function _doAlert(val){var alertManager=this,chart=alertManager.getLinkedParent(),alertArr=alertManager.config.alertArr,alertCount=alertArr.length,alertObj,j,alertAction;for(j=0;j<alertCount;j+=1){alertObj=alertArr[j];alertAction=alertObj.action&&alertObj.action.toLowerCase();if(alertObj.minvalue<=val&&alertObj.maxvalue>=val){if(!(alertObj.occuronce===\"1\"&&alertObj.hasOccurred)){alertObj.hasOccurred=true;alertObj.state=IN_ALERT_RANGE;switch(alertAction){case ACTION_CALLJS:setTimeout((0,_lib.pseudoEval)(alertObj.param));break;case ACTION_SHOWANNOTATION:chart.showAnnotation&&chart.showAnnotation(alertObj.param);break}chart.fireChartInstanceEvent(\"AlertComplete\",{alertValue:val,alertMaxValue:alertObj.maxvalue,alertMinValue:alertObj.minvalue})}}else{if(alertAction===ACTION_SHOWANNOTATION&&alertObj.state===IN_ALERT_RANGE){chart.hideAnnotation&&chart.hideAnnotation(alertObj.param)}alertObj.state=OUT_OF_ALERT_RANGE}}};return AlertManager}(_componentInterface.ComponentInterface);var _default=AlertManager;exports.default=_default;"]},"metadata":{},"sourceType":"script"}