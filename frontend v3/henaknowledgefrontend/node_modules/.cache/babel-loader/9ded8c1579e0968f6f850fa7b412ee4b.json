{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _entities = _interopRequireDefault(require(\"../entities\"));\n\nvar _kdtree = _interopRequireDefault(require(\"@fusioncharts/charts/src/dataset/_internal/kdtree\"));\n\nvar _extAnnotation = _interopRequireDefault(require(\"@fusioncharts/features/src/annotation/ext-annotation\"));\n\nvar _dependencyManager = require(\"@fusioncharts/core/src/dependency-manager\");\n\nvar _mapEntities = _interopRequireDefault(require(\"../_internal/map-entities.animation\"));\n\nvar _lib = require(\"@fusioncharts/core/src/lib\");\n\nvar _eventApi = require(\"@fusioncharts/core/src/event-api\");\n\nvar _schedular = require(\"@fusioncharts/core/src/schedular\");\n\nvar UNDEF,\n    BLANK = \"\",\n    POSITION_TOP = \"top\",\n    POSITION_BOTTOM = \"bottom\",\n    POSITION_RIGHT = \"right\",\n    POSITION_LEFT = \"left\",\n    POSITION_MIDDLE = \"middle\",\n    POSITION_CENTER = \"center\",\n    LINE_STR = \"line\",\n    TEXT_STR = \"text\",\n    POLYGON_STR = \"polygon\",\n    ACR_STR = \"arc\",\n    CIRCLE_STR = \"circle\",\n    CENTER_STR = \"center\",\n    INNERRADIUSFACTOR = .6,\n    math = window.Math,\n    mathMin = math.min,\n    mathMax = math.max,\n    MARKER_ITEM_KEY = \"items\",\n    hoverFn = function hoverFn(marker) {\n  var dataset = this,\n      chart = dataset.getFromEnv(\"chart\"),\n      annotations = dataset.getChildren(\"mapAnnotations\")[0],\n      shape = marker.markerShape,\n      groupConfig = shape.groupConfig,\n      options = shape.data(\"unfilteredConfig\"),\n      eventArgs = options._markerEventArgs,\n      attrs,\n      markerConfig = marker.config;\n\n  if (options.hovereffect) {\n    if (shape.config.type === \"circle\") {\n      attrs = (0, _lib.extend2)({\n        fillcolor: options.hoverfillcolor,\n        fillalpha: options.hoverfillalpha,\n        fillangle: options.hoverfillangle,\n        fillratio: options.hoverfillratio,\n        gradientUnits: \"objectBoundingBox\",\n        radialGradient: 1\n      }, options._hoverattrs);\n    }\n\n    attrs = (0, _lib.extend2)({}, options._hoverattrs);\n    annotations.update(shape.getId(), attrs);\n  }\n\n  if (!eventArgs) {\n    eventArgs = options._markerEventArgs = {\n      x: +options.x,\n      y: +options.y,\n      scaledX: options.x * groupConfig.scaleX,\n      scaledY: options.y * groupConfig.scaleY,\n      chartX: options.x * groupConfig.scaleX + groupConfig.grpXShift,\n      chartY: options.y * groupConfig.scaleY + groupConfig.grpYShift,\n      id: options.id,\n      label: options.label\n    };\n  }\n\n  (0, _eventApi.raiseEventGroup)(markerConfig.options.id, \"markerRollOver\", eventArgs, chart.getFromEnv(\"chartInstance\"), markerConfig, UNDEF, UNDEF, UNDEF);\n},\n    hoverOutFn = function hoverOutFn(marker) {\n  var dataset = this,\n      chart = dataset.getFromEnv(\"chart\"),\n      annotations = dataset.getChildren(\"mapAnnotations\")[0],\n      shape = marker.markerShape,\n      wrapper = shape.getElement(),\n      markerConfig = marker.config,\n      options = shape.data(\"unfilteredConfig\"),\n      attrs;\n\n  if (wrapper && options.hovereffect) {\n    if (shape.config.type === \"circle\") {\n      attrs = (0, _lib.extend2)({\n        fillcolor: shape.config.rawColor,\n        fillalpha: shape.config.rawAlpha,\n        fillangle: shape.config.rawAngle,\n        fillratio: shape.config.rawRatio,\n        gradientUnits: \"objectBoundingBox\",\n        radialGradient: shape.config.rawFillPattern === \"radial\"\n      }, options._defaultattrs);\n    }\n\n    attrs = (0, _lib.extend2)({}, options._defaultattrs);\n    annotations.update(shape.getId(), attrs);\n  }\n\n  (0, _eventApi.raiseEventGroup)(markerConfig.id, \"markerRollOut\", options._markerEventArgs, chart.getFromEnv(\"chartInstance\"), UNDEF, UNDEF, UNDEF);\n},\n    clickFn = function clickFn(e, marker) {\n  var dataset = this,\n      markerOptions = marker.config.options,\n      chart = dataset.getFromEnv(\"chart\"),\n      shape = marker.markerShape,\n      options = shape.config,\n      groupConfig = shape.groupConfig,\n      linkClickFN = dataset.getFromEnv(\"linkClickFN\"),\n      link = shape.config.link,\n      eventArgs = options._markerEventArgs;\n  link && linkClickFN && linkClickFN.call({\n    link: link\n  }, true);\n\n  if (!eventArgs) {\n    eventArgs = options._markerEventArgs = {\n      x: +options.x,\n      y: +options.y,\n      scaledX: options.x * groupConfig.scaleX,\n      scaledY: options.y * groupConfig.scaleY,\n      chartX: options.x * groupConfig.scaleX + groupConfig.grpXShift,\n      chartY: options.y * groupConfig.scaleY + groupConfig.grpYShift,\n      id: markerOptions.id,\n      label: markerOptions.label\n    };\n  }\n\n  chart.fireChartInstanceEvent(\"markerClick\", eventArgs, e);\n},\n    convertToObj = function convertToObj(arr, idKey) {\n  var i = arr && arr.length || false,\n      key = idKey || \"id\",\n      returnObj = {},\n      item;\n\n  if (!arr) {\n    return arr;\n  }\n\n  while (i--) {\n    item = arr[i];\n    item[key] !== UNDEF && (returnObj[item[key].toLowerCase()] = item);\n  }\n\n  return returnObj;\n},\n    topLabelAlignmentFn = function topLabelAlignmentFn(x, y, radius) {\n  return {\n    x: x.toString(),\n    y: (y - radius).toString(),\n    align: POSITION_CENTER,\n    valign: POSITION_TOP\n  };\n},\n    leftLabelAlignmentFn = function leftLabelAlignmentFn(x, y, radius) {\n  return {\n    x: (x - radius).toString(),\n    y: y.toString(),\n    align: POSITION_RIGHT,\n    valign: POSITION_MIDDLE\n  };\n},\n    rightLabelAlignmentFn = function rightLabelAlignmentFn(x, y, radius) {\n  return {\n    x: (x + radius).toString(),\n    y: y.toString(),\n    align: POSITION_LEFT,\n    valign: POSITION_MIDDLE\n  };\n},\n    bottomLabelAlignmentFn = function bottomLabelAlignmentFn(x, y, radius) {\n  return {\n    x: x.toString(),\n    y: (y + radius).toString(),\n    align: POSITION_CENTER,\n    valign: POSITION_BOTTOM\n  };\n},\n    centerLabelAlignmentFn = function centerLabelAlignmentFn(x, y) {\n  return {\n    x: x.toString(),\n    y: y.toString(),\n    align: POSITION_CENTER,\n    valign: POSITION_MIDDLE\n  };\n},\n    rightWrapWidthFn = function rightWrapWidthFn() {\n  return arguments[1];\n},\n    leftWrapWidthFn = function leftWrapWidthFn(width, x) {\n  return width - x;\n},\n    centerWrapWidthFn = function centerWrapWidthFn(width, x) {\n  return mathMin(x, width - x) * 2;\n},\n    topWrapHeightFn = function topWrapHeightFn() {\n  return arguments[1];\n},\n    middleWrapHeightFn = function middleWrapHeightFn(height, y) {\n  return mathMin(y, height - y) * 2;\n},\n    bottomWrapHeightFn = function bottomWrapHeightFn(height, y) {\n  return height - y;\n};\n\n(0, _dependencyManager.addDep)({\n  name: \"mapsAnimation\",\n  type: \"animationRule\",\n  extension: _mapEntities.default\n});\n\nvar Markers = function (_Entities) {\n  (0, _inheritsLoose2.default)(Markers, _Entities);\n\n  function Markers() {\n    var _this;\n\n    _this = _Entities.call(this) || this;\n    _this.components = {};\n    _this.getLabelAlignment = {\n      top: topLabelAlignmentFn,\n      left: leftLabelAlignmentFn,\n      right: rightLabelAlignmentFn,\n      bottom: bottomLabelAlignmentFn,\n      center: centerLabelAlignmentFn\n    };\n    _this.getWrapWidth = {\n      right: rightWrapWidthFn,\n      left: leftWrapWidthFn,\n      center: centerWrapWidthFn\n    };\n    _this.getWrapHeight = {\n      top: topWrapHeightFn,\n      middle: middleWrapHeightFn,\n      bottom: bottomWrapHeightFn\n    };\n    _this.hoverFn = hoverFn;\n    _this.hoverOutFn = hoverOutFn;\n    _this.clickFn = clickFn;\n    return _this;\n  }\n\n  var _proto = Markers.prototype;\n\n  _proto.getName = function getName() {\n    return \"markers\";\n  };\n\n  _proto.getType = function getType() {\n    return \"dataset\";\n  };\n\n  _proto.configureAttributes = function configureAttributes(markerJSONData) {\n    if (!markerJSONData) {\n      return;\n    }\n\n    this.JSONData = markerJSONData;\n    var dataset = this,\n        annObj,\n        mapAnnotations = dataset.getChildren(\"mapAnnotations\") && dataset.getChildren(\"mapAnnotations\")[0],\n        chart = dataset.getFromEnv(\"chart\"),\n        markerOptions = chart.config.markerOpts;\n\n    if (!mapAnnotations) {\n      annObj = new _extAnnotation.default();\n      dataset.attachChild(annObj, \"mapAnnotations\");\n      mapAnnotations = dataset.getChildren(\"mapAnnotations\")[0];\n    }\n\n    mapAnnotations.destroy();\n    dataset.calculateDataLimits();\n\n    if (markerOptions.dataEnabled) {\n      this._parseMarkers();\n    } else {\n      this.defineMarkersNShapes();\n    }\n\n    this.configureConnectors();\n  };\n\n  _proto.calculateMarkerRadiusLimits = function calculateMarkerRadiusLimits() {\n    if (!this.JSONData) {\n      return;\n    }\n\n    var dataset = this,\n        JSONData = dataset.JSONData,\n        conf = dataset.config,\n        chart = dataset.getFromEnv(\"chart\"),\n        width = chart.config.width,\n        height = chart.config.height,\n        markerMaxRadius = JSONData.markermaxradius,\n        markerMinRadius = JSONData.markerminradius,\n        minMax = Markers.getMarkerRadiusLimits(width, height, markerMaxRadius, markerMinRadius);\n    conf.minRadius = minMax.min;\n    conf.maxRadius = minMax.max;\n  };\n\n  _proto.calculateDataLimits = function calculateDataLimits() {\n    var dataset = this,\n        chart = dataset.getFromEnv(\"chart\"),\n        conf = dataset.config,\n        jsonData = chart.jsonData,\n        markers = jsonData.markers || {},\n        markerData = markers[MARKER_ITEM_KEY] || [],\n        numberFormatter = this.getFromEnv(\"number-formatter\"),\n        min = +Infinity,\n        max = -Infinity,\n        markerObj,\n        cleanValue,\n        len,\n        value,\n        i;\n\n    for (i = 0, len = markerData.length; i < len; i++) {\n      markerObj = markerData[i];\n      value = markerObj.value;\n      cleanValue = numberFormatter.getCleanValue(value);\n\n      if (cleanValue !== null) {\n        min = mathMin(cleanValue, min);\n        max = mathMax(cleanValue, max);\n      }\n    }\n\n    conf.min = min;\n    conf.max = max;\n  };\n\n  _proto._parseMarkers = function _parseMarkers() {\n    var dataset = this,\n        chart = dataset.getFromEnv(\"chart\"),\n        jsonData = chart.jsonData,\n        markers = jsonData.markers,\n        markerData = markers[MARKER_ITEM_KEY],\n        shapeArr = markers.shapes,\n        markerOptions = chart.config.markerOpts,\n        markerStyle = markerOptions.dataLabels.style,\n        numberFormatter = this.getFromEnv(\"number-formatter\"),\n        shapeObjs = dataset.components.shapeObjs = {},\n        markerObjs = dataset.components.markerObjs = {},\n        value,\n        i,\n        markerObj,\n        item,\n        shapeId,\n        markerConfig,\n        options,\n        id;\n\n    if (!markerData || !markerData.length) {\n      return;\n    }\n\n    if (shapeArr && shapeArr.length) {\n      i = shapeArr.length;\n\n      for (; i; i -= 1) {\n        item = shapeArr[i - 1];\n\n        if (id = item.id.toLowerCase()) {\n          shapeObjs[id] = item;\n        }\n      }\n    }\n\n    i = markerData.length;\n\n    while (i--) {\n      item = markerData[i];\n\n      if (id = item.id && item.id.toLowerCase()) {\n        value = item.value;\n\n        if (value !== UNDEF && value !== \"\") {\n          value = parseFloat(value);\n        }\n\n        markerObj = Markers._initializeMarkerItem(id, item, null, chart);\n        shapeId = markerObj.config.options.shapeid;\n        shapeId && typeof shapeId === \"string\" && (shapeId = shapeId.toLowerCase());\n        markerConfig = markerObj.config;\n        options = markerConfig.options;\n        markerConfig.cleanValue = numberFormatter.getCleanValue(value);\n\n        if (markerConfig.cleanValue !== null) {\n          markerConfig.formattedValue = numberFormatter.dataLabels(value);\n        } else {\n          markerConfig.formattedValue = UNDEF;\n        }\n\n        markerConfig.fillColor = (0, _lib.pluck)(options.fillcolor, options.color, markerOptions.fillColor);\n        markerConfig.fillAlpha = (0, _lib.pluck)(options.fillalpha, options.alpha, markerOptions.fillAlpha);\n        markerConfig.fillRatio = (0, _lib.pluck)(options.fillratio, markerOptions.fillRatio);\n        markerConfig.fillAngle = (0, _lib.pluck)(options.fillangle, markerOptions.fillAngle);\n        markerConfig.borderThickness = (0, _lib.pluckNumber)(options.borderthickness, markerOptions.borderThickness);\n        markerConfig.borderColor = (0, _lib.pluck)(options.bordercolor, markerOptions.borderColor);\n        markerConfig.borderAlpha = (0, _lib.pluck)(options.borderalpha, markerOptions.borderAlpha);\n        markerConfig.labelPadding = options.labelpadding || markerOptions.labelPadding;\n        markerConfig.fontColor = (0, _lib.pluck)(options.labelcolor, markerStyle.fontColor);\n        markerConfig.labelBgColor = (0, _lib.pluck)(options.labelbgcolor, markerStyle.labelBgColor) || BLANK;\n        markerConfig.labelBorderColor = (0, _lib.pluck)(options.labelbordercolor, markerStyle.labelBorderColor) || BLANK;\n\n        if (item.__hideMarker) {\n          markerObj._isHidden = true;\n        }\n\n        if (shapeId) {\n          markerObj.shapeObj = shapeObjs[shapeId];\n        }\n\n        markerObjs[id] = markerObj;\n      }\n    }\n  };\n\n  _proto.defineMarkersNShapes = function defineMarkersNShapes() {\n    var dataset = this,\n        chart = dataset.getFromEnv(\"chart\"),\n        jsonData = chart.jsonData,\n        markers = jsonData.markers,\n        defineArr = markers.definition,\n        numberFormatter = this.getFromEnv(\"number-formatter\"),\n        markerOptions = chart.config.markerOpts,\n        markerStyle = markerOptions.dataLabels.style,\n        defineObject = convertToObj(defineArr) || {},\n        applyObject = convertToObj(markers.application) || {},\n        shapeArr = markers.shapes,\n        shapeObjs = dataset.components.shapeObjs = dataset.components.shapeObjs || (dataset.components.shapeObjs = {}),\n        markerObjs = dataset.components.markerObjs = dataset.components.markerObjs || (dataset.components.markerObjs = {}),\n        shapeObjHash = {},\n        markerObjHash = {},\n        options,\n        markerConfig,\n        value,\n        i,\n        markerObj,\n        item,\n        shapeId,\n        id;\n\n    if (!defineArr || !defineArr.length) {\n      return;\n    }\n\n    for (i in shapeObjs) {\n      shapeObjHash[i] = false;\n    }\n\n    for (i in markerObjs) {\n      markerObjHash[i] = false;\n    }\n\n    if (shapeArr && shapeArr.length) {\n      i = shapeArr.length;\n\n      for (; i; i -= 1) {\n        item = shapeArr[i - 1];\n\n        if (id = item.id.toLowerCase()) {\n          shapeObjs[id] = item;\n          shapeObjHash[id] = true;\n        }\n      }\n    }\n\n    for (id in defineObject) {\n      item = defineObject[id];\n      markerObj = markerObjs[id] = Markers._initializeMarkerItem(id, item, applyObject[id], chart);\n      markerObjHash[id] = true;\n      shapeId = markerObj.config.options.shapeid;\n      markerConfig = markerObj.config;\n      value = item.value;\n      markerConfig.cleanValue = numberFormatter.getCleanValue(value);\n      options = markerConfig.options;\n\n      if (markerConfig.cleanValue !== null) {\n        markerConfig.formattedValue = numberFormatter.dataLabels(value);\n      } else {\n        markerConfig.formattedValue = UNDEF;\n      }\n\n      markerConfig.fillColor = (0, _lib.pluck)(options.fillcolor, options.color, markerOptions.fillColor);\n      markerConfig.fontColor = (0, _lib.pluck)(options.labelcolor, markerStyle.fontColor);\n      markerConfig.fillAlpha = (0, _lib.pluck)(options.fillalpha, options.alpha, markerOptions.fillAlpha);\n      markerConfig.fillRatio = (0, _lib.pluck)(options.fillratio, markerOptions.fillRatio);\n      markerConfig.fillAngle = (0, _lib.pluck)(options.fillangle, markerOptions.fillAngle);\n      markerConfig.borderThickness = (0, _lib.pluckNumber)(options.borderthickness, markerOptions.borderThickness);\n      markerConfig.borderColor = (0, _lib.pluck)(options.bordercolor, markerOptions.borderColor);\n      markerConfig.borderAlpha = (0, _lib.pluck)(options.borderalpha, markerOptions.borderAlpha);\n      markerConfig.labelPadding = options.labelpadding || markerOptions.labelPadding;\n      markerConfig.options.tooltext = (0, _lib.pluck)(options.tooltext, markerOptions.tooltext);\n      markerConfig.link = options.link;\n\n      if (shapeId) {\n        markerObj.shapeObj = shapeObjs[shapeId.toLowerCase()];\n      }\n    }\n\n    for (i in shapeObjHash) {\n      if (!shapeObjHash[i]) {\n        delete shapeObjs[i];\n      }\n    }\n\n    for (i in markerObjs) {\n      if (!markerObjHash[i]) {\n        delete markerObjs[i];\n      }\n    }\n  };\n\n  Markers.getMarkerRadiusLimits = function getMarkerRadiusLimits(width, height, userMax, userMin) {\n    var dime = mathMin(width, height),\n        factor = .02,\n        times = 3.5,\n        minR = factor * dime,\n        maxR = factor * times * dime,\n        finalUserMin,\n        finalUserMax;\n    finalUserMin = parseFloat(userMin);\n    finalUserMax = parseFloat(userMax);\n\n    if (!isNaN(finalUserMin) && !isNaN(finalUserMax)) {\n      if (finalUserMin < finalUserMax) {\n        return {\n          min: finalUserMin,\n          max: finalUserMax\n        };\n      }\n\n      return {\n        min: finalUserMax,\n        max: finalUserMin\n      };\n    } else if (!isNaN(finalUserMin)) {\n      return {\n        min: finalUserMin,\n        max: 10 * finalUserMin\n      };\n    } else if (!isNaN(finalUserMax)) {\n      return {\n        min: parseInt(finalUserMax / 10, 10),\n        max: finalUserMax\n      };\n    }\n\n    return {\n      min: minR,\n      max: maxR\n    };\n  };\n\n  _proto.getDataLimits = function getDataLimits() {\n    var dataset = this,\n        conf = dataset.config;\n    return {\n      min: conf.min,\n      max: conf.max\n    };\n  };\n\n  Markers._initializeMarkerItem = function _initializeMarkerItem(id, markerDefinition, markerApplication) {\n    var markerObj = {},\n        config = markerObj.config,\n        opts;\n\n    if (!config) {\n      config = markerObj.config = {};\n    }\n\n    config.id = id;\n    config.definition = markerDefinition;\n    config.application = markerApplication;\n    config.hasValue = null;\n    config.value = null;\n    config.options = null;\n    config.label = null;\n    config.markerShape = null;\n    config.markerLabel = null;\n    config.drawOptions = {\n      shape: null,\n      label: null\n    };\n    config.drawComplete = false;\n    opts = markerObj.config.options = (0, _lib.extend2)({}, config.definition);\n\n    if (config.dataEnabled) {\n      if (!isNaN(opts.value) && opts.value !== \"\") {\n        markerObj.value = parseFloat(opts.value);\n        markerObj.hasValue = true;\n      }\n    } else if (config.applyAll) {\n      config.options = (0, _lib.extend2)(opts, config.application);\n    } else if (markerApplication) {\n      config.options = (0, _lib.extend2)(opts, config.application);\n    }\n\n    return markerObj;\n  };\n\n  _proto.configureConnectors = function configureConnectors() {\n    var dataset = this,\n        chart = dataset.getFromEnv(\"chart\"),\n        annotations = dataset.getChildren(\"mapAnnotations\")[0],\n        jsonData = chart.jsonData,\n        datasetComponents = dataset.components,\n        markers = jsonData.markers || {},\n        connectors = markers.connector || markers.connectors || [],\n        markerObjs = datasetComponents.markerObjs,\n        length = connectors.length,\n        connectorComponents = dataset.components.connectors,\n        getMouseOverFn = function getMouseOverFn(eventArgs) {\n      return function (e) {\n        var shape = this,\n            unfilteredConfig = shape.data(\"unfilteredConfig\");\n\n        if (unfilteredConfig.hoverEffect) {\n          annotations.update(shape.getId(), unfilteredConfig._hoverAttrs);\n        }\n\n        chart.fireChartInstanceEvent(\"connectorrollover\", eventArgs, e);\n      };\n    },\n        getMouseOutFn = function getMouseOutFn(eventArgs) {\n      return function (e) {\n        var shape = this,\n            unfilteredConfig = shape.data(\"unfilteredConfig\");\n\n        if (unfilteredConfig.hoverEffect) {\n          annotations.update(shape.getId(), unfilteredConfig._defaultAttrs);\n        }\n\n        chart.fireChartInstanceEvent(\"connectorrollout\", eventArgs, e);\n      };\n    },\n        getClickFn = function getClickFn(eventArgs) {\n      return function (e) {\n        chart.fireChartInstanceEvent(\"connectorClick\", eventArgs, e);\n      };\n    },\n        chartConnOptions = chart.config.connectorOpts,\n        connectorItem = {},\n        config,\n        options,\n        fromMarker,\n        toMarker,\n        label,\n        toolText,\n        thickness,\n        color,\n        alpha,\n        hovercolor,\n        hoveralpha,\n        hoverthickness,\n        connLabelConfig,\n        obj,\n        i;\n\n    connectorComponents = dataset.components.connectors = [];\n\n    for (i = 0; i < length; i++) {\n      obj = connectors[i];\n\n      if (!obj.from && !obj.to) {\n        continue;\n      }\n\n      fromMarker = markerObjs[obj.from.toLowerCase()];\n      toMarker = markerObjs[obj.to.toLowerCase()];\n\n      if (!fromMarker || !toMarker) {\n        continue;\n      }\n\n      label = connectors[i].label;\n      connectorItem = connectorComponents[i];\n      !connectorItem && (connectorItem = connectorComponents[i] = {});\n      !connectorItem.config && (config = connectorItem.config = {});\n      !connectorItem.graphics && (connectorItem.graphics = {});\n      config = connectorItem.config = (0, _lib.extend2)({}, obj);\n      config.fromMarker = fromMarker;\n      config.toMarker = toMarker;\n      config.link = obj.link;\n      config.showTooltip = (0, _lib.pluckNumber)(obj.showtooltip, chartConnOptions.showTooltip);\n      toolText = config.tooltext = config.showTooltip ? (0, _lib.pluck)(obj.tooltext, chartConnOptions.tooltext) : BLANK;\n      thickness = config.thickness = (0, _lib.pluck)(obj.thickness, chartConnOptions.thickness);\n      color = config.color = (0, _lib.pluck)(obj.color, chartConnOptions.color);\n      alpha = config.alpha = (0, _lib.pluck)(obj.alpha, chartConnOptions.alpha);\n      config.hoverEffect = (0, _lib.pluckNumber)(obj.showhovereffect, chartConnOptions.showHoverEffect);\n      hovercolor = (0, _lib.pluck)(obj.hovercolor, chartConnOptions.hoverColor, color);\n      hoveralpha = (0, _lib.pluck)(obj.hoveralpha, chartConnOptions.hoverAlpha, alpha);\n      hoverthickness = (0, _lib.pluck)(obj.hoverthickness, chartConnOptions.hoverThickness, thickness);\n      config.dashed = (0, _lib.pluck)(obj.dashed, chartConnOptions.dashed);\n      config.dashLen = (0, _lib.pluckNumber)(obj.dashlen, chartConnOptions.dashlen);\n      config.dashGap = (0, _lib.pluckNumber)(obj.dashgap, chartConnOptions.dashgap);\n\n      if (toolText) {\n        config.tooltext = toolText = (0, _lib.parseUnsafeString)((0, _lib.parseTooltext)(toolText, [3, 40, 41, 42, 43], {\n          label: label,\n          fromId: fromMarker.config.definition.id,\n          toId: toMarker.config.definition.id,\n          fromLabel: fromMarker.config.definition.label,\n          toLabel: toMarker.config.definition.label\n        }, options), false);\n      }\n\n      config.eventArgs = {\n        fromMarkerId: fromMarker.config.id,\n        toMarkerId: toMarker.config.id,\n        label: label\n      };\n      config._hoverAttrs = {\n        color: hovercolor,\n        alpha: hoveralpha,\n        thickness: hoverthickness\n      };\n      config._defaultAttrs = {\n        color: color,\n        alpha: alpha,\n        thickness: thickness\n      };\n      config.type = LINE_STR;\n      config.onclick = getClickFn(config.eventArgs);\n      config.onmouseover = getMouseOverFn(config.eventArgs);\n      config.onmouseout = getMouseOutFn(config.eventArgs);\n\n      if (label) {\n        connLabelConfig = connectorItem.labelConfig;\n        !connLabelConfig && (connLabelConfig = connectorItem.labelConfig = {});\n        connLabelConfig.type = TEXT_STR;\n        connLabelConfig.text = label;\n        connLabelConfig.align = POSITION_CENTER;\n        connLabelConfig.valign = POSITION_MIDDLE;\n        connLabelConfig.font = chartConnOptions.font;\n        connLabelConfig.fillcolor = (0, _lib.pluck)(obj.labelcolor, chartConnOptions.fontColor);\n        connLabelConfig.bgcolor = (0, _lib.pluck)(obj.labelbgcolor, chartConnOptions.labelBgColor);\n        connLabelConfig.bordercolor = (0, _lib.pluck)(obj.labelbordercolor, chartConnOptions.labelBorderColor);\n        connLabelConfig.tooltext = config.tooltext;\n      }\n    }\n  };\n\n  _proto.draw = function draw() {\n    var dataset = this,\n        chart = dataset.getFromEnv(\"chart\"),\n        conf = dataset.config,\n        annotations = dataset.getChildren(\"mapAnnotations\")[0],\n        markers = dataset.components.markerObjs,\n        chartConf = chart.config,\n        chartMarkerOpts = chartConf.markerOpts,\n        scalingParams = chartConf.scalingParams,\n        annConfig = chart.config.annotationConfig,\n        markerItems = [],\n        markerLabels = [],\n        appliedMarkers = {},\n        appliedObj,\n        markerItem,\n        rawConfig,\n        config,\n        id,\n        i,\n        markerLabelGroup,\n        markerGroup,\n        validShape = {};\n    annotations.destroy();\n    dataset.createContainer();\n\n    dataset._drawConnectors();\n\n    dataset.imageLoadCount = 0;\n    dataset.imageCount = 0;\n    conf.autoScale = chartMarkerOpts.autoScale ? scalingParams.sFactor : 1;\n\n    for (id in markers) {\n      appliedObj = null;\n      markerItem = markers[id];\n      config = markerItem.config;\n\n      if (!config.conIsHidden) {\n        appliedObj = this._drawMarkerItem(markerItem);\n      }\n\n      if (!appliedObj) {\n        continue;\n      }\n\n      validShape[id] = appliedObj;\n      config._annotationIndex = markerItems.length;\n      appliedMarkers[id] = markerItem;\n\n      if (appliedObj.markerShape) {\n        rawConfig = Object.assign({\n          align: \"center\",\n          valign: \"middle\",\n          animationLabel: \"markerItem\",\n          autoscale: appliedObj.markerShape.type === \"image\" ? 0 : 1\n        }, appliedObj.markerShape);\n        markerItems.push(rawConfig);\n      }\n\n      if (appliedObj.markerLabel) {\n        rawConfig = Object.assign({\n          animationLabel: \"markerItem\",\n          id: appliedObj.markerShape.id\n        }, appliedObj.markerLabel);\n        markerLabels.push(rawConfig);\n      }\n    }\n\n    markerGroup = annotations.addGroup(Object.assign(annConfig, {\n      id: \"markers\",\n      fillalpha: \"100\",\n      items: markerItems,\n      scaleimages: 1\n    }), dataset);\n    markerLabelGroup = annotations.addGroup(Object.assign(annConfig, {\n      id: \"markerLabels\",\n      items: markerLabels,\n      scaleimages: 1\n    }), dataset);\n    dataset.components.markerGroup = markerGroup;\n    dataset.components.markerLabelGroup = markerLabelGroup;\n    i = 0;\n\n    for (id in markers) {\n      if (!validShape[id]) {\n        continue;\n      }\n\n      markerItem = markers[id];\n      markerItem.markerShape = markerGroup.retrieveItem(markerItems[i].id);\n      markerItem.markerShape.data(\"unfilteredConfig\", markerItems[i]);\n\n      if (validShape[id].markerLabel) {\n        markerItem.markerLabel = markerLabelGroup.retrieveItem(markerItems[i].id);\n        markerItem.markerLabel.data(\"unfilteredConfig\", markerLabels[i]);\n      }\n\n      i++;\n    }\n\n    dataset.addJob(\"buildKdtree\", dataset._buildKdTree.bind(dataset), _schedular.priorityList.kdTree);\n  };\n\n  _proto._buildKdTree = function _buildKdTree() {\n    var dataset = this,\n        kdArrayMap = dataset.components.kdArrayMap,\n        markerGroup = dataset.components.markerGroup,\n        kdPointsArr = [],\n        id,\n        i,\n        items = markerGroup && markerGroup.items,\n        len = items && items.length || 0;\n\n    for (i = 0; i < len; i++) {\n      id = items[i].config.id;\n      kdArrayMap[id] && kdPointsArr.push(kdArrayMap[id]);\n    }\n\n    if (!dataset.components.kDTree) {\n      dataset.components.kDTree = new _kdtree.default(true);\n    }\n\n    dataset.components.kDTree._setSearchLimit(Infinity, Infinity);\n\n    dataset.components.kDTree.buildKdTree(kdPointsArr);\n  };\n\n  _proto._drawMarkerItem = function _drawMarkerItem(marker) {\n    var dataset = this,\n        chart = dataset.getFromEnv(\"chart\"),\n        conf = chart.config,\n        datasetConfig = dataset.config,\n        scalingParams = conf.scalingParams,\n        markerConfig = marker.config,\n        options = markerConfig.options,\n        definition = markerConfig.definition,\n        chartMarkerOpts = conf.markerOpts,\n        markerStyle = chartMarkerOpts.dataLabels.style,\n        shapeId = options.shapeid,\n        itemScale = options.scale || 1,\n        label = options.label || BLANK,\n        scaleFactor = chart.config.scalingParams.scaleFactor * chart.config.baseScaleFactor,\n        labelPos = (options.labelpos || POSITION_TOP).toLowerCase(),\n        value = markerConfig.formattedValue === UNDEF ? UNDEF : markerConfig.formattedValue,\n        tooltext = options.tooltext || chartMarkerOpts.tooltext,\n        radius = (0, _lib.pluckNumber)(definition.radius, markerConfig.radius, chartMarkerOpts.radius) * itemScale * datasetConfig.autoScale || 1e-4,\n        fillColor = markerConfig.fillColor,\n        fillAlpha = markerConfig.fillAlpha,\n        fillRatio = markerConfig.fillRatio,\n        fillAngle = markerConfig.fillAngle,\n        borderThickness = markerConfig.borderThickness,\n        borderColor = markerConfig.borderColor,\n        borderAlpha = markerConfig.borderAlpha,\n        annotations = dataset.getChildren(\"mapAnnotations\")[0],\n        labelObj,\n        align,\n        valign,\n        baseWidth,\n        baseHeight,\n        xOffset,\n        yOffset,\n        wrapWidth,\n        wrapHeight,\n        labelPadding,\n        shapeObj,\n        temp,\n        calcX,\n        calcY,\n        kdPoint,\n        innerradius,\n        sides,\n        type,\n        kdArrayMap = dataset.components.kdArrayMap || (dataset.components.kdArrayMap = {}),\n        markerId = marker.config.id;\n    markerConfig.autoScale = chartMarkerOpts.autoScale ? scaleFactor : 1;\n\n    if (!shapeId) {\n      return;\n    }\n\n    if (tooltext) {\n      tooltext = (0, _lib.parseUnsafeString)((0, _lib.parseTooltext)(tooltext, [1, 2, 3], {\n        formattedValue: value,\n        label: label\n      }, options), false);\n    } else {\n      tooltext = value ? label + chartMarkerOpts.tooltipSepChar + value : label;\n    }\n\n    if (value !== UNDEF && value !== null) {\n      label = label + chartMarkerOpts.labelSepChar + value;\n    } else {\n      if (!isNaN(itemScale)) {\n        if (itemScale < 0) {\n          itemScale = 0;\n        } else if (itemScale > 5) {\n          itemScale = 5;\n        }\n      } else {\n        itemScale = 1;\n      }\n    }\n\n    (0, _lib.extend2)(options, {\n      x: options.x && options.x.toString(),\n      y: options.y && options.y.toString(),\n      fillcolor: fillColor,\n      fillalpha: fillAlpha,\n      fillratio: fillRatio,\n      fillangle: fillAngle,\n      borderthickness: borderThickness,\n      bordercolor: borderColor,\n      borderalpha: borderAlpha,\n      hovereffect: (0, _lib.pluck)(chartMarkerOpts.showHoverEffect),\n      radius: radius && radius.toString(),\n      link: options.link,\n      showshadow: (0, _lib.pluckNumber)(options.showshadow, markerConfig.shadow),\n      _markerLabel: label,\n      _markerId: options.id,\n      id: (options.id + BLANK).toLowerCase()\n    });\n    delete options.tooltext;\n    markerConfig.tooltext = chartMarkerOpts.showTooltip ? tooltext : false;\n    calcX = Number(options.x) * scalingParams.sFactor + scalingParams.translateX;\n    calcY = Number(options.y) * scalingParams.sFactor + scalingParams.translateY;\n    radius = options.radius;\n\n    if (shapeId === \"triangle\") {\n      (0, _lib.extend2)(options, {\n        type: \"polygon\",\n        sides: 3,\n        startangle: chartMarkerOpts.startAngle\n      });\n      type = POLYGON_STR;\n      sides = 3;\n    } else if (shapeId === \"diamond\") {\n      (0, _lib.extend2)(options, {\n        type: \"polygon\",\n        sides: 4,\n        startangle: chartMarkerOpts.startAngle\n      });\n      type = POLYGON_STR;\n      sides = 4;\n    } else if (shapeId === \"arc\") {\n      innerradius = radius * INNERRADIUSFACTOR;\n      (0, _lib.extend2)(options, {\n        type: \"arc\",\n        startangle: 0,\n        endangle: 360,\n        innerradius: innerradius\n      });\n      type = ACR_STR;\n    } else if (shapeId === \"circle\") {\n      options.type = CIRCLE_STR;\n      type = CIRCLE_STR;\n    } else {\n      shapeObj = dataset.getShapeArgs.call(marker);\n\n      if (!chartMarkerOpts.dataEnabled || !chartMarkerOpts.valueToRadius || options.radius === UNDEF) {\n        !shapeObj.radius && (shapeObj.radius = chartMarkerOpts.radius);\n        shapeObj.radius *= itemScale * markerConfig.autoScale;\n      } else {\n        delete shapeObj.radius;\n      }\n\n      (0, _lib.extend2)(options, shapeObj);\n      options.id = options._markerId && options._markerId.toLowerCase();\n      innerradius = shapeObj.innerradius;\n      shapeObj.radius && (radius = shapeObj.radius);\n      type = shapeObj.type && shapeObj.type.toLowerCase();\n      sides = shapeObj.sides;\n      radius = Number(radius);\n\n      if (radius && innerradius && radius < innerradius) {\n        temp = radius;\n        options.radius = radius = innerradius;\n        options.innerradius = innerradius = temp;\n      }\n    }\n\n    options.type = options.type && options.type.toLowerCase();\n    (0, _lib.extend2)(options, {\n      hoverfillcolor: (0, _lib.pluck)(options.fillhovercolor, chartMarkerOpts.hoverFillColor, options.fillcolor),\n      hoverfillalpha: (0, _lib.pluck)(options.fillhoveralpha, chartMarkerOpts.hoverFillAlpha, options.fillalpha),\n      hoverfillratio: (0, _lib.pluck)(options.fillhoverratio, chartMarkerOpts.hoverFillRatio, options.fillratio),\n      hoverfillangle: (0, _lib.pluck)(options.fillhoverangle, chartMarkerOpts.hoverFillAngle, options.fillangle),\n      hoverborderthickness: (0, _lib.pluckNumber)(options.borderhoverthickness, chartMarkerOpts.hoverBorderThickness, options.borderthickness),\n      hoverbordercolor: (0, _lib.pluck)(options.borderhovercolor, chartMarkerOpts.hoverBorderColor, options.bordercolor),\n      hoverborderalpha: (0, _lib.pluck)(options.borderhoveralpha, chartMarkerOpts.hoverBorderAlpha, options.borderalpha)\n    });\n    options._hoverattrs = {\n      fillalpha: options.hoverfillalpha,\n      fillcolor: options.hoverfillcolor,\n      fillangle: options.hoverfillangle,\n      fillratio: options.hoverfillratio,\n      borderThickness: options.showborder !== \"0\" ? options.hoverborderthickness : 0,\n      borderColor: options.hoverbordercolor,\n      borderAlpha: options.hoverborderalpha\n    };\n    options._defaultattrs = {\n      fillalpha: options.fillalpha,\n      fillcolor: options.fillcolor,\n      fillangle: options.fillangle,\n      fillratio: options.fillratio,\n      borderThickness: options.showborder !== \"0\" ? options.borderthickness : 0,\n      borderColor: options.bordercolor,\n      borderAlpha: options.borderalpha\n    };\n\n    if (options.type === \"image\") {\n      options.borderthickness = options.borderthickness || 0;\n\n      options.onload = function (imageattr) {\n        var shape = this,\n            width = imageattr.width,\n            height = imageattr.height;\n        kdPoint = {};\n        options = shape.config;\n        calcX = (Number(options.derivedX) - width / (2 * scalingParams.sFactor)) * scalingParams.sFactor;\n        calcY = (Number(options.derivedY) - height / (2 * scalingParams.sFactor)) * scalingParams.sFactor;\n        kdPoint = kdArrayMap[markerId] || (kdArrayMap[markerId] = {});\n        kdPoint.x = calcX + scalingParams.translateX;\n        kdPoint.y = calcY + scalingParams.translateY;\n        kdPoint.element = marker;\n        kdPoint.shapeInfo = {\n          type: \"rect\",\n          width: width,\n          height: height\n        };\n\n        if (width && height) {\n          annotations.update(shape.getId(), {\n            x: calcX,\n            y: calcY,\n            width: width,\n            height: height,\n            autoscale: 0\n          });\n        }\n\n        dataset.imageLoadCount++;\n\n        if (dataset.imageLoadCount === dataset.imageCount) {\n          dataset._buildKdTree();\n        }\n      };\n\n      options.onerror = function () {\n        dataset.imageLoadCount++;\n\n        if (dataset.imageLoadCount === dataset.imageCount) {\n          dataset._buildKdTree();\n        }\n      };\n\n      dataset.imageCount++;\n    } else {\n      kdPoint = kdArrayMap[markerId] || (kdArrayMap[markerId] = {});\n      kdPoint.x = calcX;\n      kdPoint.y = calcY;\n      kdPoint.element = marker;\n      kdPoint.shapeInfo = {\n        type: type,\n        sides: sides,\n        radius: Number(radius) + options.borderthickness / 2,\n        innerradius: innerradius\n      };\n    }\n\n    markerConfig.drawOptions.shape = options;\n\n    if (!chartMarkerOpts.showLabels) {\n      return {\n        markerShape: options\n      };\n    }\n\n    labelPadding = options.labelpadding || chartMarkerOpts.labelPadding;\n    labelObj = dataset._getLabelOptions(labelPos, labelPadding, options);\n    align = labelObj.align;\n    valign = labelObj.valign;\n    baseWidth = markerConfig._labelBaseWidth;\n    baseHeight = markerConfig._labelBaseHeight;\n    xOffset = markerConfig._labelXOffset;\n    yOffset = markerConfig._labelYOffset;\n    wrapWidth = chartMarkerOpts.labelWrapWidth ? chartMarkerOpts.labelWrapWidth : dataset.getWrapWidth[align](baseWidth, Number(labelObj.x) + xOffset);\n    wrapHeight = chartMarkerOpts.labelWrapHeight ? chartMarkerOpts.labelWrapHeight : dataset.getWrapHeight[valign](baseHeight, Number(labelObj.y) + yOffset);\n\n    if (wrapWidth > labelPadding) {\n      wrapWidth -= labelPadding;\n    }\n\n    if (wrapHeight > labelPadding) {\n      wrapHeight -= labelPadding;\n    }\n\n    markerConfig.drawOptions.label = (0, _lib.extend2)({\n      type: \"text\"\n    }, {\n      text: label,\n      tooltext: options.tooltext,\n      x: labelObj.x,\n      y: labelObj.y,\n      align: align,\n      valign: labelObj.valign,\n      wrap: 1,\n      wrapwidth: wrapWidth,\n      wrapheight: wrapHeight,\n      fontsize: markerStyle.fontSize / scalingParams.sFactor,\n      font: markerStyle.fontFamily,\n      color: markerConfig.fontColor,\n      bgcolor: markerConfig.labelBgColor || BLANK,\n      bordercolor: markerConfig.labelBorderColor || BLANK\n    });\n    return {\n      markerShape: options,\n      markerLabel: markerConfig.drawOptions.label\n    };\n  };\n\n  _proto.highlightPoint = function highlightPoint(kdPoint, e) {\n    var marker = kdPoint.element,\n        dataset = this,\n        originalEvent = e.originalEvent,\n        chart = dataset.getFromEnv(\"chart\"),\n        toolTipController = dataset.getFromEnv(\"toolTipController\"),\n        currentToolTip = dataset.config.currentToolTip,\n        lastHoveredPoint = chart.config.lastHoveredPoint;\n\n    if (lastHoveredPoint && lastHoveredPoint !== kdPoint) {\n      lastHoveredPoint && dataset.hoverOutFn(lastHoveredPoint.element);\n      chart.config.lastHoveredPoint = null;\n      toolTipController.hide(currentToolTip);\n    }\n\n    if (kdPoint === false) {\n      return;\n    }\n\n    if (e.type === \"click\" || e.type === \"touchstart\") {\n      if (chart.config.lastHoveredPoint !== kdPoint) {\n        dataset.hoverFn(marker);\n      }\n\n      dataset.clickFn(e, marker);\n    } else if (e.type === \"mousemove\") {\n      if (chart.config.lastHoveredPoint !== kdPoint) {\n        dataset.hoverFn(marker);\n      }\n    }\n\n    if (marker.config.tooltext) {\n      if (currentToolTip) {\n        toolTipController.draw(originalEvent, marker.config.tooltext, currentToolTip);\n      } else {\n        currentToolTip = dataset.config.currentToolTip = toolTipController.draw(originalEvent, marker.config.tooltext);\n      }\n    }\n\n    chart.config.lastHoveredPoint = kdPoint;\n  };\n\n  _proto._drawConnectors = function _drawConnectors() {\n    var dataset = this,\n        chart = dataset.getFromEnv(\"chart\"),\n        annConfig = chart.config.annotationConfig,\n        datasetComponents = dataset.components,\n        connectors = datasetComponents.connectors || (dataset.components.connectors = []),\n        connector,\n        connectorLabel,\n        length = connectors.length,\n        scalingParams = chart.config.scalingParams,\n        chartConnOptions = chart.config.connectorOpts,\n        showConnectorLabels = chartConnOptions.showLabels,\n        annotations = dataset.getChildren(\"mapAnnotations\")[0],\n        i,\n        j,\n        connectorOptions = [],\n        connectorLabelItems = [],\n        x,\n        y,\n        toX,\n        toY,\n        fromMarkerConfig,\n        toMarkerConfig,\n        connectorGroup,\n        connectorLabelGroup,\n        rawConfig,\n        groups = [],\n        validConnector = {};\n    groups.push({\n      id: \"connectorLabels\",\n      fillalpha: \"100\",\n      items: connectorLabelItems\n    });\n    groups.push({\n      id: \"connectors\",\n      fillalpha: \"100\",\n      items: connectorOptions\n    });\n\n    for (i = 0; i < length; i++) {\n      if (!connectors[i]) {\n        continue;\n      }\n\n      validConnector[i] = true;\n      fromMarkerConfig = connectors[i].config.fromMarker.config;\n      toMarkerConfig = connectors[i].config.toMarker.config;\n      x = fromMarkerConfig.options.x;\n      y = fromMarkerConfig.options.y;\n      toX = toMarkerConfig.options.x;\n      toY = toMarkerConfig.options.y;\n      connectors[i].config.x = x;\n      connectors[i].config.y = y;\n      connectors[i].config.tox = toX;\n      connectors[i].config.toy = toY;\n      rawConfig = Object.assign({\n        animationLabel: \"markerItem\"\n      }, connectors[i].config);\n      connectorOptions.push(rawConfig);\n\n      if (connectors[i].labelConfig && showConnectorLabels) {\n        connectors[i].labelConfig.x = ((Number(x) + Number(toX)) / 2).toString();\n        connectors[i].labelConfig.y = ((Number(y) + Number(toY)) / 2).toString();\n        connectors[i].labelConfig.fontsize = chartConnOptions.fontSize / (scalingParams.scaleFactor * chart.config.baseScaleFactor);\n        rawConfig = Object.assign({\n          animationLabel: \"markerItem\"\n        }, connectors[i].labelConfig);\n        connectorLabelItems.push(rawConfig);\n      }\n    }\n\n    connectorGroup = annotations.addGroup(Object.assign(annConfig, groups[1]), dataset);\n    connectorLabelGroup = annotations.addGroup(Object.assign(annConfig, groups[0]), dataset);\n\n    for (i = 0, j = 0; i < length; i++) {\n      if (!validConnector[i]) {\n        continue;\n      }\n\n      connector = connectorGroup.items[j];\n\n      if (connector) {\n        connector.data(\"unfilteredConfig\", connectorOptions[j]);\n        connector.addEventListener(\"fc-mouseover\", connectors[i].config.onmouseover);\n        connector.addEventListener(\"fc-mouseout\", connectors[i].config.onmouseout);\n        connector.addEventListener(\"fc-click\", connectors[i].config.onclick);\n      }\n\n      if (connectors[i].labelConfig && showConnectorLabels) {\n        connectorLabel = connectorLabelGroup.items[j];\n        connectorLabel && connectorLabel.data(\"unfilteredConfig\");\n      }\n\n      j++;\n    }\n  };\n\n  _proto.getShapeArgs = function getShapeArgs() {\n    var mark = this,\n        config = mark.config,\n        shapeObj = (0, _lib.extend2)({}, mark.shapeObj),\n        radius;\n    config.autoScale = 1;\n\n    if (shapeObj) {\n      if (shapeObj.type === \"polygon\") {\n        if (shapeObj.sides < 3) {\n          shapeObj.type = CIRCLE_STR;\n        } else {\n          shapeObj.startangle = config.startAngle;\n        }\n      } else if (shapeObj.type === \"arc\") {\n        radius = (shapeObj.radius || config.markerRadius) * config.autoScale;\n        shapeObj.radius = radius;\n        shapeObj.innerradius = shapeObj.innerradius && shapeObj.innerradius * config.autoScale || radius * INNERRADIUSFACTOR;\n      }\n\n      return shapeObj;\n    }\n\n    return null;\n  };\n\n  _proto._getLabelOptions = function _getLabelOptions(labelPos, labelPadding, options, width, height) {\n    var dataset = this,\n        radius,\n        x,\n        y,\n        alignment = labelPos && labelPos.toLowerCase();\n\n    if (!dataset.getLabelAlignment[alignment]) {\n      alignment = CENTER_STR;\n    }\n\n    x = Number(options.x);\n    y = Number(options.y);\n\n    if (width === UNDEF || height === UNDEF) {\n      radius = options.radius || 0;\n    } else {\n      radius = /^(top|bottom)$/gi.test(alignment) && height * .5 || /^(left|right)$/gi.test(alignment) && width * .5 || 0;\n    }\n\n    radius = Number(radius) + Number(labelPadding);\n    return dataset.getLabelAlignment[alignment](x, y, radius);\n  };\n\n  _proto.addMarkerItem = function addMarkerItem(options) {\n    var markers = this,\n        chart = markers.getFromEnv(\"chart\"),\n        item = options,\n        markerObj,\n        items = markers.components.markerObjs,\n        shapeObjs = markers.components.shapeObjs,\n        markerGroup = markers.components.markerGroup,\n        markerLabelGroup = markers.components.markerLabelGroup,\n        markerConfigOptions,\n        annotations = markers.getChildren(\"mapAnnotations\")[0],\n        numberFormatter = markers.getFromEnv(\"number-formatter\"),\n        markerOptions = chart.config.markerOpts,\n        drawOptions,\n        markerConfig,\n        rawConfig,\n        value,\n        shapeId,\n        id;\n\n    if (id = item.id.toLowerCase()) {\n      if (items[id]) {\n        return;\n      }\n\n      delete item.value;\n      markers.imageLoadCount = 0;\n      markerObj = Markers._initializeMarkerItem(id, item, null);\n      markerObj.dataset = markers;\n      shapeId = markerObj.config.options.shapeid;\n      markerConfig = markerObj.config;\n      value = item.value;\n      markerConfig.cleanValue = numberFormatter.getCleanValue(value);\n      markerConfigOptions = markerConfig.options;\n\n      if (markerConfig.cleanValue !== null) {\n        markerConfig.formattedValue = numberFormatter.dataLabels(value);\n      } else {\n        markerConfig.formattedValue = UNDEF;\n      }\n\n      markerConfig.fillColor = (0, _lib.pluck)(markerConfigOptions.fillcolor, markerConfigOptions.color, markerOptions.fillColor);\n      markerConfig.fillAlpha = (0, _lib.pluck)(markerConfigOptions.fillalpha, markerConfigOptions.alpha, markerOptions.fillAlpha);\n      markerConfig.fillRatio = (0, _lib.pluck)(markerConfigOptions.fillratio, markerOptions.fillRatio);\n      markerConfig.fillAngle = (0, _lib.pluck)(markerConfigOptions.fillangle, markerOptions.fillAngle);\n      markerConfig.borderThickness = (0, _lib.pluckNumber)(markerConfigOptions.borderthickness, markerOptions.borderThickness);\n      markerConfig.borderColor = (0, _lib.pluck)(markerConfigOptions.bordercolor, markerOptions.borderColor);\n      markerConfig.borderAlpha = (0, _lib.pluck)(markerConfigOptions.borderalpha, markerOptions.borderAlpha);\n      markerConfig.labelPadding = markerConfigOptions.labelpadding || markerOptions.labelPadding;\n      markerConfig.options.tooltext = (0, _lib.pluck)(markerConfigOptions.tooltext, markerOptions.tooltext);\n      markerConfig.link = markerConfigOptions.link;\n\n      if (shapeId) {\n        markerObj.shapeObj = shapeObjs[shapeId && shapeId.toLowerCase()];\n      }\n\n      items[id] = markerObj;\n      drawOptions = markers._drawMarkerItem(markerObj);\n\n      if (markerGroup && markerLabelGroup) {\n        if (drawOptions.markerShape) {\n          rawConfig = Object.assign({\n            align: \"center\",\n            valign: \"middle\",\n            animationLabel: \"markerItem\",\n            autoscale: drawOptions.markerShape.type === \"image\" ? 0 : 1\n          }, drawOptions.markerShape);\n          markerObj.markerShape = annotations.addItem(markerGroup.getId(), rawConfig, markers);\n          markerObj.markerShape.data(\"unfilteredConfig\", rawConfig);\n        }\n\n        if (drawOptions.markerLabel) {\n          rawConfig = Object.assign({\n            animationLabel: \"markerItem\"\n          }, drawOptions.markerLabel);\n          markerObj.markerLabel = annotations.addItem(markerLabelGroup.getId(), rawConfig, markers);\n          markerObj.markerLabel.data(\"unfilteredConfig\", rawConfig);\n        }\n      }\n\n      markers._buildKdTree();\n    }\n  };\n\n  _proto.updateMarkerItem = function updateMarkerItem(id, options) {\n    var markers = this,\n        chart = markers.getFromEnv(\"chart\"),\n        annotations = markers.getChildren(\"mapAnnotations\")[0],\n        markerObjs = markers.components.markerObjs,\n        markerOptions = chart.config.markerOpts,\n        origOptions,\n        key,\n        markerConfig,\n        optConfig = {},\n        marker = markerObjs[id],\n        annotOptions;\n\n    if (marker) {\n      origOptions = marker.config.options;\n      (0, _lib.extend2)(origOptions, options);\n      markers.imageLoadCount = 0;\n      markerConfig = marker.config;\n\n      for (key in options) {\n        optConfig[key.toLowerCase()] = options[key] && options[key].toString();\n      }\n\n      markerConfig.fillColor = (0, _lib.pluck)(optConfig.fillcolor, optConfig.color, markerOptions.fillColor);\n      markerConfig.fillAlpha = (0, _lib.pluck)(optConfig.fillalpha, optConfig.alpha, markerOptions.fillAlpha);\n      markerConfig.fillRatio = (0, _lib.pluck)(optConfig.fillratio, markerOptions.fillRatio);\n      markerConfig.fillAngle = (0, _lib.pluck)(optConfig.fillangle, markerOptions.fillAngle);\n      markerConfig.borderThickness = (0, _lib.pluckNumber)(optConfig.borderthickness, markerOptions.borderThickness);\n      markerConfig.borderColor = (0, _lib.pluck)(optConfig.bordercolor, markerOptions.borderColor);\n      markerConfig.borderAlpha = (0, _lib.pluck)(optConfig.borderalpha, markerOptions.borderAlpha);\n      markerConfig.labelPadding = optConfig.labelpadding || markerOptions.labelPadding;\n      markerConfig.options.tooltext = (0, _lib.pluck)(optConfig.tooltext, markerOptions.tooltext);\n      markerConfig.link = optConfig.link;\n      annotOptions = markers._drawMarkerItem(marker).markerShape;\n\n      markers._buildKdTree();\n\n      annotations.update(id, annotOptions);\n    }\n  };\n\n  _proto.createContainer = function createContainer() {\n    var dataset = this,\n        parent = dataset.getLinkedParent(),\n        animationManager = dataset.getFromEnv(\"animationManager\"),\n        pContainer = parent.getChildContainer(\"layer1\");\n    !dataset.getChildContainer(\"abovePlotGroup\") && dataset.addChildContainer(\"abovePlotGroup\", animationManager.setAnimation({\n      el: \"group\",\n      attr: {\n        name: \"abovePlotGroup\",\n        opacity: 1\n      },\n      container: pContainer,\n      component: dataset,\n      label: \"group\"\n    }));\n    !dataset.getChildContainer(\"belowPlotGroup\") && dataset.addChildContainer(\"belowPlotGroup\", animationManager.setAnimation({\n      el: \"group\",\n      attr: {\n        name: \"belowPlotGroup\",\n        opacity: 1\n      },\n      container: pContainer,\n      component: dataset,\n      label: \"group\"\n    }));\n  };\n\n  _proto._removeMarkerItem = function _removeMarkerItem(id) {\n    var markers = this,\n        components = markers.components,\n        markerObjs = components.markerObjs,\n        markerObj = markerObjs[id],\n        kdArrayMap = components.kdArrayMap,\n        annotations = markers.getChildren(\"mapAnnotations\")[0],\n        markerShape,\n        markerLabel;\n\n    if (markerObj) {\n      markerShape = markerObj.markerShape;\n      markerLabel = markerObj.markerLabel;\n      markerShape && annotations.destroy(markerShape.getId());\n      markerLabel && annotations.destroy(markerLabel.getId());\n      delete kdArrayMap[id];\n\n      markers._buildKdTree();\n    }\n\n    delete markerObjs[id];\n  };\n\n  _proto.getElement = function getElement(point) {\n    var datasetObj = this;\n\n    if (datasetObj.components.kDTree) {\n      return datasetObj.components.kDTree.getNeighbour(point);\n    }\n  };\n\n  return Markers;\n}(_entities.default);\n\nvar _default = Markers;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/moham/OneDrive/Desktop/04_06_2021/henaknowledge/frontend v3/henaknowledgefrontend/node_modules/@fusioncharts/maps/src/dataset/markers/index.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_inheritsLoose2","_entities","_kdtree","_extAnnotation","_dependencyManager","_mapEntities","_lib","_eventApi","_schedular","UNDEF","BLANK","POSITION_TOP","POSITION_BOTTOM","POSITION_RIGHT","POSITION_LEFT","POSITION_MIDDLE","POSITION_CENTER","LINE_STR","TEXT_STR","POLYGON_STR","ACR_STR","CIRCLE_STR","CENTER_STR","INNERRADIUSFACTOR","math","window","Math","mathMin","min","mathMax","max","MARKER_ITEM_KEY","hoverFn","marker","dataset","chart","getFromEnv","annotations","getChildren","shape","markerShape","groupConfig","options","data","eventArgs","_markerEventArgs","attrs","markerConfig","config","hovereffect","type","extend2","fillcolor","hoverfillcolor","fillalpha","hoverfillalpha","fillangle","hoverfillangle","fillratio","hoverfillratio","gradientUnits","radialGradient","_hoverattrs","update","getId","x","y","scaledX","scaleX","scaledY","scaleY","chartX","grpXShift","chartY","grpYShift","id","label","raiseEventGroup","hoverOutFn","wrapper","getElement","rawColor","rawAlpha","rawAngle","rawRatio","rawFillPattern","_defaultattrs","clickFn","e","markerOptions","linkClickFN","link","call","fireChartInstanceEvent","convertToObj","arr","idKey","i","length","key","returnObj","item","toLowerCase","topLabelAlignmentFn","radius","toString","align","valign","leftLabelAlignmentFn","rightLabelAlignmentFn","bottomLabelAlignmentFn","centerLabelAlignmentFn","rightWrapWidthFn","arguments","leftWrapWidthFn","width","centerWrapWidthFn","topWrapHeightFn","middleWrapHeightFn","height","bottomWrapHeightFn","addDep","name","extension","Markers","_Entities","_this","components","getLabelAlignment","top","left","right","bottom","center","getWrapWidth","getWrapHeight","middle","_proto","prototype","getName","getType","configureAttributes","markerJSONData","JSONData","annObj","mapAnnotations","markerOpts","attachChild","destroy","calculateDataLimits","dataEnabled","_parseMarkers","defineMarkersNShapes","configureConnectors","calculateMarkerRadiusLimits","conf","markerMaxRadius","markermaxradius","markerMinRadius","markerminradius","minMax","getMarkerRadiusLimits","minRadius","maxRadius","jsonData","markers","markerData","numberFormatter","Infinity","markerObj","cleanValue","len","value","getCleanValue","shapeArr","shapes","markerStyle","dataLabels","style","shapeObjs","markerObjs","shapeId","parseFloat","_initializeMarkerItem","shapeid","formattedValue","fillColor","pluck","color","fillAlpha","alpha","fillRatio","fillAngle","borderThickness","pluckNumber","borderthickness","borderColor","bordercolor","borderAlpha","borderalpha","labelPadding","labelpadding","fontColor","labelcolor","labelBgColor","labelbgcolor","labelBorderColor","labelbordercolor","__hideMarker","_isHidden","shapeObj","defineArr","definition","defineObject","applyObject","application","shapeObjHash","markerObjHash","tooltext","userMax","userMin","dime","factor","times","minR","maxR","finalUserMin","finalUserMax","isNaN","parseInt","getDataLimits","markerDefinition","markerApplication","opts","hasValue","markerLabel","drawOptions","drawComplete","applyAll","datasetComponents","connectors","connector","connectorComponents","getMouseOverFn","unfilteredConfig","hoverEffect","_hoverAttrs","getMouseOutFn","_defaultAttrs","getClickFn","chartConnOptions","connectorOpts","connectorItem","fromMarker","toMarker","toolText","thickness","hovercolor","hoveralpha","hoverthickness","connLabelConfig","obj","from","to","graphics","showTooltip","showtooltip","showhovereffect","showHoverEffect","hoverColor","hoverAlpha","hoverThickness","dashed","dashLen","dashlen","dashGap","dashgap","parseUnsafeString","parseTooltext","fromId","toId","fromLabel","toLabel","fromMarkerId","toMarkerId","onclick","onmouseover","onmouseout","labelConfig","text","font","bgcolor","draw","chartConf","chartMarkerOpts","scalingParams","annConfig","annotationConfig","markerItems","markerLabels","appliedMarkers","appliedObj","markerItem","rawConfig","markerLabelGroup","markerGroup","validShape","createContainer","_drawConnectors","imageLoadCount","imageCount","autoScale","sFactor","conIsHidden","_drawMarkerItem","_annotationIndex","Object","assign","animationLabel","autoscale","push","addGroup","items","scaleimages","retrieveItem","addJob","_buildKdTree","bind","priorityList","kdTree","kdArrayMap","kdPointsArr","kDTree","_setSearchLimit","buildKdTree","datasetConfig","itemScale","scale","scaleFactor","baseScaleFactor","labelPos","labelpos","labelObj","baseWidth","baseHeight","xOffset","yOffset","wrapWidth","wrapHeight","temp","calcX","calcY","kdPoint","innerradius","sides","markerId","tooltipSepChar","labelSepChar","showshadow","shadow","_markerLabel","_markerId","Number","translateX","translateY","startangle","startAngle","endangle","getShapeArgs","valueToRadius","fillhovercolor","hoverFillColor","fillhoveralpha","hoverFillAlpha","fillhoverratio","hoverFillRatio","fillhoverangle","hoverFillAngle","hoverborderthickness","borderhoverthickness","hoverBorderThickness","hoverbordercolor","borderhovercolor","hoverBorderColor","hoverborderalpha","borderhoveralpha","hoverBorderAlpha","showborder","onload","imageattr","derivedX","derivedY","element","shapeInfo","onerror","showLabels","_getLabelOptions","_labelBaseWidth","_labelBaseHeight","_labelXOffset","_labelYOffset","labelWrapWidth","labelWrapHeight","wrap","wrapwidth","wrapheight","fontsize","fontSize","fontFamily","highlightPoint","originalEvent","toolTipController","currentToolTip","lastHoveredPoint","hide","connectorLabel","showConnectorLabels","j","connectorOptions","connectorLabelItems","toX","toY","fromMarkerConfig","toMarkerConfig","connectorGroup","connectorLabelGroup","groups","validConnector","tox","toy","addEventListener","mark","markerRadius","alignment","test","addMarkerItem","markerConfigOptions","addItem","updateMarkerItem","origOptions","optConfig","annotOptions","parent","getLinkedParent","animationManager","pContainer","getChildContainer","addChildContainer","setAnimation","el","attr","opacity","container","component","_removeMarkerItem","point","datasetObj","getNeighbour","_default"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));var _entities=_interopRequireDefault(require(\"../entities\"));var _kdtree=_interopRequireDefault(require(\"@fusioncharts/charts/src/dataset/_internal/kdtree\"));var _extAnnotation=_interopRequireDefault(require(\"@fusioncharts/features/src/annotation/ext-annotation\"));var _dependencyManager=require(\"@fusioncharts/core/src/dependency-manager\");var _mapEntities=_interopRequireDefault(require(\"../_internal/map-entities.animation\"));var _lib=require(\"@fusioncharts/core/src/lib\");var _eventApi=require(\"@fusioncharts/core/src/event-api\");var _schedular=require(\"@fusioncharts/core/src/schedular\");var UNDEF,BLANK=\"\",POSITION_TOP=\"top\",POSITION_BOTTOM=\"bottom\",POSITION_RIGHT=\"right\",POSITION_LEFT=\"left\",POSITION_MIDDLE=\"middle\",POSITION_CENTER=\"center\",LINE_STR=\"line\",TEXT_STR=\"text\",POLYGON_STR=\"polygon\",ACR_STR=\"arc\",CIRCLE_STR=\"circle\",CENTER_STR=\"center\",INNERRADIUSFACTOR=.6,math=window.Math,mathMin=math.min,mathMax=math.max,MARKER_ITEM_KEY=\"items\",hoverFn=function hoverFn(marker){var dataset=this,chart=dataset.getFromEnv(\"chart\"),annotations=dataset.getChildren(\"mapAnnotations\")[0],shape=marker.markerShape,groupConfig=shape.groupConfig,options=shape.data(\"unfilteredConfig\"),eventArgs=options._markerEventArgs,attrs,markerConfig=marker.config;if(options.hovereffect){if(shape.config.type===\"circle\"){attrs=(0,_lib.extend2)({fillcolor:options.hoverfillcolor,fillalpha:options.hoverfillalpha,fillangle:options.hoverfillangle,fillratio:options.hoverfillratio,gradientUnits:\"objectBoundingBox\",radialGradient:1},options._hoverattrs)}attrs=(0,_lib.extend2)({},options._hoverattrs);annotations.update(shape.getId(),attrs)}if(!eventArgs){eventArgs=options._markerEventArgs={x:+options.x,y:+options.y,scaledX:options.x*groupConfig.scaleX,scaledY:options.y*groupConfig.scaleY,chartX:options.x*groupConfig.scaleX+groupConfig.grpXShift,chartY:options.y*groupConfig.scaleY+groupConfig.grpYShift,id:options.id,label:options.label}}(0,_eventApi.raiseEventGroup)(markerConfig.options.id,\"markerRollOver\",eventArgs,chart.getFromEnv(\"chartInstance\"),markerConfig,UNDEF,UNDEF,UNDEF)},hoverOutFn=function hoverOutFn(marker){var dataset=this,chart=dataset.getFromEnv(\"chart\"),annotations=dataset.getChildren(\"mapAnnotations\")[0],shape=marker.markerShape,wrapper=shape.getElement(),markerConfig=marker.config,options=shape.data(\"unfilteredConfig\"),attrs;if(wrapper&&options.hovereffect){if(shape.config.type===\"circle\"){attrs=(0,_lib.extend2)({fillcolor:shape.config.rawColor,fillalpha:shape.config.rawAlpha,fillangle:shape.config.rawAngle,fillratio:shape.config.rawRatio,gradientUnits:\"objectBoundingBox\",radialGradient:shape.config.rawFillPattern===\"radial\"},options._defaultattrs)}attrs=(0,_lib.extend2)({},options._defaultattrs);annotations.update(shape.getId(),attrs)}(0,_eventApi.raiseEventGroup)(markerConfig.id,\"markerRollOut\",options._markerEventArgs,chart.getFromEnv(\"chartInstance\"),UNDEF,UNDEF,UNDEF)},clickFn=function clickFn(e,marker){var dataset=this,markerOptions=marker.config.options,chart=dataset.getFromEnv(\"chart\"),shape=marker.markerShape,options=shape.config,groupConfig=shape.groupConfig,linkClickFN=dataset.getFromEnv(\"linkClickFN\"),link=shape.config.link,eventArgs=options._markerEventArgs;link&&linkClickFN&&linkClickFN.call({link:link},true);if(!eventArgs){eventArgs=options._markerEventArgs={x:+options.x,y:+options.y,scaledX:options.x*groupConfig.scaleX,scaledY:options.y*groupConfig.scaleY,chartX:options.x*groupConfig.scaleX+groupConfig.grpXShift,chartY:options.y*groupConfig.scaleY+groupConfig.grpYShift,id:markerOptions.id,label:markerOptions.label}}chart.fireChartInstanceEvent(\"markerClick\",eventArgs,e)},convertToObj=function convertToObj(arr,idKey){var i=arr&&arr.length||false,key=idKey||\"id\",returnObj={},item;if(!arr){return arr}while(i--){item=arr[i];item[key]!==UNDEF&&(returnObj[item[key].toLowerCase()]=item)}return returnObj},topLabelAlignmentFn=function topLabelAlignmentFn(x,y,radius){return{x:x.toString(),y:(y-radius).toString(),align:POSITION_CENTER,valign:POSITION_TOP}},leftLabelAlignmentFn=function leftLabelAlignmentFn(x,y,radius){return{x:(x-radius).toString(),y:y.toString(),align:POSITION_RIGHT,valign:POSITION_MIDDLE}},rightLabelAlignmentFn=function rightLabelAlignmentFn(x,y,radius){return{x:(x+radius).toString(),y:y.toString(),align:POSITION_LEFT,valign:POSITION_MIDDLE}},bottomLabelAlignmentFn=function bottomLabelAlignmentFn(x,y,radius){return{x:x.toString(),y:(y+radius).toString(),align:POSITION_CENTER,valign:POSITION_BOTTOM}},centerLabelAlignmentFn=function centerLabelAlignmentFn(x,y){return{x:x.toString(),y:y.toString(),align:POSITION_CENTER,valign:POSITION_MIDDLE}},rightWrapWidthFn=function rightWrapWidthFn(){return arguments[1]},leftWrapWidthFn=function leftWrapWidthFn(width,x){return width-x},centerWrapWidthFn=function centerWrapWidthFn(width,x){return mathMin(x,width-x)*2},topWrapHeightFn=function topWrapHeightFn(){return arguments[1]},middleWrapHeightFn=function middleWrapHeightFn(height,y){return mathMin(y,height-y)*2},bottomWrapHeightFn=function bottomWrapHeightFn(height,y){return height-y};(0,_dependencyManager.addDep)({name:\"mapsAnimation\",type:\"animationRule\",extension:_mapEntities.default});var Markers=function(_Entities){(0,_inheritsLoose2.default)(Markers,_Entities);function Markers(){var _this;_this=_Entities.call(this)||this;_this.components={};_this.getLabelAlignment={top:topLabelAlignmentFn,left:leftLabelAlignmentFn,right:rightLabelAlignmentFn,bottom:bottomLabelAlignmentFn,center:centerLabelAlignmentFn};_this.getWrapWidth={right:rightWrapWidthFn,left:leftWrapWidthFn,center:centerWrapWidthFn};_this.getWrapHeight={top:topWrapHeightFn,middle:middleWrapHeightFn,bottom:bottomWrapHeightFn};_this.hoverFn=hoverFn;_this.hoverOutFn=hoverOutFn;_this.clickFn=clickFn;return _this}var _proto=Markers.prototype;_proto.getName=function getName(){return\"markers\"};_proto.getType=function getType(){return\"dataset\"};_proto.configureAttributes=function configureAttributes(markerJSONData){if(!markerJSONData){return}this.JSONData=markerJSONData;var dataset=this,annObj,mapAnnotations=dataset.getChildren(\"mapAnnotations\")&&dataset.getChildren(\"mapAnnotations\")[0],chart=dataset.getFromEnv(\"chart\"),markerOptions=chart.config.markerOpts;if(!mapAnnotations){annObj=new _extAnnotation.default;dataset.attachChild(annObj,\"mapAnnotations\");mapAnnotations=dataset.getChildren(\"mapAnnotations\")[0]}mapAnnotations.destroy();dataset.calculateDataLimits();if(markerOptions.dataEnabled){this._parseMarkers()}else{this.defineMarkersNShapes()}this.configureConnectors()};_proto.calculateMarkerRadiusLimits=function calculateMarkerRadiusLimits(){if(!this.JSONData){return}var dataset=this,JSONData=dataset.JSONData,conf=dataset.config,chart=dataset.getFromEnv(\"chart\"),width=chart.config.width,height=chart.config.height,markerMaxRadius=JSONData.markermaxradius,markerMinRadius=JSONData.markerminradius,minMax=Markers.getMarkerRadiusLimits(width,height,markerMaxRadius,markerMinRadius);conf.minRadius=minMax.min;conf.maxRadius=minMax.max};_proto.calculateDataLimits=function calculateDataLimits(){var dataset=this,chart=dataset.getFromEnv(\"chart\"),conf=dataset.config,jsonData=chart.jsonData,markers=jsonData.markers||{},markerData=markers[MARKER_ITEM_KEY]||[],numberFormatter=this.getFromEnv(\"number-formatter\"),min=+Infinity,max=-Infinity,markerObj,cleanValue,len,value,i;for(i=0,len=markerData.length;i<len;i++){markerObj=markerData[i];value=markerObj.value;cleanValue=numberFormatter.getCleanValue(value);if(cleanValue!==null){min=mathMin(cleanValue,min);max=mathMax(cleanValue,max)}}conf.min=min;conf.max=max};_proto._parseMarkers=function _parseMarkers(){var dataset=this,chart=dataset.getFromEnv(\"chart\"),jsonData=chart.jsonData,markers=jsonData.markers,markerData=markers[MARKER_ITEM_KEY],shapeArr=markers.shapes,markerOptions=chart.config.markerOpts,markerStyle=markerOptions.dataLabels.style,numberFormatter=this.getFromEnv(\"number-formatter\"),shapeObjs=dataset.components.shapeObjs={},markerObjs=dataset.components.markerObjs={},value,i,markerObj,item,shapeId,markerConfig,options,id;if(!markerData||!markerData.length){return}if(shapeArr&&shapeArr.length){i=shapeArr.length;for(;i;i-=1){item=shapeArr[i-1];if(id=item.id.toLowerCase()){shapeObjs[id]=item}}}i=markerData.length;while(i--){item=markerData[i];if(id=item.id&&item.id.toLowerCase()){value=item.value;if(value!==UNDEF&&value!==\"\"){value=parseFloat(value)}markerObj=Markers._initializeMarkerItem(id,item,null,chart);shapeId=markerObj.config.options.shapeid;shapeId&&typeof shapeId===\"string\"&&(shapeId=shapeId.toLowerCase());markerConfig=markerObj.config;options=markerConfig.options;markerConfig.cleanValue=numberFormatter.getCleanValue(value);if(markerConfig.cleanValue!==null){markerConfig.formattedValue=numberFormatter.dataLabels(value)}else{markerConfig.formattedValue=UNDEF}markerConfig.fillColor=(0,_lib.pluck)(options.fillcolor,options.color,markerOptions.fillColor);markerConfig.fillAlpha=(0,_lib.pluck)(options.fillalpha,options.alpha,markerOptions.fillAlpha);markerConfig.fillRatio=(0,_lib.pluck)(options.fillratio,markerOptions.fillRatio);markerConfig.fillAngle=(0,_lib.pluck)(options.fillangle,markerOptions.fillAngle);markerConfig.borderThickness=(0,_lib.pluckNumber)(options.borderthickness,markerOptions.borderThickness);markerConfig.borderColor=(0,_lib.pluck)(options.bordercolor,markerOptions.borderColor);markerConfig.borderAlpha=(0,_lib.pluck)(options.borderalpha,markerOptions.borderAlpha);markerConfig.labelPadding=options.labelpadding||markerOptions.labelPadding;markerConfig.fontColor=(0,_lib.pluck)(options.labelcolor,markerStyle.fontColor);markerConfig.labelBgColor=(0,_lib.pluck)(options.labelbgcolor,markerStyle.labelBgColor)||BLANK;markerConfig.labelBorderColor=(0,_lib.pluck)(options.labelbordercolor,markerStyle.labelBorderColor)||BLANK;if(item.__hideMarker){markerObj._isHidden=true}if(shapeId){markerObj.shapeObj=shapeObjs[shapeId]}markerObjs[id]=markerObj}}};_proto.defineMarkersNShapes=function defineMarkersNShapes(){var dataset=this,chart=dataset.getFromEnv(\"chart\"),jsonData=chart.jsonData,markers=jsonData.markers,defineArr=markers.definition,numberFormatter=this.getFromEnv(\"number-formatter\"),markerOptions=chart.config.markerOpts,markerStyle=markerOptions.dataLabels.style,defineObject=convertToObj(defineArr)||{},applyObject=convertToObj(markers.application)||{},shapeArr=markers.shapes,shapeObjs=dataset.components.shapeObjs=dataset.components.shapeObjs||(dataset.components.shapeObjs={}),markerObjs=dataset.components.markerObjs=dataset.components.markerObjs||(dataset.components.markerObjs={}),shapeObjHash={},markerObjHash={},options,markerConfig,value,i,markerObj,item,shapeId,id;if(!defineArr||!defineArr.length){return}for(i in shapeObjs){shapeObjHash[i]=false}for(i in markerObjs){markerObjHash[i]=false}if(shapeArr&&shapeArr.length){i=shapeArr.length;for(;i;i-=1){item=shapeArr[i-1];if(id=item.id.toLowerCase()){shapeObjs[id]=item;shapeObjHash[id]=true}}}for(id in defineObject){item=defineObject[id];markerObj=markerObjs[id]=Markers._initializeMarkerItem(id,item,applyObject[id],chart);markerObjHash[id]=true;shapeId=markerObj.config.options.shapeid;markerConfig=markerObj.config;value=item.value;markerConfig.cleanValue=numberFormatter.getCleanValue(value);options=markerConfig.options;if(markerConfig.cleanValue!==null){markerConfig.formattedValue=numberFormatter.dataLabels(value)}else{markerConfig.formattedValue=UNDEF}markerConfig.fillColor=(0,_lib.pluck)(options.fillcolor,options.color,markerOptions.fillColor);markerConfig.fontColor=(0,_lib.pluck)(options.labelcolor,markerStyle.fontColor);markerConfig.fillAlpha=(0,_lib.pluck)(options.fillalpha,options.alpha,markerOptions.fillAlpha);markerConfig.fillRatio=(0,_lib.pluck)(options.fillratio,markerOptions.fillRatio);markerConfig.fillAngle=(0,_lib.pluck)(options.fillangle,markerOptions.fillAngle);markerConfig.borderThickness=(0,_lib.pluckNumber)(options.borderthickness,markerOptions.borderThickness);markerConfig.borderColor=(0,_lib.pluck)(options.bordercolor,markerOptions.borderColor);markerConfig.borderAlpha=(0,_lib.pluck)(options.borderalpha,markerOptions.borderAlpha);markerConfig.labelPadding=options.labelpadding||markerOptions.labelPadding;markerConfig.options.tooltext=(0,_lib.pluck)(options.tooltext,markerOptions.tooltext);markerConfig.link=options.link;if(shapeId){markerObj.shapeObj=shapeObjs[shapeId.toLowerCase()]}}for(i in shapeObjHash){if(!shapeObjHash[i]){delete shapeObjs[i]}}for(i in markerObjs){if(!markerObjHash[i]){delete markerObjs[i]}}};Markers.getMarkerRadiusLimits=function getMarkerRadiusLimits(width,height,userMax,userMin){var dime=mathMin(width,height),factor=.02,times=3.5,minR=factor*dime,maxR=factor*times*dime,finalUserMin,finalUserMax;finalUserMin=parseFloat(userMin);finalUserMax=parseFloat(userMax);if(!isNaN(finalUserMin)&&!isNaN(finalUserMax)){if(finalUserMin<finalUserMax){return{min:finalUserMin,max:finalUserMax}}return{min:finalUserMax,max:finalUserMin}}else if(!isNaN(finalUserMin)){return{min:finalUserMin,max:10*finalUserMin}}else if(!isNaN(finalUserMax)){return{min:parseInt(finalUserMax/10,10),max:finalUserMax}}return{min:minR,max:maxR}};_proto.getDataLimits=function getDataLimits(){var dataset=this,conf=dataset.config;return{min:conf.min,max:conf.max}};Markers._initializeMarkerItem=function _initializeMarkerItem(id,markerDefinition,markerApplication){var markerObj={},config=markerObj.config,opts;if(!config){config=markerObj.config={}}config.id=id;config.definition=markerDefinition;config.application=markerApplication;config.hasValue=null;config.value=null;config.options=null;config.label=null;config.markerShape=null;config.markerLabel=null;config.drawOptions={shape:null,label:null};config.drawComplete=false;opts=markerObj.config.options=(0,_lib.extend2)({},config.definition);if(config.dataEnabled){if(!isNaN(opts.value)&&opts.value!==\"\"){markerObj.value=parseFloat(opts.value);markerObj.hasValue=true}}else if(config.applyAll){config.options=(0,_lib.extend2)(opts,config.application)}else if(markerApplication){config.options=(0,_lib.extend2)(opts,config.application)}return markerObj};_proto.configureConnectors=function configureConnectors(){var dataset=this,chart=dataset.getFromEnv(\"chart\"),annotations=dataset.getChildren(\"mapAnnotations\")[0],jsonData=chart.jsonData,datasetComponents=dataset.components,markers=jsonData.markers||{},connectors=markers.connector||markers.connectors||[],markerObjs=datasetComponents.markerObjs,length=connectors.length,connectorComponents=dataset.components.connectors,getMouseOverFn=function getMouseOverFn(eventArgs){return function(e){var shape=this,unfilteredConfig=shape.data(\"unfilteredConfig\");if(unfilteredConfig.hoverEffect){annotations.update(shape.getId(),unfilteredConfig._hoverAttrs)}chart.fireChartInstanceEvent(\"connectorrollover\",eventArgs,e)}},getMouseOutFn=function getMouseOutFn(eventArgs){return function(e){var shape=this,unfilteredConfig=shape.data(\"unfilteredConfig\");if(unfilteredConfig.hoverEffect){annotations.update(shape.getId(),unfilteredConfig._defaultAttrs)}chart.fireChartInstanceEvent(\"connectorrollout\",eventArgs,e)}},getClickFn=function getClickFn(eventArgs){return function(e){chart.fireChartInstanceEvent(\"connectorClick\",eventArgs,e)}},chartConnOptions=chart.config.connectorOpts,connectorItem={},config,options,fromMarker,toMarker,label,toolText,thickness,color,alpha,hovercolor,hoveralpha,hoverthickness,connLabelConfig,obj,i;connectorComponents=dataset.components.connectors=[];for(i=0;i<length;i++){obj=connectors[i];if(!obj.from&&!obj.to){continue}fromMarker=markerObjs[obj.from.toLowerCase()];toMarker=markerObjs[obj.to.toLowerCase()];if(!fromMarker||!toMarker){continue}label=connectors[i].label;connectorItem=connectorComponents[i];!connectorItem&&(connectorItem=connectorComponents[i]={});!connectorItem.config&&(config=connectorItem.config={});!connectorItem.graphics&&(connectorItem.graphics={});config=connectorItem.config=(0,_lib.extend2)({},obj);config.fromMarker=fromMarker;config.toMarker=toMarker;config.link=obj.link;config.showTooltip=(0,_lib.pluckNumber)(obj.showtooltip,chartConnOptions.showTooltip);toolText=config.tooltext=config.showTooltip?(0,_lib.pluck)(obj.tooltext,chartConnOptions.tooltext):BLANK;thickness=config.thickness=(0,_lib.pluck)(obj.thickness,chartConnOptions.thickness);color=config.color=(0,_lib.pluck)(obj.color,chartConnOptions.color);alpha=config.alpha=(0,_lib.pluck)(obj.alpha,chartConnOptions.alpha);config.hoverEffect=(0,_lib.pluckNumber)(obj.showhovereffect,chartConnOptions.showHoverEffect);hovercolor=(0,_lib.pluck)(obj.hovercolor,chartConnOptions.hoverColor,color);hoveralpha=(0,_lib.pluck)(obj.hoveralpha,chartConnOptions.hoverAlpha,alpha);hoverthickness=(0,_lib.pluck)(obj.hoverthickness,chartConnOptions.hoverThickness,thickness);config.dashed=(0,_lib.pluck)(obj.dashed,chartConnOptions.dashed);config.dashLen=(0,_lib.pluckNumber)(obj.dashlen,chartConnOptions.dashlen);config.dashGap=(0,_lib.pluckNumber)(obj.dashgap,chartConnOptions.dashgap);if(toolText){config.tooltext=toolText=(0,_lib.parseUnsafeString)((0,_lib.parseTooltext)(toolText,[3,40,41,42,43],{label:label,fromId:fromMarker.config.definition.id,toId:toMarker.config.definition.id,fromLabel:fromMarker.config.definition.label,toLabel:toMarker.config.definition.label},options),false)}config.eventArgs={fromMarkerId:fromMarker.config.id,toMarkerId:toMarker.config.id,label:label};config._hoverAttrs={color:hovercolor,alpha:hoveralpha,thickness:hoverthickness};config._defaultAttrs={color:color,alpha:alpha,thickness:thickness};config.type=LINE_STR;config.onclick=getClickFn(config.eventArgs);config.onmouseover=getMouseOverFn(config.eventArgs);config.onmouseout=getMouseOutFn(config.eventArgs);if(label){connLabelConfig=connectorItem.labelConfig;!connLabelConfig&&(connLabelConfig=connectorItem.labelConfig={});connLabelConfig.type=TEXT_STR;connLabelConfig.text=label;connLabelConfig.align=POSITION_CENTER;connLabelConfig.valign=POSITION_MIDDLE;connLabelConfig.font=chartConnOptions.font;connLabelConfig.fillcolor=(0,_lib.pluck)(obj.labelcolor,chartConnOptions.fontColor);connLabelConfig.bgcolor=(0,_lib.pluck)(obj.labelbgcolor,chartConnOptions.labelBgColor);connLabelConfig.bordercolor=(0,_lib.pluck)(obj.labelbordercolor,chartConnOptions.labelBorderColor);connLabelConfig.tooltext=config.tooltext}}};_proto.draw=function draw(){var dataset=this,chart=dataset.getFromEnv(\"chart\"),conf=dataset.config,annotations=dataset.getChildren(\"mapAnnotations\")[0],markers=dataset.components.markerObjs,chartConf=chart.config,chartMarkerOpts=chartConf.markerOpts,scalingParams=chartConf.scalingParams,annConfig=chart.config.annotationConfig,markerItems=[],markerLabels=[],appliedMarkers={},appliedObj,markerItem,rawConfig,config,id,i,markerLabelGroup,markerGroup,validShape={};annotations.destroy();dataset.createContainer();dataset._drawConnectors();dataset.imageLoadCount=0;dataset.imageCount=0;conf.autoScale=chartMarkerOpts.autoScale?scalingParams.sFactor:1;for(id in markers){appliedObj=null;markerItem=markers[id];config=markerItem.config;if(!config.conIsHidden){appliedObj=this._drawMarkerItem(markerItem)}if(!appliedObj){continue}validShape[id]=appliedObj;config._annotationIndex=markerItems.length;appliedMarkers[id]=markerItem;if(appliedObj.markerShape){rawConfig=Object.assign({align:\"center\",valign:\"middle\",animationLabel:\"markerItem\",autoscale:appliedObj.markerShape.type===\"image\"?0:1},appliedObj.markerShape);markerItems.push(rawConfig)}if(appliedObj.markerLabel){rawConfig=Object.assign({animationLabel:\"markerItem\",id:appliedObj.markerShape.id},appliedObj.markerLabel);markerLabels.push(rawConfig)}}markerGroup=annotations.addGroup(Object.assign(annConfig,{id:\"markers\",fillalpha:\"100\",items:markerItems,scaleimages:1}),dataset);markerLabelGroup=annotations.addGroup(Object.assign(annConfig,{id:\"markerLabels\",items:markerLabels,scaleimages:1}),dataset);dataset.components.markerGroup=markerGroup;dataset.components.markerLabelGroup=markerLabelGroup;i=0;for(id in markers){if(!validShape[id]){continue}markerItem=markers[id];markerItem.markerShape=markerGroup.retrieveItem(markerItems[i].id);markerItem.markerShape.data(\"unfilteredConfig\",markerItems[i]);if(validShape[id].markerLabel){markerItem.markerLabel=markerLabelGroup.retrieveItem(markerItems[i].id);markerItem.markerLabel.data(\"unfilteredConfig\",markerLabels[i])}i++}dataset.addJob(\"buildKdtree\",dataset._buildKdTree.bind(dataset),_schedular.priorityList.kdTree)};_proto._buildKdTree=function _buildKdTree(){var dataset=this,kdArrayMap=dataset.components.kdArrayMap,markerGroup=dataset.components.markerGroup,kdPointsArr=[],id,i,items=markerGroup&&markerGroup.items,len=items&&items.length||0;for(i=0;i<len;i++){id=items[i].config.id;kdArrayMap[id]&&kdPointsArr.push(kdArrayMap[id])}if(!dataset.components.kDTree){dataset.components.kDTree=new _kdtree.default(true)}dataset.components.kDTree._setSearchLimit(Infinity,Infinity);dataset.components.kDTree.buildKdTree(kdPointsArr)};_proto._drawMarkerItem=function _drawMarkerItem(marker){var dataset=this,chart=dataset.getFromEnv(\"chart\"),conf=chart.config,datasetConfig=dataset.config,scalingParams=conf.scalingParams,markerConfig=marker.config,options=markerConfig.options,definition=markerConfig.definition,chartMarkerOpts=conf.markerOpts,markerStyle=chartMarkerOpts.dataLabels.style,shapeId=options.shapeid,itemScale=options.scale||1,label=options.label||BLANK,scaleFactor=chart.config.scalingParams.scaleFactor*chart.config.baseScaleFactor,labelPos=(options.labelpos||POSITION_TOP).toLowerCase(),value=markerConfig.formattedValue===UNDEF?UNDEF:markerConfig.formattedValue,tooltext=options.tooltext||chartMarkerOpts.tooltext,radius=(0,_lib.pluckNumber)(definition.radius,markerConfig.radius,chartMarkerOpts.radius)*itemScale*datasetConfig.autoScale||1e-4,fillColor=markerConfig.fillColor,fillAlpha=markerConfig.fillAlpha,fillRatio=markerConfig.fillRatio,fillAngle=markerConfig.fillAngle,borderThickness=markerConfig.borderThickness,borderColor=markerConfig.borderColor,borderAlpha=markerConfig.borderAlpha,annotations=dataset.getChildren(\"mapAnnotations\")[0],labelObj,align,valign,baseWidth,baseHeight,xOffset,yOffset,wrapWidth,wrapHeight,labelPadding,shapeObj,temp,calcX,calcY,kdPoint,innerradius,sides,type,kdArrayMap=dataset.components.kdArrayMap||(dataset.components.kdArrayMap={}),markerId=marker.config.id;markerConfig.autoScale=chartMarkerOpts.autoScale?scaleFactor:1;if(!shapeId){return}if(tooltext){tooltext=(0,_lib.parseUnsafeString)((0,_lib.parseTooltext)(tooltext,[1,2,3],{formattedValue:value,label:label},options),false)}else{tooltext=value?label+chartMarkerOpts.tooltipSepChar+value:label}if(value!==UNDEF&&value!==null){label=label+chartMarkerOpts.labelSepChar+value}else{if(!isNaN(itemScale)){if(itemScale<0){itemScale=0}else if(itemScale>5){itemScale=5}}else{itemScale=1}}(0,_lib.extend2)(options,{x:options.x&&options.x.toString(),y:options.y&&options.y.toString(),fillcolor:fillColor,fillalpha:fillAlpha,fillratio:fillRatio,fillangle:fillAngle,borderthickness:borderThickness,bordercolor:borderColor,borderalpha:borderAlpha,hovereffect:(0,_lib.pluck)(chartMarkerOpts.showHoverEffect),radius:radius&&radius.toString(),link:options.link,showshadow:(0,_lib.pluckNumber)(options.showshadow,markerConfig.shadow),_markerLabel:label,_markerId:options.id,id:(options.id+BLANK).toLowerCase()});delete options.tooltext;markerConfig.tooltext=chartMarkerOpts.showTooltip?tooltext:false;calcX=Number(options.x)*scalingParams.sFactor+scalingParams.translateX;calcY=Number(options.y)*scalingParams.sFactor+scalingParams.translateY;radius=options.radius;if(shapeId===\"triangle\"){(0,_lib.extend2)(options,{type:\"polygon\",sides:3,startangle:chartMarkerOpts.startAngle});type=POLYGON_STR;sides=3}else if(shapeId===\"diamond\"){(0,_lib.extend2)(options,{type:\"polygon\",sides:4,startangle:chartMarkerOpts.startAngle});type=POLYGON_STR;sides=4}else if(shapeId===\"arc\"){innerradius=radius*INNERRADIUSFACTOR;(0,_lib.extend2)(options,{type:\"arc\",startangle:0,endangle:360,innerradius:innerradius});type=ACR_STR}else if(shapeId===\"circle\"){options.type=CIRCLE_STR;type=CIRCLE_STR}else{shapeObj=dataset.getShapeArgs.call(marker);if(!chartMarkerOpts.dataEnabled||!chartMarkerOpts.valueToRadius||options.radius===UNDEF){!shapeObj.radius&&(shapeObj.radius=chartMarkerOpts.radius);shapeObj.radius*=itemScale*markerConfig.autoScale}else{delete shapeObj.radius}(0,_lib.extend2)(options,shapeObj);options.id=options._markerId&&options._markerId.toLowerCase();innerradius=shapeObj.innerradius;shapeObj.radius&&(radius=shapeObj.radius);type=shapeObj.type&&shapeObj.type.toLowerCase();sides=shapeObj.sides;radius=Number(radius);if(radius&&innerradius&&radius<innerradius){temp=radius;options.radius=radius=innerradius;options.innerradius=innerradius=temp}}options.type=options.type&&options.type.toLowerCase();(0,_lib.extend2)(options,{hoverfillcolor:(0,_lib.pluck)(options.fillhovercolor,chartMarkerOpts.hoverFillColor,options.fillcolor),hoverfillalpha:(0,_lib.pluck)(options.fillhoveralpha,chartMarkerOpts.hoverFillAlpha,options.fillalpha),hoverfillratio:(0,_lib.pluck)(options.fillhoverratio,chartMarkerOpts.hoverFillRatio,options.fillratio),hoverfillangle:(0,_lib.pluck)(options.fillhoverangle,chartMarkerOpts.hoverFillAngle,options.fillangle),hoverborderthickness:(0,_lib.pluckNumber)(options.borderhoverthickness,chartMarkerOpts.hoverBorderThickness,options.borderthickness),hoverbordercolor:(0,_lib.pluck)(options.borderhovercolor,chartMarkerOpts.hoverBorderColor,options.bordercolor),hoverborderalpha:(0,_lib.pluck)(options.borderhoveralpha,chartMarkerOpts.hoverBorderAlpha,options.borderalpha)});options._hoverattrs={fillalpha:options.hoverfillalpha,fillcolor:options.hoverfillcolor,fillangle:options.hoverfillangle,fillratio:options.hoverfillratio,borderThickness:options.showborder!==\"0\"?options.hoverborderthickness:0,borderColor:options.hoverbordercolor,borderAlpha:options.hoverborderalpha};options._defaultattrs={fillalpha:options.fillalpha,fillcolor:options.fillcolor,fillangle:options.fillangle,fillratio:options.fillratio,borderThickness:options.showborder!==\"0\"?options.borderthickness:0,borderColor:options.bordercolor,borderAlpha:options.borderalpha};if(options.type===\"image\"){options.borderthickness=options.borderthickness||0;options.onload=function(imageattr){var shape=this,width=imageattr.width,height=imageattr.height;kdPoint={};options=shape.config;calcX=(Number(options.derivedX)-width/(2*scalingParams.sFactor))*scalingParams.sFactor;calcY=(Number(options.derivedY)-height/(2*scalingParams.sFactor))*scalingParams.sFactor;kdPoint=kdArrayMap[markerId]||(kdArrayMap[markerId]={});kdPoint.x=calcX+scalingParams.translateX;kdPoint.y=calcY+scalingParams.translateY;kdPoint.element=marker;kdPoint.shapeInfo={type:\"rect\",width:width,height:height};if(width&&height){annotations.update(shape.getId(),{x:calcX,y:calcY,width:width,height:height,autoscale:0})}dataset.imageLoadCount++;if(dataset.imageLoadCount===dataset.imageCount){dataset._buildKdTree()}};options.onerror=function(){dataset.imageLoadCount++;if(dataset.imageLoadCount===dataset.imageCount){dataset._buildKdTree()}};dataset.imageCount++}else{kdPoint=kdArrayMap[markerId]||(kdArrayMap[markerId]={});kdPoint.x=calcX;kdPoint.y=calcY;kdPoint.element=marker;kdPoint.shapeInfo={type:type,sides:sides,radius:Number(radius)+options.borderthickness/2,innerradius:innerradius}}markerConfig.drawOptions.shape=options;if(!chartMarkerOpts.showLabels){return{markerShape:options}}labelPadding=options.labelpadding||chartMarkerOpts.labelPadding;labelObj=dataset._getLabelOptions(labelPos,labelPadding,options);align=labelObj.align;valign=labelObj.valign;baseWidth=markerConfig._labelBaseWidth;baseHeight=markerConfig._labelBaseHeight;xOffset=markerConfig._labelXOffset;yOffset=markerConfig._labelYOffset;wrapWidth=chartMarkerOpts.labelWrapWidth?chartMarkerOpts.labelWrapWidth:dataset.getWrapWidth[align](baseWidth,Number(labelObj.x)+xOffset);wrapHeight=chartMarkerOpts.labelWrapHeight?chartMarkerOpts.labelWrapHeight:dataset.getWrapHeight[valign](baseHeight,Number(labelObj.y)+yOffset);if(wrapWidth>labelPadding){wrapWidth-=labelPadding}if(wrapHeight>labelPadding){wrapHeight-=labelPadding}markerConfig.drawOptions.label=(0,_lib.extend2)({type:\"text\"},{text:label,tooltext:options.tooltext,x:labelObj.x,y:labelObj.y,align:align,valign:labelObj.valign,wrap:1,wrapwidth:wrapWidth,wrapheight:wrapHeight,fontsize:markerStyle.fontSize/scalingParams.sFactor,font:markerStyle.fontFamily,color:markerConfig.fontColor,bgcolor:markerConfig.labelBgColor||BLANK,bordercolor:markerConfig.labelBorderColor||BLANK});return{markerShape:options,markerLabel:markerConfig.drawOptions.label}};_proto.highlightPoint=function highlightPoint(kdPoint,e){var marker=kdPoint.element,dataset=this,originalEvent=e.originalEvent,chart=dataset.getFromEnv(\"chart\"),toolTipController=dataset.getFromEnv(\"toolTipController\"),currentToolTip=dataset.config.currentToolTip,lastHoveredPoint=chart.config.lastHoveredPoint;if(lastHoveredPoint&&lastHoveredPoint!==kdPoint){lastHoveredPoint&&dataset.hoverOutFn(lastHoveredPoint.element);chart.config.lastHoveredPoint=null;toolTipController.hide(currentToolTip)}if(kdPoint===false){return}if(e.type===\"click\"||e.type===\"touchstart\"){if(chart.config.lastHoveredPoint!==kdPoint){dataset.hoverFn(marker)}dataset.clickFn(e,marker)}else if(e.type===\"mousemove\"){if(chart.config.lastHoveredPoint!==kdPoint){dataset.hoverFn(marker)}}if(marker.config.tooltext){if(currentToolTip){toolTipController.draw(originalEvent,marker.config.tooltext,currentToolTip)}else{currentToolTip=dataset.config.currentToolTip=toolTipController.draw(originalEvent,marker.config.tooltext)}}chart.config.lastHoveredPoint=kdPoint};_proto._drawConnectors=function _drawConnectors(){var dataset=this,chart=dataset.getFromEnv(\"chart\"),annConfig=chart.config.annotationConfig,datasetComponents=dataset.components,connectors=datasetComponents.connectors||(dataset.components.connectors=[]),connector,connectorLabel,length=connectors.length,scalingParams=chart.config.scalingParams,chartConnOptions=chart.config.connectorOpts,showConnectorLabels=chartConnOptions.showLabels,annotations=dataset.getChildren(\"mapAnnotations\")[0],i,j,connectorOptions=[],connectorLabelItems=[],x,y,toX,toY,fromMarkerConfig,toMarkerConfig,connectorGroup,connectorLabelGroup,rawConfig,groups=[],validConnector={};groups.push({id:\"connectorLabels\",fillalpha:\"100\",items:connectorLabelItems});groups.push({id:\"connectors\",fillalpha:\"100\",items:connectorOptions});for(i=0;i<length;i++){if(!connectors[i]){continue}validConnector[i]=true;fromMarkerConfig=connectors[i].config.fromMarker.config;toMarkerConfig=connectors[i].config.toMarker.config;x=fromMarkerConfig.options.x;y=fromMarkerConfig.options.y;toX=toMarkerConfig.options.x;toY=toMarkerConfig.options.y;connectors[i].config.x=x;connectors[i].config.y=y;connectors[i].config.tox=toX;connectors[i].config.toy=toY;rawConfig=Object.assign({animationLabel:\"markerItem\"},connectors[i].config);connectorOptions.push(rawConfig);if(connectors[i].labelConfig&&showConnectorLabels){connectors[i].labelConfig.x=((Number(x)+Number(toX))/2).toString();connectors[i].labelConfig.y=((Number(y)+Number(toY))/2).toString();connectors[i].labelConfig.fontsize=chartConnOptions.fontSize/(scalingParams.scaleFactor*chart.config.baseScaleFactor);rawConfig=Object.assign({animationLabel:\"markerItem\"},connectors[i].labelConfig);connectorLabelItems.push(rawConfig)}}connectorGroup=annotations.addGroup(Object.assign(annConfig,groups[1]),dataset);connectorLabelGroup=annotations.addGroup(Object.assign(annConfig,groups[0]),dataset);for(i=0,j=0;i<length;i++){if(!validConnector[i]){continue}connector=connectorGroup.items[j];if(connector){connector.data(\"unfilteredConfig\",connectorOptions[j]);connector.addEventListener(\"fc-mouseover\",connectors[i].config.onmouseover);connector.addEventListener(\"fc-mouseout\",connectors[i].config.onmouseout);connector.addEventListener(\"fc-click\",connectors[i].config.onclick)}if(connectors[i].labelConfig&&showConnectorLabels){connectorLabel=connectorLabelGroup.items[j];connectorLabel&&connectorLabel.data(\"unfilteredConfig\")}j++}};_proto.getShapeArgs=function getShapeArgs(){var mark=this,config=mark.config,shapeObj=(0,_lib.extend2)({},mark.shapeObj),radius;config.autoScale=1;if(shapeObj){if(shapeObj.type===\"polygon\"){if(shapeObj.sides<3){shapeObj.type=CIRCLE_STR}else{shapeObj.startangle=config.startAngle}}else if(shapeObj.type===\"arc\"){radius=(shapeObj.radius||config.markerRadius)*config.autoScale;shapeObj.radius=radius;shapeObj.innerradius=shapeObj.innerradius&&shapeObj.innerradius*config.autoScale||radius*INNERRADIUSFACTOR}return shapeObj}return null};_proto._getLabelOptions=function _getLabelOptions(labelPos,labelPadding,options,width,height){var dataset=this,radius,x,y,alignment=labelPos&&labelPos.toLowerCase();if(!dataset.getLabelAlignment[alignment]){alignment=CENTER_STR}x=Number(options.x);y=Number(options.y);if(width===UNDEF||height===UNDEF){radius=options.radius||0}else{radius=/^(top|bottom)$/gi.test(alignment)&&height*.5||/^(left|right)$/gi.test(alignment)&&width*.5||0}radius=Number(radius)+Number(labelPadding);return dataset.getLabelAlignment[alignment](x,y,radius)};_proto.addMarkerItem=function addMarkerItem(options){var markers=this,chart=markers.getFromEnv(\"chart\"),item=options,markerObj,items=markers.components.markerObjs,shapeObjs=markers.components.shapeObjs,markerGroup=markers.components.markerGroup,markerLabelGroup=markers.components.markerLabelGroup,markerConfigOptions,annotations=markers.getChildren(\"mapAnnotations\")[0],numberFormatter=markers.getFromEnv(\"number-formatter\"),markerOptions=chart.config.markerOpts,drawOptions,markerConfig,rawConfig,value,shapeId,id;if(id=item.id.toLowerCase()){if(items[id]){return}delete item.value;markers.imageLoadCount=0;markerObj=Markers._initializeMarkerItem(id,item,null);markerObj.dataset=markers;shapeId=markerObj.config.options.shapeid;markerConfig=markerObj.config;value=item.value;markerConfig.cleanValue=numberFormatter.getCleanValue(value);markerConfigOptions=markerConfig.options;if(markerConfig.cleanValue!==null){markerConfig.formattedValue=numberFormatter.dataLabels(value)}else{markerConfig.formattedValue=UNDEF}markerConfig.fillColor=(0,_lib.pluck)(markerConfigOptions.fillcolor,markerConfigOptions.color,markerOptions.fillColor);markerConfig.fillAlpha=(0,_lib.pluck)(markerConfigOptions.fillalpha,markerConfigOptions.alpha,markerOptions.fillAlpha);markerConfig.fillRatio=(0,_lib.pluck)(markerConfigOptions.fillratio,markerOptions.fillRatio);markerConfig.fillAngle=(0,_lib.pluck)(markerConfigOptions.fillangle,markerOptions.fillAngle);markerConfig.borderThickness=(0,_lib.pluckNumber)(markerConfigOptions.borderthickness,markerOptions.borderThickness);markerConfig.borderColor=(0,_lib.pluck)(markerConfigOptions.bordercolor,markerOptions.borderColor);markerConfig.borderAlpha=(0,_lib.pluck)(markerConfigOptions.borderalpha,markerOptions.borderAlpha);markerConfig.labelPadding=markerConfigOptions.labelpadding||markerOptions.labelPadding;markerConfig.options.tooltext=(0,_lib.pluck)(markerConfigOptions.tooltext,markerOptions.tooltext);markerConfig.link=markerConfigOptions.link;if(shapeId){markerObj.shapeObj=shapeObjs[shapeId&&shapeId.toLowerCase()]}items[id]=markerObj;drawOptions=markers._drawMarkerItem(markerObj);if(markerGroup&&markerLabelGroup){if(drawOptions.markerShape){rawConfig=Object.assign({align:\"center\",valign:\"middle\",animationLabel:\"markerItem\",autoscale:drawOptions.markerShape.type===\"image\"?0:1},drawOptions.markerShape);markerObj.markerShape=annotations.addItem(markerGroup.getId(),rawConfig,markers);markerObj.markerShape.data(\"unfilteredConfig\",rawConfig)}if(drawOptions.markerLabel){rawConfig=Object.assign({animationLabel:\"markerItem\"},drawOptions.markerLabel);markerObj.markerLabel=annotations.addItem(markerLabelGroup.getId(),rawConfig,markers);markerObj.markerLabel.data(\"unfilteredConfig\",rawConfig)}}markers._buildKdTree()}};_proto.updateMarkerItem=function updateMarkerItem(id,options){var markers=this,chart=markers.getFromEnv(\"chart\"),annotations=markers.getChildren(\"mapAnnotations\")[0],markerObjs=markers.components.markerObjs,markerOptions=chart.config.markerOpts,origOptions,key,markerConfig,optConfig={},marker=markerObjs[id],annotOptions;if(marker){origOptions=marker.config.options;(0,_lib.extend2)(origOptions,options);markers.imageLoadCount=0;markerConfig=marker.config;for(key in options){optConfig[key.toLowerCase()]=options[key]&&options[key].toString()}markerConfig.fillColor=(0,_lib.pluck)(optConfig.fillcolor,optConfig.color,markerOptions.fillColor);markerConfig.fillAlpha=(0,_lib.pluck)(optConfig.fillalpha,optConfig.alpha,markerOptions.fillAlpha);markerConfig.fillRatio=(0,_lib.pluck)(optConfig.fillratio,markerOptions.fillRatio);markerConfig.fillAngle=(0,_lib.pluck)(optConfig.fillangle,markerOptions.fillAngle);markerConfig.borderThickness=(0,_lib.pluckNumber)(optConfig.borderthickness,markerOptions.borderThickness);markerConfig.borderColor=(0,_lib.pluck)(optConfig.bordercolor,markerOptions.borderColor);markerConfig.borderAlpha=(0,_lib.pluck)(optConfig.borderalpha,markerOptions.borderAlpha);markerConfig.labelPadding=optConfig.labelpadding||markerOptions.labelPadding;markerConfig.options.tooltext=(0,_lib.pluck)(optConfig.tooltext,markerOptions.tooltext);markerConfig.link=optConfig.link;annotOptions=markers._drawMarkerItem(marker).markerShape;markers._buildKdTree();annotations.update(id,annotOptions)}};_proto.createContainer=function createContainer(){var dataset=this,parent=dataset.getLinkedParent(),animationManager=dataset.getFromEnv(\"animationManager\"),pContainer=parent.getChildContainer(\"layer1\");!dataset.getChildContainer(\"abovePlotGroup\")&&dataset.addChildContainer(\"abovePlotGroup\",animationManager.setAnimation({el:\"group\",attr:{name:\"abovePlotGroup\",opacity:1},container:pContainer,component:dataset,label:\"group\"}));!dataset.getChildContainer(\"belowPlotGroup\")&&dataset.addChildContainer(\"belowPlotGroup\",animationManager.setAnimation({el:\"group\",attr:{name:\"belowPlotGroup\",opacity:1},container:pContainer,component:dataset,label:\"group\"}))};_proto._removeMarkerItem=function _removeMarkerItem(id){var markers=this,components=markers.components,markerObjs=components.markerObjs,markerObj=markerObjs[id],kdArrayMap=components.kdArrayMap,annotations=markers.getChildren(\"mapAnnotations\")[0],markerShape,markerLabel;if(markerObj){markerShape=markerObj.markerShape;markerLabel=markerObj.markerLabel;markerShape&&annotations.destroy(markerShape.getId());markerLabel&&annotations.destroy(markerLabel.getId());delete kdArrayMap[id];markers._buildKdTree()}delete markerObjs[id]};_proto.getElement=function getElement(point){var datasetObj=this;if(datasetObj.components.kDTree){return datasetObj.components.kDTree.getNeighbour(point)}};return Markers}(_entities.default);var _default=Markers;exports.default=_default;"]},"metadata":{},"sourceType":"script"}